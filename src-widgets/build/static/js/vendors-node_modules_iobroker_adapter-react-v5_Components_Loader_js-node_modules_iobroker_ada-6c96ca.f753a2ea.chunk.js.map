{"version":3,"file":"static/js/vendors-node_modules_iobroker_adapter-react-v5_Components_Loader_js-node_modules_iobroker_ada-6c96ca.f753a2ea.chunk.js","mappings":"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","sources":["../node_modules/@iobroker/adapter-react-v5/Components/CopyToClipboard.js","../node_modules/@iobroker/adapter-react-v5/Components/Loader.js","../node_modules/@iobroker/adapter-react-v5/Components/Router.js","../node_modules/@iobroker/adapter-react-v5/Components/SaveCloseButtons.js","../node_modules/@iobroker/adapter-react-v5/Components/Utils.js","../node_modules/@iobroker/adapter-react-v5/Dialogs/Confirm.js","../node_modules/@iobroker/adapter-react-v5/Dialogs/Error.js","../node_modules/@iobroker/adapter-react-v5/Prompt.js","../node_modules/@iobroker/adapter-react-v5/Theme.js","../node_modules/@iobroker/adapter-react-v5/i18n.js","../node_modules/@iobroker/socket-client/src/AdminConnection.ts","../node_modules/@iobroker/socket-client/src/Connection.ts","../node_modules/@iobroker/socket-client/dist/esm/ConnectionProps.js","../node_modules/@iobroker/socket-client/src/DeferredPromise.ts","../node_modules/@iobroker/socket-client/src/index.ts","../node_modules/@iobroker/socket-client/src/tools.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\nMIT License\n\nCopyright (c) 2017 sudodoki <smd.deluzion@gmail.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n */\n// https://github.com/sudodoki/toggle-selection/blob/gh-pages/index.js\nfunction deselectCurrent() {\n    const selection = document.getSelection();\n    if (!(selection === null || selection === void 0 ? void 0 : selection.rangeCount)) {\n        return () => { };\n    }\n    let active = document.activeElement;\n    const ranges = [];\n    for (let i = 0; i < selection.rangeCount; i++) {\n        ranges.push(selection.getRangeAt(i));\n    }\n    switch (active === null || active === void 0 ? void 0 : active.tagName.toUpperCase()) { // .toUpperCase handles XHTML\n        case 'INPUT':\n        case 'TEXTAREA':\n            active.blur();\n            break;\n        default:\n            active = null;\n            break;\n    }\n    selection.removeAllRanges();\n    return () => {\n        selection.type === 'Caret' &&\n            selection.removeAllRanges();\n        if (!selection.rangeCount) {\n            ranges.forEach(range => selection.addRange(range));\n        }\n        active && active.focus();\n    };\n}\n// https://github.com/sudodoki/copy-to-clipboard/blob/master/index.js\nconst clipboardToIE11Formatting = {\n    'text/plain': 'Text',\n    'text/html': 'Url',\n    default: 'Text',\n};\nconst defaultMessage = 'Copy to clipboard: #{key}, Enter';\nfunction format(message) {\n    const copyKey = `${/mac os x/i.test(navigator.userAgent) ? '' : 'Ctrl'}+C`;\n    return message.replace(/#{\\s*key\\s*}/g, copyKey);\n}\nfunction copy(text, options) {\n    let reselectPrevious;\n    let range;\n    let selection;\n    let mark;\n    let success = false;\n    options = options || {};\n    const debug = options.debug || false;\n    try {\n        reselectPrevious = deselectCurrent();\n        range = document.createRange();\n        selection = document.getSelection();\n        mark = document.createElement('span');\n        mark.textContent = text;\n        // avoid screen readers from reading out loud the text\n        mark.ariaHidden = 'true';\n        // reset user styles for span element\n        mark.style.all = 'unset';\n        // prevents scrolling to the end of the page\n        mark.style.position = 'fixed';\n        mark.style.top = '0px';\n        mark.style.clip = 'rect(0, 0, 0, 0)';\n        // used to preserve spaces and line breaks\n        mark.style.whiteSpace = 'pre';\n        // do not inherit user-select (it may be `none`)\n        // @ts-ignore\n        mark.style.webkitUserSelect = 'text';\n        // @ts-ignore\n        mark.style.MozUserSelect = 'text';\n        // @ts-ignore\n        mark.style.msUserSelect = 'text';\n        mark.style.userSelect = 'text';\n        mark.addEventListener('copy', e => {\n            var _a, _b, _c, _d;\n            e.stopPropagation();\n            if (options === null || options === void 0 ? void 0 : options.format) {\n                e.preventDefault();\n                if (typeof e.clipboardData === 'undefined') { // IE 11\n                    debug && console.warn('unable to use e.clipboardData');\n                    debug && console.warn('trying IE specific stuff');\n                    (_a = window.clipboardData) === null || _a === void 0 ? void 0 : _a.clearData();\n                    // @ts-ignore\n                    const _format = clipboardToIE11Formatting[options.format] || clipboardToIE11Formatting.default;\n                    (_b = window.clipboardData) === null || _b === void 0 ? void 0 : _b.setData(_format, text);\n                }\n                else { // all other browsers\n                    (_c = e.clipboardData) === null || _c === void 0 ? void 0 : _c.clearData();\n                    (_d = e.clipboardData) === null || _d === void 0 ? void 0 : _d.setData(options.format, text);\n                }\n            }\n        });\n        document.body.appendChild(mark);\n        range.selectNodeContents(mark);\n        selection === null || selection === void 0 ? void 0 : selection.addRange(range);\n        const successful = document.execCommand('copy');\n        if (!successful) {\n            throw new Error('copy command was unsuccessful');\n        }\n        success = true;\n    }\n    catch (err) {\n        debug && console.error('unable to copy using execCommand: ', err);\n        debug && console.warn('trying IE specific stuff');\n        try {\n            window.clipboardData.setData(options.format || 'text', text);\n            // options.onCopy && options.onCopy((window as any).clipboardData);\n            success = true;\n        }\n        catch (error) {\n            debug && console.error('unable to copy using clipboardData: ', error);\n            debug && console.error('falling back to prompt');\n            const message = format('message' in options ? options.message || '' : defaultMessage);\n            window.prompt(message, text);\n        }\n    }\n    finally {\n        if (selection) {\n            if (range && typeof selection.removeRange === 'function') {\n                selection.removeRange(range);\n            }\n            else {\n                selection.removeAllRanges();\n            }\n        }\n        if (mark) {\n            document.body.removeChild(mark);\n        }\n        reselectPrevious && reselectPrevious();\n    }\n    return success;\n}\nexports.default = copy;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Copyright 2018-2024 Denis Haev (bluefox) <dogafox@gmail.com>\n *\n * MIT License\n *\n **/\nconst react_1 = __importStar(require(\"react\"));\nconst loaderStyles = `\n/**\n * Copyright 2018-2024 Denis Haev (bluefox) <dogafox@gmail.com>\n *\n * MIT License\n *\n **/\n\n.logo-background-light, .logo-background-colored {\n    background: white;\n}\n.logo-background-dark, .logo-background-blue {\n    background: black;\n}\n.logo-div {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    -ms-transform: translateX(-50%) translateY(-50%);\n    -webkit-transform: translate(-50%,-50%);\n    transform: translate(-50%,-50%);\n    overflow: hidden;\n    border-radius: 50%;\n    z-index: 2;\n}\n.logo-border {\n    /*border-color: #164477;*/\n    border-top-color: #3399CC;\n    border-left-color: #164477;\n    border-bottom-color: #164477;\n    border-right-color: #164477;\n    border-radius: 50%;\n    border-style: solid;\n    box-sizing: border-box;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n}\n.logo-top {\n    position: absolute;\n    width: 4.5%;\n    height: 16%;\n    top: 0;\n    z-index: 2;\n}\n.logo-i {\n    position: absolute;\n    width: 14.5%;\n    height: 60%;\n    top: 20%;\n    left: 42%;\n    background: #3399CC;\n}\n.logo-i-top {\n    position: absolute;\n    width: 14.5%;\n    height: 4%;\n    left: 42%;\n    background: #3399CC;\n    border-radius: 100%;\n}\n.logo-back {\n    width: 100%;\n    height: 100%;\n    z-index: 0;\n    overflow: hidden;\n}\n@keyframes logo-grow {\n    0% {\n        width: 230px;\n        height: 230px;\n        transform: translate(-50%,-50%) scale(1);\n        opacity: 1\n    }\n    99% {\n        width: 230px;\n        height: 230px;\n        transform: translate(-50%,-50%) scale(10);\n        opacity: 0;\n    }\n    100% {\n        width: 0;\n        height: 0;\n        opacity: 0;\n    }\n}\n@keyframes logo-spin { 100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); } }\n@keyframes logo-color-inside-light {\n    0% {\n        background: #FEFEFE;\n    }\n    100% {\n        background: #3399CC;\n    }\n}\n@keyframes logo-color-inside-dark {\n    0% {\n        background: #030303;\n    }\n    100% {\n        background: #3399CC;\n    }\n}\n@keyframes logo-color-inside-colored {\n    0% {\n        background: #FEFEFE;\n    }\n    100% {\n        background: #3399CC;\n    }\n}\n@keyframes logo-color-inside-blue {\n    0% {\n        background: #030303;\n    }\n    100% {\n        background: #3399CC;\n    }\n}\n\n@keyframes logo-color-outside-light {\n    0% {\n        border-color: #FEFEFE;\n    }\n    100% {\n        border-top-color: #3399CC;\n        border-left-color: #164477;\n        border-bottom-color: #164477;\n        border-right-color: #164477;\n    }\n}\n@keyframes logo-color-outside-dark  {\n    0% {\n        border-color: #040404;\n    }\n    100% {\n        border-top-color: #3399CC;\n        border-left-color: #164477;\n        border-bottom-color: #164477;\n        border-right-color: #164477;\n    }\n}\n@keyframes logo-color-outside-colored {\n    0% {\n        border-color: #FEFEFE;\n    }\n    100% {\n        border-top-color: #3399CC;\n        border-left-color: #164477;\n        border-bottom-color: #164477;\n        border-right-color: #164477;\n    }\n}\n@keyframes logo-color-outside-blue  {\n    0% {\n        border-color: #040404;\n    }\n    100% {\n        border-top-color: #3399CC;\n        border-left-color: #164477;\n        border-bottom-color: #164477;\n        border-right-color: #164477;\n    }\n}\n\n.logo-animate-wait {\n    animation: logo-color-outside 1.5s, logo-spin 1.5s linear infinite;\n}\n\n.logo-animate-grow-light {\n    background: #DDD;\n}\n.logo-animate-grow-dark {\n    background: #1d1d1d;\n}\n.logo-animate-grow-colored {\n    background: #DDD;\n}\n.logo-animate-grow-blue {\n    background: #1d1d1d;\n}\n\n.logo-animate-grow {\n    display: inline-block;\n    text-align: center;\n    z-index: 1;\n    top: 50%;\n    left: 50%;\n    -ms-transform: translateX(-50%) translateY(-50%);\n    -webkit-transform: translate(-50%,-50%);\n    transform: translate(-50%,-50%);\n    width: 245px;\n    height: 245px;\n    border-radius: 50%;\n    position: absolute;\n    animation: logo-grow 1s 1 ease forwards;\n}\n\n.logo-animate-color-inside-light {\n    animation: logo-color-inside-light 2.5s;\n}\n.logo-animate-color-inside-dark {\n    animation: logo-color-inside-dark 2.5s;\n}\n.logo-animate-color-inside-colored {\n    animation: logo-color-inside-colored 2.5s;\n}\n.logo-animate-color-inside-blue {\n    animation: logo-color-inside-blue 2.5s;\n}\n\n.logo-animate-color-outside-light {\n    animation: logo-color-outside-light 1.5s;\n}\n.logo-animate-color-outside-dark {\n    animation: logo-color-outside-dark 1.5s;\n}\n.logo-animate-color-outside-colored {\n    animation: logo-color-outside-colored 1.5s;\n}\n.logo-animate-color-outside-blue {\n    animation: logo-color-outside-blue 1.5s;\n}\n`;\nfunction Loader(props) {\n    (0, react_1.useEffect)(() => {\n        if (!window.document.getElementById('loader-iobroker-component')) {\n            const style = window.document.createElement('style');\n            style.setAttribute('id', 'loader-iobroker-component');\n            style.innerHTML = loaderStyles;\n            window.document.head.appendChild(style);\n        }\n    }, []);\n    const size = props.size || 234;\n    const theme = props.themeName || props.theme || props.themeType || 'light';\n    return react_1.default.createElement(\"div\", { className: `logo-back logo-background-${theme}`, style: {\n            backgroundImage: (props.backgroundImage && props.backgroundImage !== '@@loginBackgroundImage@@') ? props.backgroundImage :\n                (window.loadingBackgroundImage && window.loadingBackgroundImage !== '@@loginBackgroundImage@@' ? `url(${window.loadingBackgroundImage})` : undefined),\n            backgroundColor: (props.backgroundColor && props.backgroundColor !== '@@loginBackgroundColor@@') ? props.backgroundColor :\n                (window.loadingBackgroundColor && window.loadingBackgroundColor !== '@@loginBackgroundColor@@' ? window.loadingBackgroundColor : undefined),\n            backgroundSize: 'cover',\n        } }, window.loadingHideLogo === 'true' ?\n        null\n        :\n            react_1.default.createElement(react_1.default.Fragment, null,\n                react_1.default.createElement(\"div\", { className: \"logo-div\", style: { width: size, height: size } },\n                    react_1.default.createElement(\"div\", { className: `logo-top logo-background-${theme}`, style: { left: '37%' } }),\n                    react_1.default.createElement(\"div\", { className: `logo-top logo-background-${theme}`, style: { left: '57%' } }),\n                    react_1.default.createElement(\"div\", { className: `logo-border logo-background-${theme} logo-animate-wait`, style: { borderWidth: size * 0.132 } }),\n                    react_1.default.createElement(\"div\", { className: `logo-i logo-animate-color-inside-${theme}` }),\n                    react_1.default.createElement(\"div\", { className: `logo-i-top logo-animate-color-inside-${theme}`, style: { top: '18%' } }),\n                    react_1.default.createElement(\"div\", { className: `logo-i-top logo-animate-color-inside-${theme}`, style: { bottom: '18%' } })),\n                react_1.default.createElement(\"div\", { className: `logo-animate-grow logo-animate-grow-${theme}`, style: { width: size + 11, height: size + 11 } })));\n}\nexports.default = Loader;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = __importDefault(require(\"react\"));\nclass Router extends react_1.default.Component {\n    constructor(props) {\n        super(props);\n        this.onHashChangedBound = this.onHashChanged.bind(this);\n    }\n    componentDidMount() {\n        window.addEventListener('hashchange', this.onHashChangedBound);\n    }\n    componentWillUnmount() {\n        window.removeEventListener('hashchange', this.onHashChangedBound);\n    }\n    onHashChanged() {\n        // override this function\n    }\n    /**\n     * Gets the location object.\n     */\n    static getLocation() {\n        let hash = window.location.hash;\n        hash = hash.replace(/^#/, '');\n        const parts = hash.split('/').map(item => {\n            try {\n                return item ? decodeURIComponent(item) : '';\n            }\n            catch (e) {\n                console.error(`Router: Cannot decode ${item}`);\n                return item || '';\n            }\n        });\n        // #tabName/dialogName/deviceId\n        return {\n            tab: parts[0] || '',\n            dialog: parts[1] || '',\n            id: parts[2] || '',\n            arg: parts[3] || '',\n        };\n    }\n    /**\n     * Navigate to a new location. Any parameters that are not set will be taken from the current location.\n     */\n    static doNavigate(tab, dialog, id, arg) {\n        let hash = '';\n        const location = Router.getLocation();\n        if (arg !== undefined && !id) {\n            id = location.id;\n        }\n        if (id && !dialog) {\n            dialog = location.dialog;\n        }\n        if (dialog && !tab) {\n            tab = location.tab;\n        }\n        else if (tab === null) {\n            tab = location.tab;\n        }\n        if (tab) {\n            hash = `#${tab}`;\n            if (dialog) {\n                hash += `/${dialog}`;\n                if (id) {\n                    hash += `/${id}`;\n                    if (arg !== undefined) {\n                        hash += `/${arg}`;\n                    }\n                }\n            }\n        }\n        if (window.location.hash !== hash) {\n            window.location.hash = hash;\n        }\n    }\n}\nexports.default = Router;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// please do not delete React, as without it other projects could not be compiled: ReferenceError: React is not defined\nconst react_1 = __importDefault(require(\"react\"));\nconst styles_1 = require(\"@mui/styles\");\nconst material_1 = require(\"@mui/material\");\nconst icons_material_1 = require(\"@mui/icons-material\");\nconst i18n_1 = __importDefault(require(\"../i18n\"));\nconst styles = () => ({\n    buttonIcon: {\n        marginRight: 8,\n    },\n});\n/**\n * @typedef {object} SaveCloseButtonsProps\n * @property {boolean} noTextOnButtons Are the buttons without text\n * @property {any} theme Theme object (from this.state.theme)\n * @property {boolean} isIFrame bottom position 0 or 38 for iFrame\n * @property {boolean} newReact is used in new react\n * @property {function} onSave on Save handler\n * @property {function} onClose on Close handler\n *\n * @extends {React.Component<SaveCloseButtonsProps>}\n */\nclass SaveCloseButtons extends react_1.default.Component {\n    /**\n     * @param {SaveCloseButtonsProps} props\n     */\n    constructor(props) {\n        super(props);\n        const newReact = props.newReact === undefined ? true : props.newReact;\n        try {\n            this.isIFrame = !newReact && window.self !== window.top;\n        }\n        catch (e) {\n            this.isIFrame = !newReact;\n        }\n    }\n    render() {\n        const noTextOnButtons = this.props.noTextOnButtons;\n        const buttonStyle = {\n            borderRadius: this.props.theme.saveToolbar.button.borderRadius || 3,\n            height: this.props.theme.saveToolbar.button.height || 32,\n        };\n        const style = {\n            bottom: this.isIFrame ? 38 : 0,\n            left: this.props.paddingLeft || 0,\n            right: 0,\n            position: 'absolute',\n            background: this.props.theme.saveToolbar.background,\n        };\n        if (this.props.dense) {\n            style.minHeight = 48;\n        }\n        if (this.props.error) {\n            buttonStyle.border = '1px solid red';\n        }\n        return react_1.default.createElement(material_1.Toolbar\n        // position=\"absolute\"\n        , { \n            // position=\"absolute\"\n            style: style },\n            react_1.default.createElement(material_1.Fab, { variant: \"extended\", \"aria-label\": \"Save\", disabled: !this.props.changed || this.props.error, onClick: () => this.props.onSave(false), style: buttonStyle },\n                react_1.default.createElement(icons_material_1.Save, { className: !noTextOnButtons ? this.props.classes.buttonIcon : '' }),\n                !noTextOnButtons && i18n_1.default.t('ra_Save')),\n            react_1.default.createElement(material_1.Fab, { variant: \"extended\", \"aria-label\": \"Save and close\", disabled: !this.props.changed || this.props.error, onClick: () => this.props.onSave(true), style: Object.assign(Object.assign({}, buttonStyle), { marginLeft: 10 }) },\n                react_1.default.createElement(icons_material_1.Save, { className: !noTextOnButtons ? this.props.classes.buttonIcon : '' }),\n                !noTextOnButtons ? i18n_1.default.t('ra_Save and close') : '+',\n                noTextOnButtons && react_1.default.createElement(icons_material_1.Close, null)),\n            react_1.default.createElement(\"div\", { style: { flexGrow: 1 } }),\n            react_1.default.createElement(material_1.Fab, { variant: \"extended\", \"aria-label\": \"Close\", onClick: () => this.props.onClose(), style: buttonStyle },\n                react_1.default.createElement(icons_material_1.Close, { className: !noTextOnButtons ? this.props.classes.buttonIcon : '' }),\n                !noTextOnButtons && i18n_1.default.t('ra_Close')));\n    }\n}\n/** @type {typeof SaveCloseButtons} */\nconst _export = (0, styles_1.withStyles)(styles)(SaveCloseButtons);\nexports.default = _export;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Copyright 2018-2023 Denis Haev <dogafox@gmail.com>\n *\n * MIT License\n *\n **/\nconst react_1 = __importDefault(require(\"react\"));\nconst CopyToClipboard_1 = __importDefault(require(\"./CopyToClipboard\"));\nconst i18n_1 = __importDefault(require(\"../i18n\"));\nconst NAMESPACE = 'material';\nconst days = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];\nconst months = ['Jan', 'Feb', 'Mar', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\nconst QUALITY_BITS = {\n    0x00: '0x00 - good',\n    0x01: '0x01 - general problem',\n    0x02: '0x02 - no connection problem',\n    0x10: '0x10 - substitute value from controller',\n    0x20: '0x20 - substitute initial value',\n    0x40: '0x40 - substitute value from device or instance',\n    0x80: '0x80 - substitute value from sensor',\n    0x11: '0x11 - general problem by instance',\n    0x41: '0x41 - general problem by device',\n    0x81: '0x81 - general problem by sensor',\n    0x12: '0x12 - instance not connected',\n    0x42: '0x42 - device not connected',\n    0x82: '0x82 - sensor not connected',\n    0x44: '0x44 - device reports error',\n    0x84: '0x84 - sensor reports error',\n};\nconst SIGNATURES = {\n    JVBERi0: 'pdf',\n    R0lGODdh: 'gif',\n    R0lGODlh: 'gif',\n    iVBORw0KGgo: 'png',\n    '/9j/': 'jpg',\n    PHN2Zw: 'svg',\n    Qk1: 'bmp',\n    AAABAA: 'ico', // 00 00 01 00 according to https://en.wikipedia.org/wiki/List_of_file_signatures\n};\nclass Utils {\n    /**\n     * Capitalize words.\n     */\n    static CapitalWords(name) {\n        return (name || '').split(/[\\s_]/)\n            .filter(item => item)\n            .map(word => (word ? word[0].toUpperCase() + word.substring(1).toLowerCase() : ''))\n            .join(' ');\n    }\n    static formatSeconds(seconds) {\n        const days_ = Math.floor(seconds / (3600 * 24));\n        seconds %= 3600 * 24;\n        const hours = Math.floor(seconds / 3600);\n        seconds %= 3600;\n        const minutes = Math.floor(seconds / 60);\n        seconds %= 60;\n        seconds = Math.floor(seconds);\n        let text = '';\n        if (days_) {\n            text += `${days_} ${i18n_1.default.t('ra_daysShortText')} `;\n        }\n        text += `${hours < 10 ? `0${hours}` : hours}:${minutes < 10 ? `0${minutes}` : minutes}:${seconds < 10 ? `0${seconds}` : seconds}`;\n        return text;\n    }\n    /**\n     * Get the name of the object by id from the name or description.\n     * @param objects\n     * @param id\n     * @param settings\n     * @param options\n     * @param isDesc Set to true to get the description.\n     */\n    static getObjectName(objects, id, settings, options, isDesc) {\n        const item = objects[id];\n        let text;\n        const attr = isDesc ? 'desc' : 'name';\n        if (typeof settings === 'string' && !options) {\n            options = { language: settings };\n            settings = null;\n        }\n        options = options || {};\n        if (!options.language) {\n            options.language = (objects['system.config'] && objects['system.config'].common && objects['system.config'].common.language) || window.sysLang || 'en';\n        }\n        if (settings === null || settings === void 0 ? void 0 : settings.name) {\n            text = settings.name;\n            if (typeof text === 'object') {\n                text = (options.language && text[options.language]) || text.en;\n            }\n        }\n        else if (item && item.common && item.common[attr]) {\n            text = item.common[attr];\n            if (attr !== 'desc' && !text && item.common.desc) {\n                text = item.common.desc;\n            }\n            if (typeof text === 'object') {\n                text = (options.language && text[options.language]) || text.en || text.de || text.ru || '';\n            }\n            text = (text || '').toString().replace(/[_.]/g, ' ');\n            if (text === text.toUpperCase()) {\n                text = text[0] + text.substring(1).toLowerCase();\n            }\n        }\n        else {\n            const pos = id.lastIndexOf('.');\n            text = id.substring(pos + 1).replace(/[_.]/g, ' ');\n            text = Utils.CapitalWords(text);\n        }\n        return text.trim();\n    }\n    /**\n     * Get the name of the object from the name or description.\n     * @param obj\n     * @param settings or language\n     * @param options\n     * @param isDesc Set to true to get the description.\n     * @param noTrim Allow to use spaces in name (by edit)\n     */\n    static getObjectNameFromObj(obj, settings, options, isDesc, noTrim) {\n        const item = obj;\n        let text = (obj && obj._id) || '';\n        const attr = isDesc ? 'desc' : 'name';\n        if (typeof settings === 'string' && !options) {\n            options = { language: settings };\n            settings = null;\n        }\n        options = options || {};\n        if (settings === null || settings === void 0 ? void 0 : settings.name) {\n            const textOrTranslation = settings.name;\n            if (textOrTranslation && typeof textOrTranslation === 'object') {\n                text = (options.language && textOrTranslation[options.language]) || textOrTranslation.en;\n            }\n            else {\n                text = textOrTranslation;\n            }\n        }\n        else if ((item === null || item === void 0 ? void 0 : item.common) && item.common[attr]) {\n            let textOrTranslation = item.common[attr];\n            if (attr !== 'desc' && !textOrTranslation && item.common.desc) {\n                textOrTranslation = item.common.desc;\n            }\n            if (typeof textOrTranslation === 'object') {\n                text = (options.language && textOrTranslation[options.language]) || textOrTranslation.en;\n            }\n            else {\n                text = textOrTranslation;\n            }\n            text = (text || '').toString().replace(/[_.]/g, ' ');\n            if (text === text.toUpperCase()) {\n                text = text[0] + text.substring(1).toLowerCase();\n            }\n        }\n        return noTrim ? text : text.trim();\n    }\n    /**\n     * Extracts from the object material settings, depends on username\n     */\n    static getSettingsOrder(obj, forEnumId, options) {\n        let common;\n        if (obj && Object.prototype.hasOwnProperty.call(obj, 'common')) {\n            common = obj.common;\n        }\n        else {\n            common = obj;\n        }\n        let settings;\n        if (common === null || common === void 0 ? void 0 : common.custom) {\n            settings = common.custom[NAMESPACE];\n            const user = options.user || 'admin';\n            if (settings && settings[user]) {\n                if (forEnumId) {\n                    if (settings[user].subOrder && settings[user].subOrder[forEnumId]) {\n                        return JSON.parse(JSON.stringify(settings[user].subOrder[forEnumId]));\n                    }\n                }\n                else if (settings[user].order) {\n                    return JSON.parse(JSON.stringify(settings[user].order));\n                }\n            }\n        }\n        return null;\n    }\n    /**\n        Used in material\n     */\n    static getSettingsCustomURLs(obj, forEnumId, options) {\n        let common;\n        if (obj && Object.prototype.hasOwnProperty.call(obj, 'common')) {\n            common = obj.common;\n        }\n        else {\n            common = obj;\n        }\n        let settings;\n        if (common === null || common === void 0 ? void 0 : common.custom) {\n            settings = common.custom[NAMESPACE];\n            const user = options.user || 'admin';\n            if (settings && settings[user]) {\n                if (forEnumId) {\n                    if (settings[user].subURLs && settings[user].subURLs[forEnumId]) {\n                        return JSON.parse(JSON.stringify(settings[user].subURLs[forEnumId]));\n                    }\n                }\n                else if (settings[user].URLs) {\n                    return JSON.parse(JSON.stringify(settings[user].URLs));\n                }\n            }\n        }\n        return null;\n    }\n    /**\n     * Reorder the array items in list between source and dest.\n     */\n    static reorder(list, source, dest) {\n        const result = Array.from(list);\n        const [removed] = result.splice(source, 1);\n        result.splice(dest, 0, removed);\n        return result;\n    }\n    /**\n        Get smart name settings for the given object.\n     */\n    static getSettings(obj, options, defaultEnabling) {\n        let settings;\n        const id = (obj === null || obj === void 0 ? void 0 : obj._id) || (options === null || options === void 0 ? void 0 : options.id);\n        let common;\n        if (obj && Object.prototype.hasOwnProperty.call(obj, 'common')) {\n            common = obj.common;\n        }\n        else {\n            common = obj;\n        }\n        if (common === null || common === void 0 ? void 0 : common.custom) {\n            settings = common.custom;\n            settings = settings[NAMESPACE] && settings[NAMESPACE][options.user || 'admin'] ? JSON.parse(JSON.stringify(settings[NAMESPACE][options.user || 'admin'])) : { enabled: true };\n        }\n        else {\n            settings = { enabled: defaultEnabling === undefined ? true : defaultEnabling, useCustom: false };\n        }\n        if (!Object.prototype.hasOwnProperty.call(settings, 'enabled')) {\n            settings.enabled = defaultEnabling === undefined ? true : defaultEnabling;\n        }\n        // if (false && settings.useCommon) {\n        //     if (obj.color) settings.color = obj.color;\n        //     if (obj.icon)  settings.icon  = obj.icon;\n        //     if (obj.name)  settings.name  = obj.name;\n        // } else {\n        if (options) {\n            if (!settings.name && options.name) {\n                settings.name = options.name;\n            }\n            if (!settings.icon && options.icon) {\n                settings.icon = options.icon;\n            }\n            if (!settings.color && options.color) {\n                settings.color = options.color;\n            }\n        }\n        if (common) {\n            // @ts-ignore todo: after new types released\n            settings.color = settings.color || common.color;\n            settings.icon = settings.icon || common.icon;\n            settings.name = settings.name || common.name;\n        }\n        if (typeof settings.name === 'object') {\n            settings.name = (options.language && settings.name[options.language]) || settings.name.en;\n            settings.name = (settings.name || '').toString().replace(/_/g, ' ');\n            if (settings.name === settings.name.toUpperCase()) {\n                settings.name = settings.name[0] + settings.name.substring(1).toLowerCase();\n            }\n        }\n        if (!settings.name && id) {\n            const pos = id.lastIndexOf('.');\n            settings.name = id.substring(pos + 1).replace(/[_.]/g, ' ');\n            settings.name = (settings.name || '').toString().replace(/_/g, ' ');\n            settings.name = Utils.CapitalWords(settings.name);\n        }\n        return settings;\n    }\n    /**\n        Sets smartName settings for the given object.\n     */\n    static setSettings(obj, settings, options) {\n        if (obj) {\n            obj.common = obj.common || {};\n            obj.common.custom = obj.common.custom || {};\n            obj.common.custom[NAMESPACE] = obj.common.custom[NAMESPACE] || {};\n            obj.common.custom[NAMESPACE][options.user || 'admin'] = settings;\n            const s = obj.common.custom[NAMESPACE][options.user || 'admin'];\n            if (s.useCommon) {\n                if (s.color !== undefined) {\n                    // @ts-ignore todo: after new types released\n                    obj.common.color = s.color;\n                    delete s.color;\n                }\n                if (s.icon !== undefined) {\n                    obj.common.icon = s.icon;\n                    delete s.icon;\n                }\n                if (s.name !== undefined) {\n                    if (typeof obj.common.name !== 'object' && options.language) {\n                        obj.common.name = { [options.language]: s.name };\n                    }\n                    else if (typeof obj.common.name === 'object' && options.language) {\n                        obj.common.name[options.language] = s.name;\n                    }\n                    delete s.name;\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Get the icon for the given settings.\n     */\n    static getIcon(settings, style) {\n        if (settings && settings.icon) {\n            // If UTF-8 icon\n            if (settings.icon.length <= 2) {\n                return react_1.default.createElement(\"span\", { style: style || {} }, settings.icon);\n            }\n            if (settings.icon.startsWith('data:image')) {\n                return react_1.default.createElement(\"img\", { alt: settings.name, src: settings.icon, style: style || {} });\n            }\n            // maybe later some changes for a second type\n            return react_1.default.createElement(\"img\", { alt: settings.name, src: (settings.prefix || '') + settings.icon, style: style });\n        }\n        return null;\n    }\n    /**\n     * Get the icon for the given object.\n     */\n    static getObjectIcon(id, obj) {\n        // If id is Object\n        if (typeof id === 'object') {\n            obj = id;\n            id = obj === null || obj === void 0 ? void 0 : obj._id;\n        }\n        if (obj && obj.common && obj.common.icon) {\n            let icon = obj.common.icon;\n            // If UTF-8 icon\n            if (typeof icon === 'string' && icon.length <= 2) {\n                return icon;\n            }\n            if (icon.startsWith('data:image')) {\n                return icon;\n            }\n            const parts = id.split('.');\n            if (parts[0] === 'system') {\n                icon = `adapter/${parts[2]}${icon.startsWith('/') ? '' : '/'}${icon}`;\n            }\n            else {\n                icon = `adapter/${parts[0]}${icon.startsWith('/') ? '' : '/'}${icon}`;\n            }\n            if (window.location.pathname.match(/adapter\\/[^/]+\\/[^/]+\\.html/)) {\n                icon = `../../${icon}`;\n            }\n            else if (window.location.pathname.match(/material\\/[.\\d]+/)) {\n                icon = `../../${icon}`;\n            }\n            else if (window.location.pathname.match(/material\\//)) {\n                icon = `../${icon}`;\n            }\n            return icon;\n        }\n        return null;\n    }\n    /**\n     * Splits CamelCase into words.\n     */\n    static splitCamelCase(text) {\n        // if (false && text !== text.toUpperCase()) {\n        //     const words = text.split(/\\s+/);\n        //     for (let i = 0; i < words.length; i++) {\n        //         const word = words[i];\n        //         if (word.toLowerCase() !== word && word.toUpperCase() !== word) {\n        //             let z = 0;\n        //             const ww = [];\n        //             let start = 0;\n        //             while (z < word.length) {\n        //                 if (word[z].match(/[A-Z-]/)) {\n        //                     ww.push(word.substring(start, z));\n        //                     start = z;\n        //                 }\n        //                 z++;\n        //             }\n        //             if (start !== z) {\n        //                 ww.push(word.substring(start, z));\n        //             }\n        //             for (let k = 0; k < ww.length; k++) {\n        //                 words.splice(i + k, 0, ww[k]);\n        //             }\n        //             i += ww.length;\n        //         }\n        //     }\n        //\n        //     return words.map(w => {\n        //         w = w.trim();\n        //         if (w) {\n        //             return w[0].toUpperCase() + w.substring(1).toLowerCase();\n        //         }\n        //         return '';\n        //     }).join(' ');\n        // }\n        return text ? Utils.CapitalWords(text) : '';\n    }\n    /**\n     * Check if the given color is bright.\n     * https://stackoverflow.com/questions/35969656/how-can-i-generate-the-opposite-color-according-to-current-color\n     */\n    static isUseBright(color, defaultValue) {\n        if (!color) {\n            return defaultValue === undefined ? true : defaultValue;\n        }\n        color = color.toString();\n        if (color.startsWith('#')) {\n            color = color.slice(1);\n        }\n        let r;\n        let g;\n        let b;\n        const rgb = color.match(/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?/i);\n        if (rgb && rgb.length === 4) {\n            r = parseInt(rgb[1], 10);\n            g = parseInt(rgb[2], 10);\n            b = parseInt(rgb[3], 10);\n        }\n        else {\n            // convert 3-digit hex to 6-digits.\n            if (color.length === 3) {\n                color = color[0] + color[0] + color[1] + color[1] + color[2] + color[2];\n            }\n            // remove alfa channel\n            if (color.length === 8) {\n                color = color.substring(0, 6);\n            }\n            else if (color.length !== 6) {\n                return false;\n            }\n            r = parseInt(color.slice(0, 2), 16);\n            g = parseInt(color.slice(2, 4), 16);\n            b = parseInt(color.slice(4, 6), 16);\n        }\n        // http://stackoverflow.com/a/3943023/112731\n        return (r * 0.299 + g * 0.587 + b * 0.114) <= 186;\n    }\n    /**\n     * Get the time string in the format 00:00.\n     */\n    static getTimeString(seconds) {\n        seconds = parseFloat(seconds.toString());\n        if (Number.isNaN(seconds)) {\n            return '--:--';\n        }\n        const hours = Math.floor(seconds / 3600);\n        const minutes = Math.floor((seconds % 3600) / 60);\n        const secs = seconds % 60;\n        if (hours) {\n            return `${hours}:${minutes < 10 ? `0${minutes}` : minutes}:${secs < 10 ? `0${secs}` : secs}`;\n        }\n        return `${minutes < 10 ? `0${minutes}` : minutes}:${secs < 10 ? `0${secs}` : secs}`;\n    }\n    /**\n     * Gets the wind direction with the given angle (degrees).\n     * @param angle in degrees.\n     */\n    static getWindDirection(angle) {\n        if (angle >= 0 && angle < 11.25) {\n            return 'N';\n        }\n        if (angle >= 11.25 && angle < 33.75) {\n            return 'NNE';\n        }\n        if (angle >= 33.75 && angle < 56.25) {\n            return 'NE';\n        }\n        if (angle >= 56.25 && angle < 78.75) {\n            return 'ENE';\n        }\n        if (angle >= 78.75 && angle < 101.25) {\n            return 'E';\n        }\n        if (angle >= 101.25 && angle < 123.75) {\n            return 'ESE';\n        }\n        if (angle >= 123.75 && angle < 146.25) {\n            return 'SE';\n        }\n        if (angle >= 146.25 && angle < 168.75) {\n            return 'SSE';\n        }\n        if (angle >= 168.75 && angle < 191.25) {\n            return 'S';\n        }\n        if (angle >= 191.25 && angle < 213.75) {\n            return 'SSW';\n        }\n        if (angle >= 213.75 && angle < 236.25) {\n            return 'SW';\n        }\n        if (angle >= 236.25 && angle < 258.75) {\n            return 'WSW';\n        }\n        if (angle >= 258.75 && angle < 281.25) {\n            return 'W';\n        }\n        if (angle >= 281.25 && angle < 303.75) {\n            return 'WNW';\n        }\n        if (angle >= 303.75 && angle < 326.25) {\n            return 'NW';\n        }\n        if (angle >= 326.25 && angle < 348.75) {\n            return 'NNW';\n        }\n        // if (angle >= 348.75) {\n        return 'N';\n    }\n    /**\n     * Pad the given number with a zero if it's not two digits long.\n     */\n    static padding(num) {\n        if (typeof num === 'string') {\n            if (num.length < 2) {\n                return `0${num}`;\n            }\n            return num;\n        }\n        if (num < 10) {\n            return `0${num}`;\n        }\n        return num.toString();\n    }\n    /**\n     * Sets the date format.\n     */\n    static setDataFormat(format) {\n        if (format) {\n            Utils.dateFormat = format.toUpperCase().split(/[.-/]/);\n            Utils.dateFormat.splice(Utils.dateFormat.indexOf('YYYY'), 1);\n        }\n    }\n    /**\n     * Converts the date to a string.\n     */\n    static date2string(now) {\n        if (typeof now === 'string') {\n            now = now.trim();\n            if (!now) {\n                return '';\n            }\n            // only letters\n            if (now.match(/^[\\w\\s]+$/)) {\n                // Day of the week\n                return now;\n            }\n            const m = now.match(/(\\d{1,4})[-./](\\d{1,2})[-./](\\d{1,4})/);\n            if (m) {\n                const a = [parseInt(m[1], 10), parseInt(m[2], 10), parseInt(m[3], 10)];\n                // we now have 3 numbers. Let's try to detect where is year, where is day and where is month\n                const year = a.find(y => y > 31);\n                if (year !== undefined) {\n                    a.splice(a.indexOf(year), 1);\n                    const day = a.find(mm => mm > 12);\n                    if (day) {\n                        a.splice(a.indexOf(day), 1);\n                        now = new Date(year, a[0] - 1, day);\n                    }\n                    else if (Utils.dateFormat[0][0] === 'M' && Utils.dateFormat[1][0] === 'D') {\n                        // MM DD\n                        now = new Date(year, a[0] - 1, a[1]);\n                        if (Math.abs(now.getTime() - Date.now()) > 3600000 * 24 * 10) {\n                            now = new Date(year, a[1] - 1, a[0]);\n                        }\n                    }\n                    else if (Utils.dateFormat[0][0] === 'D' && Utils.dateFormat[1][0] === 'M') {\n                        // DD MM\n                        now = new Date(year, a[1] - 1, a[0]);\n                        if (Math.abs(now.getTime() - Date.now()) > 3600000 * 24 * 10) {\n                            now = new Date(year, a[0] - 1, a[1]);\n                        }\n                    }\n                    else {\n                        now = new Date(now);\n                    }\n                }\n                else {\n                    now = new Date(now);\n                }\n            }\n            else {\n                now = new Date(now);\n            }\n        }\n        else {\n            now = new Date(now);\n        }\n        let date = i18n_1.default.t(`ra_dow_${days[now.getDay()]}`).replace('ra_dow_', '');\n        date += `. ${now.getDate()} ${i18n_1.default.t(`ra_month_${months[now.getMonth()]}`).replace('ra_month_', '')}`;\n        return date;\n    }\n    /**\n     * Render a text as a link.\n     */\n    static renderTextWithA(text) {\n        let m = text.match(/<a [^<]+<\\/a>|<br\\s?\\/?>|<b>[^<]+<\\/b>|<i>[^<]+<\\/i>/);\n        if (m) {\n            const result = [];\n            let key = 1;\n            do {\n                const start = text.substring(0, m.index);\n                text = text.substring((m.index || 0) + m[0].length);\n                start && result.push(react_1.default.createElement(\"span\", { key: `a${key++}` }, start));\n                if (m[0].startsWith('<b>')) {\n                    result.push(react_1.default.createElement(\"b\", { key: `a${key++}` }, m[0].substring(3, m[0].length - 4)));\n                }\n                else if (m[0].startsWith('<i>')) {\n                    result.push(react_1.default.createElement(\"i\", { key: `a${key++}` }, m[0].substring(3, m[0].length - 4)));\n                }\n                else if (m[0].startsWith('<br')) {\n                    result.push(react_1.default.createElement(\"br\", { key: `a${key++}` }));\n                }\n                else {\n                    const href = m[0].match(/href=\"([^\"]+)\"/) || m[0].match(/href='([^']+)'/);\n                    const target = m[0].match(/target=\"([^\"]+)\"/) || m[0].match(/target='([^']+)'/);\n                    const rel = m[0].match(/rel=\"([^\"]+)\"/) || m[0].match(/rel='([^']+)'/);\n                    const title = m[0].match(/>([^<]*)</);\n                    // eslint-disable-next-line\n                    result.push(react_1.default.createElement(\"a\", { key: `a${key++}`, href: href ? href[1] : '', target: target ? target[1] : '_blank', rel: rel ? rel[1] : '', style: { color: 'inherit' } }, title ? title[1] : ''));\n                }\n                m = text ? text.match(/<a [^<]+<\\/a>|<br\\s?\\/?>|<b>[^<]+<\\/b>|<i>[^<]+<\\/i>/) : null;\n                if (!m) {\n                    text && result.push(react_1.default.createElement(\"span\", { key: `a${key++}` }, text));\n                }\n            } while (m);\n            return result;\n        }\n        return text;\n    }\n    /**\n     * Get the smart name of the given state.\n     */\n    static getSmartName(states, id, instanceId, noCommon) {\n        var _a, _b;\n        if (!id) {\n            if (!noCommon) {\n                if (!states.common) {\n                    // @ts-ignore\n                    return states.smartName;\n                }\n                if (states && !states.common) {\n                    // @ts-ignore\n                    return states.smartName;\n                }\n                // @ts-ignore\n                return states.common.smartName;\n            }\n            if (states && !states.common) {\n                // @ts-ignore\n                return states.smartName;\n            }\n            const obj = states;\n            return ((_a = obj === null || obj === void 0 ? void 0 : obj.common) === null || _a === void 0 ? void 0 : _a.custom) && obj.common.custom[instanceId] ?\n                obj.common.custom[instanceId].smartName : undefined;\n        }\n        if (!noCommon) {\n            // @ts-ignore\n            return states[id].common.smartName;\n        }\n        const obj = states[id];\n        return ((_b = obj === null || obj === void 0 ? void 0 : obj.common) === null || _b === void 0 ? void 0 : _b.custom) && obj.common.custom[instanceId] ?\n            obj.common.custom[instanceId].smartName || null : null;\n    }\n    /**\n     * Get the smart name from a state.\n     */\n    static getSmartNameFromObj(obj, instanceId, noCommon) {\n        var _a;\n        if (!noCommon) {\n            if (!obj.common) {\n                // @ts-ignore\n                return obj.smartName;\n            }\n            if (obj && !obj.common) {\n                // @ts-ignore\n                return obj.smartName;\n            }\n            // @ts-ignore\n            return obj.common.smartName;\n        }\n        if (obj && !obj.common) {\n            // @ts-ignore\n            return obj.smartName;\n        }\n        return ((_a = obj === null || obj === void 0 ? void 0 : obj.common) === null || _a === void 0 ? void 0 : _a.custom) && obj.common.custom[instanceId] ?\n            obj.common.custom[instanceId].smartName : undefined;\n    }\n    /**\n     * Enable smart name for a state.\n     */\n    static enableSmartName(obj, instanceId, noCommon) {\n        if (noCommon) {\n            obj.common.custom = obj.common.custom || {};\n            obj.common.custom[instanceId] = obj.common.custom[instanceId] || {};\n            obj.common.custom[instanceId].smartName = {};\n        }\n        else {\n            obj.common.smartName = {};\n        }\n    }\n    /**\n     * Completely remove smart name from a state.\n     */\n    static removeSmartName(obj, instanceId, noCommon) {\n        if (noCommon) {\n            if (obj.common && obj.common.custom && obj.common.custom[instanceId]) {\n                obj.common.custom[instanceId] = null;\n            }\n        }\n        else {\n            // @ts-ignore\n            obj.common.smartName = null;\n        }\n    }\n    /**\n     * Update the smartname of a state.\n     */\n    static updateSmartName(obj, newSmartName, byON, smartType, instanceId, noCommon) {\n        const language = i18n_1.default.getLanguage();\n        // convert the old format\n        if (typeof obj.common.smartName === 'string') {\n            const nnn = obj.common.smartName;\n            obj.common.smartName = {};\n            obj.common.smartName[language] = nnn;\n        }\n        // convert the old settings\n        if (obj.native && obj.native.byON) {\n            delete obj.native.byON;\n            let _smartName = obj.common.smartName;\n            if (!_smartName) {\n                _smartName = {};\n            }\n            else if (typeof _smartName !== 'object') {\n                _smartName = { en: _smartName };\n                _smartName[language] = _smartName.en;\n            }\n            obj.common.smartName = _smartName;\n        }\n        if (smartType !== undefined) {\n            if (noCommon) {\n                obj.common.custom = obj.common.custom || {};\n                obj.common.custom[instanceId] = obj.common.custom[instanceId] || {};\n                obj.common.custom[instanceId].smartName = obj.common.custom[instanceId].smartName || {};\n                if (!smartType) {\n                    delete obj.common.custom[instanceId].smartName.smartType;\n                }\n                else {\n                    obj.common.custom[instanceId].smartName.smartType = smartType;\n                }\n            }\n            else {\n                obj.common.smartName = obj.common.smartName || {};\n                if (!smartType) {\n                    delete obj.common.smartName.smartType;\n                }\n                else {\n                    obj.common.smartName.smartType = smartType;\n                }\n            }\n        }\n        if (byON !== undefined) {\n            if (noCommon) {\n                obj.common.custom = obj.common.custom || {};\n                obj.common.custom[instanceId] = obj.common.custom[instanceId] || {};\n                obj.common.custom[instanceId].smartName = obj.common.custom[instanceId].smartName || {};\n                obj.common.custom[instanceId].smartName.byON = byON;\n            }\n            else {\n                obj.common.smartName = obj.common.smartName || {};\n                // @ts-ignore\n                obj.common.smartName.byON = byON;\n            }\n        }\n        if (newSmartName !== undefined) {\n            let smartName;\n            if (noCommon) {\n                obj.common.custom = obj.common.custom || {};\n                obj.common.custom[instanceId] = obj.common.custom[instanceId] || {};\n                obj.common.custom[instanceId].smartName = obj.common.custom[instanceId].smartName || {};\n                smartName = obj.common.custom[instanceId].smartName;\n            }\n            else {\n                obj.common.smartName = obj.common.smartName || {};\n                smartName = obj.common.smartName;\n            }\n            smartName[language] = newSmartName;\n            // If smart name deleted\n            if (smartName && (!smartName[language] ||\n                (smartName[language] === obj.common.name &&\n                    (!obj.common.role || obj.common.role.includes('button'))))) {\n                delete smartName[language];\n                let empty = true;\n                // Check if the structure has any definitions\n                for (const key in smartName) {\n                    if (Object.prototype.hasOwnProperty.call(smartName, key)) {\n                        empty = false;\n                        break;\n                    }\n                }\n                // If empty => delete smartName completely\n                if (empty) {\n                    if (noCommon && obj.common.custom && obj.common.custom[instanceId]) {\n                        if (obj.common.custom[instanceId].smartName.byON === undefined) {\n                            delete obj.common.custom[instanceId];\n                        }\n                        else {\n                            delete obj.common.custom[instanceId].en;\n                            delete obj.common.custom[instanceId].de;\n                            delete obj.common.custom[instanceId].ru;\n                            delete obj.common.custom[instanceId].nl;\n                            delete obj.common.custom[instanceId].pl;\n                            delete obj.common.custom[instanceId].it;\n                            delete obj.common.custom[instanceId].fr;\n                            delete obj.common.custom[instanceId].pt;\n                            delete obj.common.custom[instanceId].es;\n                            delete obj.common.custom[instanceId].uk;\n                            delete obj.common.custom[instanceId]['zh-cn'];\n                        }\n                        // @ts-ignore\n                    }\n                    else if (obj.common.smartName && obj.common.smartName.byON !== undefined) {\n                        delete obj.common.smartName.en;\n                        delete obj.common.smartName.de;\n                        delete obj.common.smartName.ru;\n                        delete obj.common.smartName.nl;\n                        delete obj.common.smartName.pl;\n                        delete obj.common.smartName.it;\n                        delete obj.common.smartName.fr;\n                        delete obj.common.smartName.pt;\n                        delete obj.common.smartName.es;\n                        delete obj.common.smartName.uk;\n                        delete obj.common.smartName['zh-cn'];\n                    }\n                    else {\n                        // @ts-ignore\n                        obj.common.smartName = null;\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Disable the smart name of a state.\n     */\n    static disableSmartName(obj, instanceId, noCommon) {\n        if (noCommon) {\n            obj.common.custom = obj.common.custom || {};\n            obj.common.custom[instanceId] = obj.common.custom[instanceId] || {};\n            obj.common.custom[instanceId].smartName = false;\n        }\n        else {\n            // @ts-ignore\n            obj.common.smartName = false;\n        }\n    }\n    /**\n     * Copy text to the clipboard.\n     */\n    static copyToClipboard(text, e) {\n        if (e) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n        return (0, CopyToClipboard_1.default)(text);\n    }\n    /**\n     * Gets the extension of a file name.\n     * @param fileName the file name.\n     * @returns The extension in lower case.\n     */\n    static getFileExtension(fileName) {\n        const pos = (fileName || '').lastIndexOf('.');\n        if (pos !== -1) {\n            return fileName.substring(pos + 1).toLowerCase();\n        }\n        return null;\n    }\n    /**\n     * Format number of bytes as a string with B, KB, MB or GB.\n     * The base for all calculations is 1024.\n     * @param bytes The number of bytes.\n     * @returns The formatted string (e.g. '723.5 KB')\n     */\n    static formatBytes(bytes) {\n        if (Math.abs(bytes) < 1024) {\n            return `${bytes} B`;\n        }\n        const units = ['KB', 'MB', 'GB'];\n        // const units = ['KiB','MiB','GiB','TiB','PiB','EiB','ZiB','YiB'];\n        let u = -1;\n        do {\n            bytes /= 1024;\n            ++u;\n        } while (Math.abs(bytes) >= 1024 && u < units.length - 1);\n        return `${bytes.toFixed(1)} ${units[u]}`;\n    }\n    /**\n     * Invert the given color according to a theme type to get the inverted text color for background\n     * @param color Color in the format '#rrggbb' or '#rgb' (or without a hash)\n     * @param themeType theme type\n     * @param invert dark theme has light color in control or light theme has light color in control\n     */\n    static getInvertedColor(color, themeType, invert) {\n        if (!color) {\n            return undefined;\n        }\n        const invertedColor = Utils.invertColor(color, true);\n        if (invertedColor === '#FFFFFF' && (themeType === 'dark' || (invert && themeType === 'light'))) {\n            return '#DDD';\n        }\n        if (invertedColor === '#000000' && (themeType === 'light' || (invert && themeType === 'dark'))) {\n            return '#222';\n        }\n        return undefined;\n    }\n    // Big thanks to: https://stackoverflow.com/questions/35969656/how-can-i-generate-the-opposite-color-according-to-current-color\n    /**\n     * Invert the given color\n     * @param hex Color in the format '#rrggbb' or '#rgb' (or without hash)\n     * @param bw Set to black or white.\n     */\n    static invertColor(hex, bw) {\n        if (hex === undefined || hex === null || hex === '' || typeof hex !== 'string') {\n            return '';\n        }\n        if (hex.startsWith('rgba')) {\n            const m = hex.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*([.\\d]+)\\)/);\n            if (m) {\n                hex = parseInt(m[1], 10).toString(16).padStart(2, '0') +\n                    parseInt(m[2], 10).toString(16).padStart(2, '0') +\n                    parseInt(m[2], 10).toString(16).padStart(2, '0');\n            }\n        }\n        else if (hex.startsWith('rgb')) {\n            const m = hex.match(/rgb?\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/);\n            if (m) {\n                hex = parseInt(m[1], 10).toString(16).padStart(2, '0') +\n                    parseInt(m[2], 10).toString(16).padStart(2, '0') +\n                    parseInt(m[2], 10).toString(16).padStart(2, '0');\n            }\n        }\n        else if (hex.startsWith('#')) {\n            hex = hex.slice(1);\n        }\n        // convert 3-digit hex to 6-digits.\n        if (hex.length === 3) {\n            hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n        }\n        let alfa = null;\n        if (hex.length === 8) {\n            alfa = hex.substring(6, 8);\n            hex = hex.substring(0, 6);\n        }\n        else if (hex.length !== 6) {\n            console.warn(`Cannot invert color: ${hex}`);\n            return hex;\n        }\n        const r = parseInt(hex.slice(0, 2), 16);\n        const g = parseInt(hex.slice(2, 4), 16);\n        const b = parseInt(hex.slice(4, 6), 16);\n        if (bw) {\n            // http://stackoverflow.com/a/3943023/112731\n            return (r * 0.299 + g * 0.587 + b * 0.114) > 186\n                ? `#000000${alfa || ''}`\n                : `#FFFFFF${alfa || ''}`;\n        }\n        // invert color components\n        const rs = (255 - r).toString(16);\n        const gs = (255 - g).toString(16);\n        const bd = (255 - b).toString(16);\n        // pad each with zeros and return\n        return `#${rs.padStart(2, '0')}${gs.padStart(2, '0')}${bd.padStart(2, '0')}${alfa || ''}`;\n    }\n    /**\n     * Convert RGB to array [r, g, b]\n     * @param hex Color in the format '#rrggbb' or '#rgb' (or without hash) or rgb(r,g,b) or rgba(r,g,b,a)\n     * @returns Array with 3 elements [r, g, b]\n     */\n    static color2rgb(hex) {\n        if (hex === undefined || hex === null || hex === '' || typeof hex !== 'string') {\n            return '';\n        }\n        if (hex.startsWith('rgba')) {\n            const m = hex.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*([.\\d]+)\\)/);\n            if (m) {\n                hex = parseInt(m[1], 10).toString(16).padStart(2, '0') +\n                    parseInt(m[2], 10).toString(16).padStart(2, '0') +\n                    parseInt(m[2], 10).toString(16).padStart(2, '0');\n            }\n        }\n        else if (hex.startsWith('rgb')) {\n            const m = hex.match(/rgb?\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/);\n            if (m) {\n                hex = parseInt(m[1], 10).toString(16).padStart(2, '0') +\n                    parseInt(m[2], 10).toString(16).padStart(2, '0') +\n                    parseInt(m[2], 10).toString(16).padStart(2, '0');\n            }\n        }\n        else if (hex.startsWith('#')) {\n            hex = hex.slice(1);\n        }\n        // convert 3-digit hex to 6-digits.\n        if (hex.length === 3) {\n            hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n        }\n        if (hex.length !== 6 && hex.length !== 8) {\n            console.warn(`Cannot invert color: ${hex}`);\n            return false;\n        }\n        return [\n            parseInt(hex.slice(0, 2), 16),\n            parseInt(hex.slice(2, 4), 16),\n            parseInt(hex.slice(4, 6), 16),\n        ];\n    }\n    // Big thanks to: https://github.com/antimatter15/rgb-lab\n    /**\n     * Convert RGB to LAB\n     * @param {Array<number>} rgb color in format [r,g,b]\n     * @returns {Array<number>} lab color in format [l,a,b]\n     */\n    static rgb2lab(rgb) {\n        let r = rgb[0] / 255;\n        let g = rgb[1] / 255;\n        let b = rgb[2] / 255;\n        r = (r > 0.04045) ? ((r + 0.055) / 1.055) ** 2.4 : r / 12.92;\n        g = (g > 0.04045) ? ((g + 0.055) / 1.055) ** 2.4 : g / 12.92;\n        b = (b > 0.04045) ? ((b + 0.055) / 1.055) ** 2.4 : b / 12.92;\n        let x = (r * 0.4124 + g * 0.3576 + b * 0.1805) / 0.95047;\n        let y = (r * 0.2126 + g * 0.7152 + b * 0.0722); /*  / 1.00000; */\n        let z = (r * 0.0193 + g * 0.1192 + b * 0.9505) / 1.08883;\n        x = (x > 0.008856) ? x ** 0.33333333 : (7.787 * x) + 0.137931; // 16 / 116;\n        y = (y > 0.008856) ? y ** 0.33333333 : (7.787 * y) + 0.137931; // 16 / 116;\n        z = (z > 0.008856) ? z ** 0.33333333 : (7.787 * z) + 0.137931; // 16 / 116;\n        return [(116 * y) - 16, 500 * (x - y), 200 * (y - z)];\n    }\n    /**\n     * Calculate the distance between two colors in LAB color space in the range 0-100^2\n     * If distance is less than 1000, the colors are similar\n     * @param color1 Color in the format '#rrggbb' or '#rgb' (or without hash) or rgb(r,g,b) or rgba(r,g,b,a)\n     * @param color2 Color in the format '#rrggbb' or '#rgb' (or without hash) or rgb(r,g,b) or rgba(r,g,b,a)\n     * @returns distance in the range 0-100^2\n     */\n    static colorDistance(color1, color2) {\n        const rgb1 = Utils.color2rgb(color1);\n        const rgb2 = Utils.color2rgb(color2);\n        if (!rgb1 || !rgb2) {\n            return 0;\n        }\n        const lab1 = Utils.rgb2lab(rgb1);\n        const lab2 = Utils.rgb2lab(rgb2);\n        const dltL = lab1[0] - lab2[0];\n        const dltA = lab1[1] - lab2[1];\n        const dltB = lab1[2] - lab2[2];\n        const c1 = Math.sqrt(lab1[1] * lab1[1] + lab1[2] * lab1[2]);\n        const c2 = Math.sqrt(lab2[1] * lab2[1] + lab2[2] * lab2[2]);\n        const dltC = c1 - c2;\n        let dltH = dltA * dltA + dltB * dltB - dltC * dltC;\n        dltH = dltH < 0 ? 0 : Math.sqrt(dltH);\n        const sc = 1.0 + 0.045 * c1;\n        const sh = 1.0 + 0.015 * c1;\n        const dltLKlsl = dltL;\n        const dltCkcsc = dltC / sc;\n        const dltHkhsh = dltH / sh;\n        const i = dltLKlsl * dltLKlsl + dltCkcsc * dltCkcsc + dltHkhsh * dltHkhsh;\n        return i < 0 ? 0 : i;\n    }\n    // https://github.com/lukeed/clsx/blob/master/src/index.js\n    // License\n    // MIT  Luke Edwards\n    /**\n     * @private\n     */\n    static _toVal(mix) {\n        let y;\n        let str = '';\n        if (typeof mix === 'string' || typeof mix === 'number') {\n            str += mix;\n        }\n        else if (typeof mix === 'object') {\n            if (Array.isArray(mix)) {\n                for (let k = 0; k < mix.length; k++) {\n                    if (mix[k]) {\n                        y = Utils._toVal(mix[k]);\n                        if (y) {\n                            str && (str += ' ');\n                            str += y;\n                        }\n                    }\n                }\n            }\n            else {\n                for (const k in mix) {\n                    if (mix[k]) {\n                        str && (str += ' ');\n                        str += k;\n                    }\n                }\n            }\n        }\n        return str;\n    }\n    // https://github.com/lukeed/clsx/blob/master/src/index.js\n    // License\n    // MIT  Luke Edwards\n    /**\n     * Convert any object to a string with its values.\n     * @returns {string}\n     */\n    static clsx(...inputs) {\n        let i = 0;\n        let tmp;\n        let x;\n        let str = '';\n        while (i < inputs.length) {\n            // eslint-disable-next-line prefer-rest-params\n            tmp = inputs[i++];\n            if (tmp) {\n                x = Utils._toVal(tmp);\n                if (x) {\n                    str && (str += ' ');\n                    str += x;\n                }\n            }\n        }\n        return str;\n    }\n    /**\n     * Get the current theme name (either from local storage or the browser settings).\n     */\n    static getThemeName(themeName) {\n        if (window.vendorPrefix && window.vendorPrefix !== '@@vendorPrefix@@' && window.vendorPrefix !== 'MV') {\n            return window.vendorPrefix;\n        }\n        return themeName || ((window._localStorage || window.localStorage).getItem('App.themeName') ?\n            (window._localStorage || window.localStorage).getItem('App.themeName') : window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'colored');\n    }\n    /**\n     * Get the type of theme.\n     */\n    static getThemeType(themeName) {\n        if (window.vendorPrefix && window.vendorPrefix !== '@@vendorPrefix@@') {\n            return 'light';\n        }\n        themeName = themeName || (window._localStorage || window.localStorage).getItem('App.themeName');\n        return themeName === 'dark' || themeName === 'blue' ? 'dark' : 'light';\n    }\n    /**\n     * Set the theme name and theme type.\n     */\n    static setThemeName(themeName) {\n        if (window.vendorPrefix && window.vendorPrefix !== '@@vendorPrefix@@' && window.vendorPrefix !== 'MV') {\n            return; // ignore\n        }\n        (window._localStorage || window.localStorage).setItem('App.themeName', themeName);\n        (window._localStorage || window.localStorage).setItem('App.theme', themeName === 'dark' || themeName === 'blue' ? 'dark' : 'light');\n    }\n    /**\n     * Toggle the theme name between 'dark' and 'colored'.\n     * @returns the new theme name.\n     */\n    static toggleTheme(themeName) {\n        if (window.vendorPrefix && window.vendorPrefix !== '@@vendorPrefix@@' && window.vendorPrefix !== 'MV') {\n            return window.vendorPrefix;\n        }\n        themeName = themeName || (window._localStorage || window.localStorage).getItem('App.themeName') || 'light';\n        // dark => blue => colored => light => dark\n        const themes = Utils.getThemeNames();\n        const pos = themeName ? themes.indexOf(themeName) : -1;\n        let newTheme;\n        if (pos !== -1) {\n            newTheme = themes[(pos + 1) % themes.length];\n        }\n        else {\n            newTheme = themes[0];\n        }\n        Utils.setThemeName(newTheme);\n        return newTheme;\n    }\n    /**\n     * Get the list of themes\n     * @returns list of possible themes\n     */\n    static getThemeNames() {\n        if (window.vendorPrefix && window.vendorPrefix !== '@@vendorPrefix@@' && window.vendorPrefix !== 'MV') {\n            return [window.vendorPrefix];\n        }\n        return ['light', 'dark', 'blue', 'colored'];\n    }\n    /**\n     * Parse a query string into its parts.\n     */\n    static parseQuery(query) {\n        query = (query || '').toString().replace(/^\\?/, '');\n        /** @type {Record<string, string | boolean | number>} */\n        const result = {};\n        query.split('&').forEach(part => {\n            part = part.trim();\n            if (part) {\n                const parts = part.split('=');\n                const attr = decodeURIComponent(parts[0]).trim();\n                if (parts.length > 1) {\n                    result[attr] = decodeURIComponent(parts[1]);\n                    if (result[attr] === 'true') {\n                        result[attr] = true;\n                    }\n                    else if (result[attr] === 'false') {\n                        result[attr] = false;\n                    }\n                    else if (result[attr]) {\n                        const f = parseFloat(result[attr].toString());\n                        if (f.toString() === result[attr]) {\n                            result[attr] = f;\n                        }\n                    }\n                }\n                else {\n                    result[attr] = true;\n                }\n            }\n        });\n        return result;\n    }\n    /**\n     * Returns parent ID.\n     * @returns parent ID or null if no parent\n     */\n    static getParentId(id) {\n        const p = (id || '').toString().split('.');\n        if (p.length > 1) {\n            p.pop();\n            return p.join('.');\n        }\n        return null;\n    }\n    static formatDate(dateObj, dateFormat) {\n        // format could be DD.MM.YYYY, YYYY.MM.DD or MM/DD/YYYY\n        if (!dateObj) {\n            return '';\n        }\n        let text;\n        const mm = dateObj.getMonth() + 1;\n        const dd = dateObj.getDate();\n        if (dateFormat === 'MM/DD/YYYY') {\n            text = `${mm < 10 ? `0${mm}` : mm}/${dd < 10 ? `0${dd}` : dd}/${dateObj.getFullYear()}`;\n        }\n        else {\n            text = `${dateObj.getFullYear()}-${mm}-${dd}`;\n        }\n        // time\n        let v = dateObj.getHours();\n        if (v < 10) {\n            text += ` 0${v}`;\n        }\n        else {\n            text += ` ${v}`;\n        }\n        v = dateObj.getMinutes();\n        if (v < 10) {\n            text += `:0${v}`;\n        }\n        else {\n            text += `:${v}`;\n        }\n        v = dateObj.getSeconds();\n        if (v < 10) {\n            text += `:0${v}`;\n        }\n        else {\n            text += `:${v}`;\n        }\n        v = dateObj.getMilliseconds();\n        if (v < 10) {\n            text += `.00${v}`;\n        }\n        else if (v < 100) {\n            text += `.0${v}`;\n        }\n        else {\n            text += `.${v}`;\n        }\n        return text;\n    }\n    /*\n       Format seconds to string like 'h:mm:ss' or 'd.hh:mm:ss'\n    */\n    static formatTime(seconds) {\n        if (seconds) {\n            seconds = Math.round(seconds);\n            const d = Math.floor(seconds / (3600 * 24));\n            const h = Math.floor((seconds % (3600 * 24)) / 3600);\n            const m = Math.floor((seconds % 3600) / 60);\n            const s = seconds % 60;\n            if (d) {\n                return `${d}.${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;\n            }\n            if (h) {\n                return `${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;\n            }\n            return `0:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;\n        }\n        return '0:00:00';\n    }\n    static MDtext2link(text) {\n        const m = text.match(/\\d+\\.\\)\\s/);\n        if (m) {\n            text = text.replace(m[0], m[0].replace(/\\s/, '&nbsp;'));\n        }\n        return text.replace(/[^a-zA-Z--0-9]/g, '').trim().replace(/\\s/g, '').toLowerCase();\n    }\n    /*\n      Open url link in the new target window\n     */\n    static openLink(url, target) {\n        // replace IPv6 Address with [ipv6]:port\n        url = url.replace(/\\/\\/([0-9a-f]*:[0-9a-f]*:[0-9a-f]*:[0-9a-f]*:[0-9a-f]*:[0-9a-f]*)(:\\d+)?\\//i, '//[$1]$2/');\n        if (target === 'this') {\n            window.location.href = url;\n        }\n        else {\n            window.open(url, target || '_blank');\n        }\n    }\n    static MDgetTitle(text) {\n        const result = Utils.MDextractHeader(text);\n        const header = result.header;\n        let body = result.body;\n        if (!header.title) {\n            // remove {docsify-bla}\n            body = body.replace(/{[^}]*}/g, '');\n            body = body.trim();\n            const lines = body.replace(/\\r/g, '').split('\\n');\n            for (let i = 0; i < lines.length; i++) {\n                if (lines[i].startsWith('# ')) {\n                    return lines[i].substring(2).trim();\n                }\n            }\n            return '';\n        }\n        return header.title ? header.title.toString() : '';\n    }\n    static MDextractHeader(text) {\n        const attrs = {};\n        if (text.substring(0, 3) === '---') {\n            const pos = text.substring(3).indexOf('\\n---');\n            if (pos !== -1) {\n                const _header = text.substring(3, pos + 3);\n                const lines = _header.replace(/\\r/g, '').split('\\n');\n                lines.forEach(line => {\n                    if (!line.trim()) {\n                        return;\n                    }\n                    const pos_ = line.indexOf(':');\n                    if (pos_ !== -1) {\n                        const attr = line.substring(0, pos_).trim();\n                        let val = line.substring(pos_ + 1).trim();\n                        val = val.replace(/^['\"]|['\"]$/g, '');\n                        if (val === 'true') {\n                            attrs[attr] = true;\n                        }\n                        else if (val === 'false') {\n                            attrs[attr] = false;\n                        }\n                        else if (parseFloat(val).toString() === val) {\n                            attrs[attr] = parseFloat(val);\n                        }\n                        else {\n                            attrs[attr] = val;\n                        }\n                    }\n                    else {\n                        attrs[line.trim()] = true;\n                    }\n                });\n                text = text.substring(pos + 7);\n            }\n        }\n        return { header: attrs, body: text };\n    }\n    static MDremoveDocsify(text) {\n        const m = text.match(/{docsify-[^}]*}/g);\n        if (m) {\n            m.forEach(doc => text = text.replace(doc, ''));\n        }\n        return text;\n    }\n    /**\n     * Generate the json file on the file for download.\n     * @param fileName file name\n     * @param json file data\n     * @returns {object} json structure (not stringified)\n     */\n    static generateFile(fileName, json) {\n        const el = document.createElement('a');\n        el.setAttribute('href', `data:application/json;charset=utf-8,${encodeURIComponent(JSON.stringify(json, null, 2))}`);\n        el.setAttribute('download', fileName);\n        el.style.display = 'none';\n        document.body.appendChild(el);\n        el.click();\n        document.body.removeChild(el);\n    }\n    /**\n     * Convert quality code into text\n     * @param {number} quality code\n     * @returns {array<string>} lines that decode quality\n     */\n    static quality2text(quality) {\n        // eslint-disable-next-line no-bitwise\n        const custom = quality & 0xFFFF0000;\n        // @ts-ignore\n        const text = QUALITY_BITS[quality];\n        let result;\n        if (text) {\n            result = [text];\n            // eslint-disable-next-line no-bitwise\n        }\n        else if (quality & 0x01) {\n            // eslint-disable-next-line no-bitwise\n            result = [QUALITY_BITS[0x01], `0x${(quality & (0xFFFF & ~1)).toString(16)}`];\n            // eslint-disable-next-line no-bitwise\n        }\n        else if (quality & 0x02) {\n            // eslint-disable-next-line no-bitwise\n            result = [QUALITY_BITS[0x02], `0x${(quality & (0xFFFF & ~2)).toString(16)}`];\n        }\n        else {\n            result = [`0x${quality.toString(16)}`];\n        }\n        if (custom) {\n            // eslint-disable-next-line no-bitwise\n            result.push(`0x${(custom >> 16).toString(16).toUpperCase()}`);\n        }\n        return result;\n    }\n    /**\n     * Deep copy object\n     */\n    static clone(object) {\n        return JSON.parse(JSON.stringify(object));\n    }\n    /**\n     * Get states of object\n     * @returns states as an object in form {\"value1\": \"label1\", \"value2\": \"label2\"} or null\n     */\n    static getStates(obj) {\n        var _a;\n        let states = (_a = obj === null || obj === void 0 ? void 0 : obj.common) === null || _a === void 0 ? void 0 : _a.states;\n        if (states) {\n            if (typeof states === 'string' && states[0] === '{') {\n                try {\n                    states = JSON.parse(states);\n                }\n                catch (ex) {\n                    console.error(`Cannot parse states: ${states}`);\n                    states = null;\n                }\n            }\n            else if (typeof states === 'string') {\n                // if old format val1:text1;val2:text2\n                const parts = states.split(';');\n                states = {};\n                for (let p = 0; p < parts.length; p++) {\n                    const s = parts[p].split(':');\n                    states[s[0]] = s[1];\n                }\n            }\n            else if (Array.isArray(states)) {\n                const result = {};\n                if ((obj === null || obj === void 0 ? void 0 : obj.common.type) === 'number') {\n                    states.forEach((value, key) => result[key] = value);\n                }\n                else if ((obj === null || obj === void 0 ? void 0 : obj.common.type) === 'string') {\n                    states.forEach(value => result[value] = value);\n                }\n                else if ((obj === null || obj === void 0 ? void 0 : obj.common.type) === 'boolean') {\n                    result.false = states[0];\n                    result.true = states[1];\n                }\n                return result;\n            }\n        }\n        return states ? states : null;\n    }\n    /**\n     * Get svg file as text\n     * @param url URL of SVG file\n     * @returns Promise with \"data:image...\"\n     */\n    static async getSvg(url) {\n        const response = await fetch(url);\n        const blob = await response.blob();\n        return await new Promise(resolve => {\n            const reader = new FileReader();\n            // eslint-disable-next-line func-names\n            reader.onload = function () {\n                var _a;\n                resolve(((_a = this.result) === null || _a === void 0 ? void 0 : _a.toString()) || '');\n            };\n            reader.readAsDataURL(blob);\n        });\n    }\n    /**\n     * Detect file extension by its content\n     * @param {string} base64 Base64 encoded binary file\n     * @returns {string} Detected extension, like 'jpg'\n     */\n    static detectMimeType(base64) {\n        const signature = Object.keys(SIGNATURES).find(s => base64.startsWith(s));\n        // @ts-ignore\n        return signature ? SIGNATURES[signature] : null;\n    }\n    /**\n     * Check if configured repository is the stable repository\n     *\n     * @param activeRepo current configured repository or multi repository\n     */\n    static isStableRepository(activeRepo) {\n        return !!((typeof activeRepo === 'string' &&\n            activeRepo.toLowerCase().startsWith('stable'))\n            ||\n                (activeRepo &&\n                    typeof activeRepo !== 'string' &&\n                    activeRepo.find(r => r.toLowerCase().startsWith('stable'))));\n    }\n    /**\n     * Check if a given string is an integer\n     *\n     * @param str string to check\n     */\n    static isStringInteger(str) {\n        return parseInt(str).toString() === str;\n    }\n    /**\n     * Check if the date is valid\n     *\n     * @param {Date} date\n     * @return {boolean}\n     */\n    static isValidDate(date) {\n        return date instanceof Date && !isNaN(date.getTime());\n    }\n}\nUtils.namespace = NAMESPACE;\nUtils.INSTANCES = 'instances';\nUtils.dateFormat = ['DD', 'MM'];\nUtils.FORBIDDEN_CHARS = /[^._\\-/ :!#$%&()+=@^{}|~\\p{Ll}\\p{Lu}\\p{Nd}]+/gu;\nexports.default = Utils;\n","\"use strict\";\n/**\n * Copyright 2019-2023 Denis Haev (bluefox) <dogafox@gmail.com>\n *\n * MIT License\n *\n **/\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// please do not delete React, as without it other projects could not be compiled: ReferenceError: React is not defined\nconst react_1 = __importStar(require(\"react\"));\nconst styles_1 = require(\"@mui/styles\");\nconst material_1 = require(\"@mui/material\");\nconst icons_material_1 = require(\"@mui/icons-material\");\nconst i18n_1 = __importDefault(require(\"../i18n\"));\nconst styles = {\n    suppress: {\n        fontSize: 12,\n    },\n    suppressRoot: {\n        marginTop: 16,\n    },\n};\n/**\n * @property title The dialog title; default: Are you sure? (translated)\n * @property text The dialog text.\n * @property ok The ok button text; default: OK (translated)\n * @property cancel The cancel button text; default: Cancel (translated)\n * @property suppressQuestionMinutes interval in minutes for which the confirmation dialog will be suppressed if activated.\n * @property suppressText The suppress checkbox text; default: Suppress question for next %s minutes (translated)\n * @property dialogName Name of the dialog. Used only with suppressQuestionMinutes to store the user choice\n * @property onClose Close handler.\n */\nclass DialogConfirm extends react_1.Component {\n    constructor(props) {\n        super(props);\n        if (!this.props.dialogName && this.props.suppressQuestionMinutes) {\n            throw new Error('dialogName required if suppressQuestionMinutes used');\n        }\n        let suppress = false;\n        if (this.props.suppressQuestionMinutes) {\n            suppress = parseInt((window._localStorage || window.localStorage).getItem(this.props.dialogName), 10) || 0;\n            if (!suppress) {\n                suppress = false;\n            }\n            else if (Date.now() > suppress) {\n                (window._localStorage || window.localStorage).removeItem(this.props.dialogName);\n                suppress = false;\n            }\n        }\n        this.state = {\n            suppress,\n        };\n    }\n    handleOk() {\n        if (this.state.suppress) {\n            (window._localStorage || window.localStorage).setItem(this.props.dialogName, Date.now() + (this.props.suppressQuestionMinutes || 2) * 60000);\n        }\n        this.props.onClose && this.props.onClose(true);\n    }\n    handleCancel() {\n        this.props.onClose && this.props.onClose(false);\n    }\n    render() {\n        if (typeof this.state.suppress === 'number') {\n            setTimeout(() => this.props.onClose && this.props.onClose(true), 100);\n            return null;\n        }\n        return react_1.default.createElement(material_1.Dialog, { open: !0, maxWidth: \"md\", fullWidth: this.props.fullWidth !== undefined ? this.props.fullWidth : true, onClose: (event, reason) => {\n                if (reason !== 'backdropClick' && reason !== 'escapeKeyDown') {\n                    this.handleCancel();\n                }\n            }, \"aria-labelledby\": \"ar_confirmation_dialog_title\", \"aria-describedby\": \"ar_confirmation_dialog_description\" },\n            react_1.default.createElement(material_1.DialogTitle, { id: \"ar_confirmation_dialog_title\" }, this.props.title || i18n_1.default.t('ra_Are you sure?')),\n            react_1.default.createElement(material_1.DialogContent, null,\n                react_1.default.createElement(material_1.DialogContentText, { id: \"ar_confirmation_dialog_description\" },\n                    this.props.icon || null,\n                    this.props.text,\n                    this.props.suppressQuestionMinutes ? react_1.default.createElement(\"br\", null) : null,\n                    this.props.suppressQuestionMinutes ? react_1.default.createElement(material_1.FormControlLabel, { classes: { label: this.props.classes.suppress, root: this.props.classes.suppressRoot }, control: react_1.default.createElement(material_1.Checkbox, { id: `ar_dialog_confirm_suppress_${this.props.dialogName || ''}`, checked: !!this.state.suppress, onChange: () => this.setState({ suppress: !this.state.suppress }) }), label: this.props.suppressText || i18n_1.default.t('ra_Suppress question for next %s minutes', (this.props.suppressQuestionMinutes || 2).toString()) }) : null)),\n            react_1.default.createElement(material_1.DialogActions, null,\n                react_1.default.createElement(material_1.Button, { id: `ar_dialog_confirm_ok_${this.props.dialogName || ''}`, variant: \"contained\", onClick: () => this.handleOk(), color: \"primary\", autoFocus: true, startIcon: react_1.default.createElement(icons_material_1.Check, null) }, this.props.ok || i18n_1.default.t('ra_Ok')),\n                react_1.default.createElement(material_1.Button, { id: `ar_dialog_confirm_cancel_${this.props.dialogName || ''}`, variant: \"contained\", onClick: () => this.handleCancel(), \n                    // @ts-expect-error\n                    color: \"grey\", startIcon: react_1.default.createElement(icons_material_1.Close, null) }, this.props.cancel || i18n_1.default.t('ra_Cancel'))));\n    }\n}\nconst _export = (0, styles_1.withStyles)(styles)(DialogConfirm);\nexports.default = _export;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Copyright 2018-2023 Denis Haev (bluefox) <dogafox@gmail.com>\n *\n * MIT License\n *\n **/\n// please do not delete React, as without it other projects could not be compiled: ReferenceError: React is not defined\nconst react_1 = __importStar(require(\"react\"));\nconst material_1 = require(\"@mui/material\");\nconst icons_material_1 = require(\"@mui/icons-material\");\nconst i18n_1 = __importDefault(require(\"../i18n\"));\n/**\n * @property title The dialog title; default: Error (translated)\n * @property text The dialog text.\n * @property onClose Close handler.\n * @property classes The styling class names.\n */\nclass DialogError extends react_1.Component {\n    handleOk() {\n        this.props.onClose && this.props.onClose();\n    }\n    render() {\n        return react_1.default.createElement(material_1.Dialog, { open: !0, maxWidth: \"sm\", fullWidth: this.props.fullWidth !== undefined ? this.props.fullWidth : true, onClose: () => this.handleOk(), \"aria-labelledby\": \"alert-dialog-title\", \"aria-describedby\": \"alert-dialog-description\" },\n            react_1.default.createElement(material_1.DialogTitle, { id: \"ar_alert_dialog_title\" }, this.props.title || i18n_1.default.t('ra_Error')),\n            react_1.default.createElement(material_1.DialogContent, null,\n                react_1.default.createElement(material_1.DialogContentText, { id: \"ar_alert_dialog_description\" }, this.props.text || i18n_1.default.t('ra_Unknown error!'))),\n            react_1.default.createElement(material_1.DialogActions, null,\n                react_1.default.createElement(material_1.Button, { id: \"ar_dialog_error_ok\", variant: \"contained\", onClick: () => this.handleOk(), color: \"primary\", autoFocus: true, startIcon: react_1.default.createElement(icons_material_1.Check, null) }, i18n_1.default.t('ra_Ok'))));\n    }\n}\nexports.default = DialogError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Print the ioBroker welcome screen to the developer console.\n */\nfunction printPrompt() {\n    const prompt = `\n         \n \n         \n         \n      \n           \n`;\n    console.log(prompt);\n    console.log('Nice to see you here! :) Join our dev community here https://github.com/ioBroker/ioBroker or here https://github.com/iobroker-community-adapters');\n    console.log('Help us to create open source project with reactJS!');\n    console.log('See you :)');\n}\nexports.default = printPrompt;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst styles_1 = require(\"@mui/material/styles\");\nconst colors_1 = require(\"@mui/material/colors\");\nconst step = (16 - 5) / 23 / 100;\n/**\n * Convert hex color in the format '#rrggbb' or '#rgb' to an RGB object.\n */\nfunction toInt(hex) {\n    const rgb = {\n        r: 0,\n        g: 0,\n        b: 0,\n    };\n    if (hex.length === 7) {\n        rgb.r = parseInt(hex.substr(1, 2), 16);\n        rgb.g = parseInt(hex.substr(3, 2), 16);\n        rgb.b = parseInt(hex.substr(5, 2), 16);\n    }\n    else if (hex.length === 4) {\n        const r = hex.substr(1, 1);\n        const g = hex.substr(2, 1);\n        const b = hex.substr(3, 1);\n        rgb.r = parseInt(r + r, 16);\n        rgb.g = parseInt(g + g, 16);\n        rgb.b = parseInt(b + b, 16);\n    }\n    return rgb;\n}\n/**\n * Convert an RGB object to a hex color string in the format '#rrggbb'.\n */\nfunction toHex(int) {\n    return `#${Math.round(int.r).toString(16)}${Math.round(int.g).toString(16)}${Math.round(int.b).toString(16)}`;\n}\n/** Returns the hex color string in the format '#rrggbb' */\nfunction getElevation(\n/** color in the format '#rrggbb' or '#rgb' */\ncolor, \n/** overlay color in the format '#rrggbb' or '#rgb' */\noverlayColor, \n/** elevation as an integer starting with 1 */\nelevation) {\n    const rgb = toInt(color);\n    const overlay = toInt(overlayColor);\n    rgb.r += overlay.r * (0.05 + step * (elevation - 1));\n    rgb.g += overlay.g * (0.05 + step * (elevation - 1));\n    rgb.b += overlay.b * (0.05 + step * (elevation - 1));\n    return toHex(rgb);\n}\n/**\n * Get all 24 elevations of the given color and overlay.\n */\nfunction getElevations(\n/** color in the format '#rrggbb' or '#rgb' */\ncolor, \n/** overlay color in the format '#rrggbb' or '#rgb' */\noverlay) {\n    const elevations = {};\n    for (let i = 1; i <= 24; i++) {\n        elevations[`elevation${i}`] = {\n            backgroundColor: getElevation(color, overlay, i),\n        };\n    }\n    return elevations;\n}\n// const buttonsPalette = () => ({\n//     palette: {\n//         // mode: \"dark\",\n//         grey: {\n//             main: grey[300],\n//             dark: grey[400],\n//         },\n//     },\n// });\n// const buttonsTheme = theme => ({\n//     components: {\n//         MuiButton: {\n//             variants: [\n//                 {\n//                     props: { variant: 'contained', color: 'grey' },\n//                     style: {\n//                         color: theme.palette.getContrastText(theme.palette.grey[300]),\n//                     },\n//                 },\n//                 {\n//                     props: { variant: 'outlined', color: 'grey' },\n//                     style: {\n//                         color: theme.palette.text.primary,\n//                         borderColor:\n//                             theme.palette.mode === 'light'\n//                                 ? 'rgba(0, 0, 0, 0.23)'\n//                                 : 'rgba(255, 255, 255, 0.23)',\n//                         '&.Mui-disabled': {\n//                             border: `1px solid ${theme.palette.action.disabledBackground}`,\n//                         },\n//                         '&:hover': {\n//                             borderColor:\n//                                 theme.palette.mode === 'light'\n//                                     ? 'rgba(0, 0, 0, 0.23)'\n//                                     : 'rgba(255, 255, 255, 0.23)',\n//                             backgroundColor: alpha(\n//                                 theme.palette.text.primary,\n//                                 theme.palette.action.hoverOpacity,\n//                             ),\n//                         },\n//                     },\n//                 },\n//                 {\n//                     props: { color: 'grey', variant: 'text' },\n//                     style: {\n//                         color: 'black',\n//                         '&:hover': {\n//                             backgroundColor: alpha(\n//                                 theme.palette.text.primary,\n//                                 theme.palette.action.hoverOpacity,\n//                             ),\n//                         },\n//                     },\n//                 },\n//             ],\n//         },\n//     },\n// });\n/**\n * The theme creation factory function.\n */\nconst CustomTheme = (type) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n    let options;\n    if (type === 'dark') {\n        options = {\n            name: type,\n            palette: {\n                mode: 'dark',\n                background: {\n                    paper: '#121212',\n                    default: '#121212',\n                },\n                primary: {\n                    main: '#4dabf5',\n                },\n                secondary: {\n                    main: '#436a93',\n                },\n                // @ts-expect-error Custom field\n                expert: '#14bb00',\n                text: {\n                    primary: '#ffffff',\n                    secondary: '#ffffff',\n                },\n            },\n            overrides: {\n                MuiAppBar: {\n                    colorDefault: {\n                        backgroundColor: '#272727',\n                    },\n                },\n                MuiLink: {\n                    root: {\n                        textTransform: 'uppercase',\n                        transition: 'color .3s ease',\n                        color: colors_1.orange[200],\n                        '&:hover': {\n                            color: colors_1.orange[100],\n                        },\n                    },\n                },\n                MuiPaper: getElevations('#121212', '#fff'),\n            },\n        };\n    }\n    else if (type === 'blue') {\n        options = {\n            name: type,\n            palette: {\n                mode: 'dark',\n                background: {\n                    paper: '#151d21',\n                    default: '#151d21',\n                },\n                primary: {\n                    main: '#4dabf5',\n                },\n                secondary: {\n                    main: '#436a93',\n                },\n                // @ts-expect-error Custom field\n                expert: '#14bb00',\n                text: {\n                    primary: '#ffffff',\n                    secondary: '#ffffff',\n                },\n            },\n            overrides: {\n                MuiAppBar: {\n                    colorDefault: {\n                        backgroundColor: '#2a3135',\n                    },\n                },\n                MuiLink: {\n                    root: {\n                        textTransform: 'uppercase',\n                        transition: 'color .3s ease',\n                        color: colors_1.orange[200],\n                        '&:hover': {\n                            color: colors_1.orange[100],\n                        },\n                    },\n                },\n                MuiPaper: getElevations('#151d21', '#fff'),\n            },\n        };\n    }\n    else if (type === 'colored') {\n        options = {\n            name: type,\n            palette: {\n                mode: 'light',\n                primary: {\n                    main: '#3399CC',\n                },\n                secondary: {\n                    main: '#164477',\n                },\n                // @ts-expect-error Custom field\n                expert: '#96fc96',\n            },\n            overrides: {\n                MuiAppBar: {\n                    colorDefault: {\n                        backgroundColor: '#3399CC',\n                    },\n                },\n                MuiLink: {\n                    root: {\n                        textTransform: 'uppercase',\n                        transition: 'color .3s ease',\n                        color: colors_1.orange[400],\n                        '&:hover': {\n                            color: colors_1.orange[300],\n                        },\n                    },\n                },\n            },\n        };\n    }\n    else if (type === 'PT') {\n        options = {\n            name: type,\n            palette: {\n                mode: 'light',\n                primary: {\n                    main: '#0F99DE',\n                },\n                secondary: {\n                    main: '#88A536',\n                },\n                // @ts-expect-error Custom field\n                expert: '#BD1B24',\n            },\n            overrides: {\n                MuiAppBar: {\n                    colorDefault: {\n                        backgroundColor: '#0F99DE',\n                    },\n                },\n                MuiLink: {\n                    root: {\n                        textTransform: 'uppercase',\n                        transition: 'color .3s ease',\n                        color: colors_1.orange[400],\n                        '&:hover': {\n                            color: colors_1.orange[300],\n                        },\n                    },\n                },\n            },\n        };\n    }\n    else if (type === 'DX') {\n        options = {\n            name: type,\n            palette: {\n                mode: 'light',\n                primary: {\n                    main: '#F5F5F7',\n                },\n                secondary: {\n                    main: '#a9a9a9',\n                },\n                // @ts-expect-error Custom field\n                expert: '#BD1B24',\n                text: {\n                    primary: '#007AFE',\n                    secondary: '#007AFE',\n                    disabled: '#007AFEAA',\n                },\n            },\n            overrides: {\n                MuiAppBar: {\n                    colorDefault: {\n                        backgroundColor: '#a9a9a9',\n                    },\n                },\n                MuiLink: {\n                    root: {\n                        textTransform: 'uppercase',\n                        transition: 'color .3s ease',\n                        color: colors_1.orange[400],\n                        '&:hover': {\n                            color: colors_1.orange[300],\n                        },\n                    },\n                },\n            },\n        };\n    }\n    else {\n        options = {\n            name: type,\n            palette: {\n                mode: 'light',\n                primary: {\n                    main: '#3399CC',\n                    light: undefined,\n                    dark: undefined,\n                    contrastText: undefined,\n                },\n                secondary: {\n                    main: '#164477',\n                },\n                // @ts-ignore\n                expert: '#14bb00',\n            },\n            overrides: {\n                MuiLink: {\n                    root: {\n                        textTransform: 'uppercase',\n                        transition: 'color .3s ease',\n                        color: colors_1.orange[400],\n                        '&:hover': {\n                            color: colors_1.orange[300],\n                        },\n                    },\n                },\n            },\n        };\n    }\n    // @ts-expect-error Custom field\n    options.toolbar = {\n        height: 48,\n    };\n    // @ts-expect-error Custom field\n    options.saveToolbar = {\n        background: (_b = (_a = options.palette) === null || _a === void 0 ? void 0 : _a.primary) === null || _b === void 0 ? void 0 : _b.main,\n        button: {\n            borderRadius: 3,\n            height: 32,\n        },\n    };\n    if (options.palette) {\n        options.palette.grey = {\n            // @ts-expect-error Custom field\n            main: colors_1.grey[300],\n            dark: colors_1.grey[400],\n        };\n    }\n    const theme = (0, styles_1.createTheme)(options);\n    const palette = theme.palette;\n    return (0, styles_1.createTheme)(theme, {\n        components: {\n            MuiButton: {\n                variants: [\n                    {\n                        props: { variant: 'contained', color: 'grey' },\n                        style: {\n                            color: palette.getContrastText && palette.grey && palette.grey[300] ? palette.getContrastText(palette.grey[300]) : undefined,\n                        },\n                    },\n                    {\n                        props: { variant: 'outlined', color: 'grey' },\n                        style: {\n                            color: (_c = palette.text) === null || _c === void 0 ? void 0 : _c.primary,\n                            borderColor: palette.mode === 'light'\n                                ? 'rgba(0, 0, 0, 0.23)'\n                                : 'rgba(255, 255, 255, 0.23)',\n                            '&.Mui-disabled': {\n                                border: `1px solid ${(_d = palette.action) === null || _d === void 0 ? void 0 : _d.disabledBackground}`,\n                            },\n                            '&:hover': {\n                                borderColor: palette.mode === 'light'\n                                    ? 'rgba(0, 0, 0, 0.23)'\n                                    : 'rgba(255, 255, 255, 0.23)',\n                                backgroundColor: (0, styles_1.alpha)(((_e = palette.text) === null || _e === void 0 ? void 0 : _e.primary) || '', ((_f = palette.action) === null || _f === void 0 ? void 0 : _f.hoverOpacity) || 0.04),\n                            },\n                        },\n                    },\n                    {\n                        props: { variant: 'text', color: 'grey' },\n                        style: {\n                            color: (_g = palette.text) === null || _g === void 0 ? void 0 : _g.primary,\n                            '&:hover': {\n                                backgroundColor: (0, styles_1.alpha)(((_h = palette.text) === null || _h === void 0 ? void 0 : _h.primary) || '', ((_j = palette.action) === null || _j === void 0 ? void 0 : _j.hoverOpacity) || 0.04),\n                            },\n                        },\n                    },\n                ],\n            },\n        },\n    });\n};\nexports.default = CustomTheme;\n","\"use strict\";\n/**\n * Copyright 2018-2024 Denis Haev (bluefox) <dogafox@gmail.com>\n *\n * MIT License\n *\n ***/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Translation string management.\n */\nclass I18n {\n    /** Set the language to display */\n    static setLanguage(lang) {\n        if (lang) {\n            I18n.lang = lang;\n        }\n    }\n    /**\n     * Add translations\n     * User can provide two types of structures:\n     * - {\"word1\": \"translated word1\", \"word2\": \"translated word2\"}, but in this case the lang must be provided\n     * - {\"word1\": {\"en\": \"translated en word1\", \"de\": \"translated de word1\"}, \"word2\": {\"en\": \"translated en word2\", \"de\": \"translated de word2\"}}, but no lang must be provided\n     * @param {object} words additional words for specific language\n     * @param {ioBroker.Languages} lang\n     */\n    static extendTranslations(words, lang) {\n        // automatically extend all languages with prefix\n        if (words.prefix) {\n            const wordsWithPrefix = words;\n            if (typeof wordsWithPrefix.prefix === 'string') {\n                const prefix = wordsWithPrefix.prefix;\n                delete wordsWithPrefix.prefix;\n                Object.keys(wordsWithPrefix).forEach(key => {\n                    const _lang = key;\n                    const _words = {};\n                    const wordsOfOneLanguage = wordsWithPrefix[_lang];\n                    Object.keys(wordsOfOneLanguage).forEach(word => {\n                        if (!word) {\n                            return;\n                        }\n                        if (wordsOfOneLanguage) {\n                            if (!word.startsWith(prefix)) {\n                                _words[`${prefix}${word}`] = wordsOfOneLanguage[word];\n                            }\n                            else {\n                                _words[word] = wordsOfOneLanguage[word];\n                            }\n                        }\n                    });\n                    words[_lang] = _words;\n                });\n            }\n            else {\n                console.warn('Found prefix in translations, but it is not a string');\n            }\n        }\n        try {\n            if (!lang) {\n                // if it is a dictionary with all/many languages\n                if (words.en && words.de && words.ru) {\n                    Object.keys(words).forEach(key => {\n                        const _lang = key;\n                        I18n.translations[_lang] = I18n.translations[_lang] || {};\n                        const wordsOfOneLang = I18n.translations[_lang];\n                        Object.assign(wordsOfOneLang, words[_lang]);\n                    });\n                }\n                else {\n                    // It could be vice versa: words.word1 = {en: 'translated word1', de: 'bersetztes Wort2'}\n                    Object.keys(words).forEach(word => {\n                        const _word = words[word];\n                        Object.keys(_word).forEach(key => {\n                            const _lang = key;\n                            const languageDictionary = I18n.translations[_lang];\n                            if (!languageDictionary) {\n                                console.warn(`Used unknown language: ${_lang}`);\n                            }\n                            else {\n                                if (!languageDictionary[word]) {\n                                    languageDictionary[word] = _word[_lang];\n                                }\n                                else if (languageDictionary[word] !== _word[_lang]) {\n                                    console.warn(`Translation for word \"${word}\" in \"${_lang}\" was ignored: existing = \"${languageDictionary[word]}\", new = ${_word[_lang]}`);\n                                }\n                            }\n                        });\n                    });\n                }\n            }\n            else {\n                // translations for one language\n                if (!I18n.translations[lang]) {\n                    console.warn(`Used unknown language: ${lang}`);\n                }\n                I18n.translations[lang] = I18n.translations[lang] || {};\n                const languageDictionary = I18n.translations[lang];\n                if (languageDictionary) {\n                    Object.keys(words)\n                        .forEach(word => {\n                        if (!languageDictionary[word]) {\n                            languageDictionary[word] = words[word];\n                        }\n                        else if (languageDictionary[word] !== words[word]) {\n                            console.warn(`Translation for word \"${word}\" in \"${lang}\" was ignored: existing = \"${languageDictionary[word]}\", new = ${words[word]}`);\n                        }\n                    });\n                }\n            }\n        }\n        catch (e) {\n            console.error(`Cannot apply translations: ${e}`);\n        }\n    }\n    /**\n     * Sets all translations (in all languages).\n     * @param {{ [lang in ioBroker.Languages]?: Record<string, string>; }} translations\n     */\n    static setTranslations(translations) {\n        if (translations) {\n            I18n.translations = translations;\n        }\n    }\n    /**\n     * Get the currently chosen language.\n     * @returns {ioBroker.Languages} The current language.\n     */\n    static getLanguage() {\n        return I18n.lang;\n    }\n    /** Translate the given string to the selected language */\n    static t(\n    /** The (key) word to look up the string. */\n    word, \n    /** Optional arguments which will replace the first (second, third, ...) occurrences of %s */\n    ...args) {\n        const translation = I18n.translations[I18n.lang];\n        if (translation) {\n            const w = translation[word];\n            if (w) {\n                word = w;\n            }\n            else {\n                if (!I18n.unknownTranslations.includes(word)) {\n                    I18n.unknownTranslations.push(word);\n                    !I18n._disableWarning && console.log(`Translate: ${word}`);\n                }\n                // fallback to english\n                if (I18n.lang !== 'en' && I18n.translations.en) {\n                    const wordEn = I18n.translations.en[word];\n                    if (wordEn) {\n                        word = wordEn;\n                    }\n                }\n            }\n        }\n        for (const arg of args) {\n            word = word.replace('%s', arg);\n        }\n        return word;\n    }\n    /**\n     * Show non-translated words\n     * Required during development\n     */\n    static i18nShow(\n    /** The filter to apply to the list of non-translated words. */\n    filter) {\n        /** List words with their translations. */\n        const result = {};\n        if (!filter) {\n            I18n.unknownTranslations.forEach(word => result[word] = word);\n            console.log(JSON.stringify(result, null, 2));\n        }\n        else if (typeof filter === 'string') {\n            I18n.unknownTranslations.forEach(word => {\n                if (word.startsWith(filter)) {\n                    result[word] = word.replace(filter, '');\n                }\n            });\n            console.log(JSON.stringify(result, null, 2));\n        }\n        else if (typeof filter === 'object') {\n            I18n.unknownTranslations.forEach(word => {\n                if (filter.test(word)) {\n                    result[word] = word;\n                }\n            });\n            console.log(JSON.stringify(result, null, 2));\n        }\n    }\n    /**\n     * Disable warning about non-translated words\n     * Required during development\n     * @param {boolean} disable\n     */\n    static disableWarning(\n    /** Whether to disable the warning. */\n    disable) {\n        I18n._disableWarning = !!disable;\n    }\n}\n/** List of all languages with their translations. */\nI18n.translations = {};\n/** List of unknown translations during development. */\nI18n.unknownTranslations = [];\n/** The currently displayed language. */\nI18n.lang = window.sysLang || 'en';\nI18n._disableWarning = false;\n// install global handlers\nwindow.i18nShow = I18n.i18nShow;\nwindow.i18nDisableWarning = I18n.disableWarning;\n/*\nI18n.translations = {\n    'en': require('./i18n/en'),\n    'ru': require('./i18n/ru'),\n    'de': require('./i18n/de'),\n};\nI18n.fallbacks = true;\nI18n.t = function () {};\n*/\nexports.default = I18n;\n","import { Connection, ERRORS, RequestOptions } from \"./Connection.js\";\nimport type { ConnectionProps } from \"./ConnectionProps.js\";\nimport type {\n\tAdminEmitEvents,\n\tAdminListenEvents,\n\tCompactAdapterInfo,\n\tCompactHost,\n\tCompactInstalledInfo,\n\tCompactInstanceInfo,\n\tCompactRepository,\n\tCompactSystemRepository,\n\tLogFile,\n} from \"./SocketEvents.js\";\nimport {\n\tgetObjectViewResultToArray,\n\tnormalizeHostId,\n\tobjectIdToHostname,\n} from \"./tools.js\";\n\ninterface Certificate {\n\tname: string;\n\ttype: \"public\" | \"private\" | \"chained\";\n}\n\n// taken from \"@iobroker/js-controller-common-db/build/lib/common/notificationHandler\"\nexport type MultilingualObject = Exclude<ioBroker.StringOrTranslated, string>;\nexport type Severity = \"info\" | \"notify\" | \"alert\";\nexport interface NotificationMessageObject {\n\tmessage: string;\n\tts: number;\n}\n\nexport interface FilteredNotificationInformation {\n\t[scope: string]: {\n\t\tdescription: MultilingualObject;\n\t\tname: MultilingualObject;\n\t\tcategories: {\n\t\t\t[category: string]: {\n\t\t\t\tdescription: MultilingualObject;\n\t\t\t\tname: MultilingualObject;\n\t\t\t\tseverity: Severity;\n\t\t\t\tinstances: {\n\t\t\t\t\t[instance: string]: {\n\t\t\t\t\t\tmessages: NotificationMessageObject[];\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t};\n}\n\nfunction parseCertificate(name: string, cert: string): Certificate | void {\n\tif (!cert) return;\n\n\tlet type: Certificate[\"type\"];\n\t// If it is a filename, it could be everything\n\tif (\n\t\tcert.length < 700 &&\n\t\t(cert.indexOf(\"/\") !== -1 || cert.indexOf(\"\\\\\") !== -1)\n\t) {\n\t\tif (name.toLowerCase().includes(\"private\")) {\n\t\t\ttype = \"private\";\n\t\t} else if (cert.toLowerCase().includes(\"private\")) {\n\t\t\ttype = \"private\";\n\t\t} else if (name.toLowerCase().includes(\"public\")) {\n\t\t\ttype = \"public\";\n\t\t} else if (cert.toLowerCase().includes(\"public\")) {\n\t\t\ttype = \"public\";\n\t\t} else if (name.toLowerCase().includes(\"chain\")) {\n\t\t\ttype = \"chained\";\n\t\t} else if (cert.toLowerCase().includes(\"chain\")) {\n\t\t\ttype = \"chained\";\n\t\t} else {\n\t\t\t// TODO: is this correct?\n\t\t\treturn;\n\t\t}\n\t} else {\n\t\ttype =\n\t\t\tcert.substring(0, \"-----BEGIN RSA PRIVATE KEY\".length) ===\n\t\t\t\t\"-----BEGIN RSA PRIVATE KEY\" ||\n\t\t\tcert.substring(0, \"-----BEGIN PRIVATE KEY\".length) ===\n\t\t\t\t\"-----BEGIN PRIVATE KEY\"\n\t\t\t\t? \"private\"\n\t\t\t\t: \"public\";\n\n\t\tif (type === \"public\") {\n\t\t\tconst m = cert.split(\"-----END CERTIFICATE-----\");\n\t\t\tif (\n\t\t\t\tm.filter((t) => t.replace(/\\r\\n|\\r|\\n/, \"\").trim()).length > 1\n\t\t\t) {\n\t\t\t\ttype = \"chained\";\n\t\t\t}\n\t\t}\n\t}\n\treturn { name, type };\n}\n\nexport interface IPAddress {\n\tname: string;\n\taddress: string;\n\tfamily: \"ipv4\" | \"ipv6\";\n}\n\ninterface IPAddresses {\n\tIPs4: IPAddress[];\n\tIPs6: IPAddress[];\n}\n\nfunction parseIPAddresses(host: ioBroker.HostObject): IPAddresses {\n\tconst IPs4: IPAddress[] = [\n\t\t{\n\t\t\tname: \"[IPv4] 0.0.0.0 - Listen on all IPs\",\n\t\t\taddress: \"0.0.0.0\",\n\t\t\tfamily: \"ipv4\",\n\t\t},\n\t];\n\tconst IPs6: IPAddress[] = [\n\t\t{\n\t\t\tname: \"[IPv6] :: - Listen on all IPs\",\n\t\t\taddress: \"::\",\n\t\t\tfamily: \"ipv6\",\n\t\t},\n\t];\n\tif (host.native?.hardware?.networkInterfaces) {\n\t\tfor (const [eth, iface] of Object.entries(\n\t\t\thost.native.hardware.networkInterfaces,\n\t\t)) {\n\t\t\tif (!iface) continue;\n\n\t\t\tfor (const ip of iface) {\n\t\t\t\tif (ip.family !== \"IPv6\") {\n\t\t\t\t\tIPs4.push({\n\t\t\t\t\t\tname: `[${ip.family}] ${ip.address} - ${eth}`,\n\t\t\t\t\t\taddress: ip.address,\n\t\t\t\t\t\tfamily: \"ipv4\",\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tIPs6.push({\n\t\t\t\t\t\tname: `[${ip.family}] ${ip.address} - ${eth}`,\n\t\t\t\t\t\taddress: ip.address,\n\t\t\t\t\t\tfamily: \"ipv6\",\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn { IPs4, IPs6 };\n}\n\nexport class AdminConnection extends Connection<\n\tAdminListenEvents,\n\tAdminEmitEvents\n> {\n\tconstructor(props: ConnectionProps) {\n\t\tsuper(props);\n\t}\n\n\t// We overload the request method here because the admin connection's methods all have `requireAdmin: true`\n\tprotected request<T>(options: RequestOptions<T>): Promise<T> {\n\t\treturn super.request<T>({ requireAdmin: true, ...options });\n\t}\n\n\t/**\n\t * Get the stored certificates.\n\t * @param update Force update.\n\t */\n\tgetCertificates(update?: boolean): Promise<Certificate[]> {\n\t\treturn this.request({\n\t\t\tcacheKey: \"cert\",\n\t\t\tforceUpdate: update,\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: async (resolve) => {\n\t\t\t\tconst obj = await this.getObject(\"system.certificates\");\n\t\t\t\tif (obj?.native?.certificates) {\n\t\t\t\t\tresolve(\n\t\t\t\t\t\tObject.entries<string>(obj.native.certificates)\n\t\t\t\t\t\t\t.map(([name, cert]) => parseCertificate(name, cert))\n\t\t\t\t\t\t\t.filter((cert): cert is Certificate => !!cert),\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tresolve([]);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get the logs from a host (only for admin connection).\n\t */\n\tgetLogs(\n\t\thost: string,\n\t\tlinesNumber: number = 200,\n\t): Promise<(string | number)[] | string | { error: string }> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"sendToHost\",\n\t\t\t\t\thost,\n\t\t\t\t\t\"getLogs\",\n\t\t\t\t\tlinesNumber || 200,\n\t\t\t\t\t(lines: any) => {\n\t\t\t\t\t\tresolve(lines);\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get the log files (only for admin connection).\n\t */\n\tgetLogsFiles(host: string): Promise<LogFile[]> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\"readLogs\", host, (err, files) => {\n\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\tresolve(files!);\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Delete the logs from a host (only for admin connection).\n\t */\n\tdelLogs(host: string): Promise<void> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"sendToHost\",\n\t\t\t\t\thost,\n\t\t\t\t\t\"delLogs\",\n\t\t\t\t\tnull,\n\t\t\t\t\t(err) => {\n\t\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Delete a file of an adapter.\n\t * @param adapter The adapter name.\n\t * @param fileName The file name.\n\t */\n\tdeleteFile(adapter: string, fileName: string): Promise<void> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\"deleteFile\", adapter, fileName, (err) => {\n\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Delete a folder of an adapter.\n\t * @param adapter The adapter name.\n\t * @param folderName The folder name.\n\t */\n\tdeleteFolder(adapter: string, folderName: string): Promise<void> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"deleteFolder\",\n\t\t\t\t\tadapter,\n\t\t\t\t\tfolderName,\n\t\t\t\t\t(err) => {\n\t\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\t/**\n\t * Rename file or folder in ioBroker DB\n\t * @param adapter instance name\n\t * @param oldName current file name, e.g., main/vis-views.json\n\t * @param newName new file name, e.g., main/vis-views-new.json\n\t */\n\trename(adapter: string, oldName: string, newName: string): Promise<void> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"rename\",\n\t\t\t\t\tadapter,\n\t\t\t\t\toldName,\n\t\t\t\t\tnewName,\n\t\t\t\t\t(err) => {\n\t\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Rename file in ioBroker DB\n\t * @param adapter instance name\n\t * @param oldName current file name, e.g., main/vis-views.json\n\t * @param newName new file name, e.g., main/vis-views-new.json\n\t */\n\trenameFile(\n\t\tadapter: string,\n\t\toldName: string,\n\t\tnewName: string,\n\t): Promise<void> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"renameFile\",\n\t\t\t\t\tadapter,\n\t\t\t\t\toldName,\n\t\t\t\t\tnewName,\n\t\t\t\t\t(err) => {\n\t\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get the list of all hosts.\n\t * @param update Force update.\n\t */\n\tgetHosts(update?: boolean): Promise<ioBroker.HostObject[]> {\n\t\treturn this.request({\n\t\t\tcacheKey: \"hosts\",\n\t\t\tforceUpdate: update,\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"getObjectView\",\n\t\t\t\t\t\"system\",\n\t\t\t\t\t\"host\",\n\t\t\t\t\t{ startkey: \"system.host.\", endkey: \"system.host.\\u9999\" },\n\t\t\t\t\t(err, doc) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\tgetObjectViewResultToArray<ioBroker.HostObject>(\n\t\t\t\t\t\t\t\t\tdoc,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get the list of all users.\n\t * @param update Force update.\n\t */\n\tgetUsers(update?: boolean): Promise<ioBroker.UserObject[]> {\n\t\treturn this.request({\n\t\t\tcacheKey: \"users\",\n\t\t\tforceUpdate: update,\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"getObjectView\",\n\t\t\t\t\t\"system\",\n\t\t\t\t\t\"user\",\n\t\t\t\t\t{ startkey: \"system.user.\", endkey: \"system.user.\\u9999\" },\n\t\t\t\t\t(err, doc) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\tgetObjectViewResultToArray<ioBroker.UserObject>(\n\t\t\t\t\t\t\t\t\tdoc,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Rename a group.\n\t * @param id The id.\n\t * @param newId The new id.\n\t * @param newName The new name.\n\t */\n\trenameGroup(\n\t\tid: string,\n\t\tnewId: string,\n\t\tnewName: ioBroker.StringOrTranslated,\n\t): Promise<void> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: async (resolve) => {\n\t\t\t\tconst groups = await this.getGroups(true);\n\t\t\t\t// renaming a group happens by re-creating the object under a different ID\n\t\t\t\tconst subGroups = groups.filter((g) =>\n\t\t\t\t\tg._id.startsWith(`${id}.`),\n\t\t\t\t);\n\t\t\t\t// First, do this for all sub-groups\n\t\t\t\tfor (const group of subGroups) {\n\t\t\t\t\tconst oldGroupId = group._id;\n\t\t\t\t\tconst newGroupId = (newId +\n\t\t\t\t\t\tgroup._id.substring(\n\t\t\t\t\t\t\tid.length,\n\t\t\t\t\t\t)) as ioBroker.ObjectIDs.Group;\n\t\t\t\t\tgroup._id = newGroupId;\n\n\t\t\t\t\t// Create a new object, then delete the old one if it worked\n\t\t\t\t\tawait this.setObject(newGroupId, group);\n\t\t\t\t\tawait this.delObject(oldGroupId);\n\t\t\t\t}\n\t\t\t\t// Then for the parent group\n\t\t\t\tconst parentGroup = groups.find((g) => g._id === id);\n\t\t\t\tif (parentGroup) {\n\t\t\t\t\tconst oldGroupId = parentGroup._id;\n\t\t\t\t\tparentGroup._id = newId as ioBroker.ObjectIDs.Group;\n\t\t\t\t\tif (newName !== undefined) {\n\t\t\t\t\t\t(parentGroup.common as any) ??= {};\n\t\t\t\t\t\tparentGroup.common.name = newName as any;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create a new object, then delete the old one if it worked\n\t\t\t\t\tawait this.setObject(newId, parentGroup);\n\t\t\t\t\tawait this.delObject(oldGroupId);\n\t\t\t\t}\n\n\t\t\t\tresolve();\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get the host information.\n\t * @param host\n\t * @param update Force update.\n\t * @param timeoutMs optional read timeout.\n\t */\n\tgetHostInfo(\n\t\thost: string,\n\t\tupdate?: boolean,\n\t\ttimeoutMs?: number,\n\t): Promise<any> {\n\t\thost = normalizeHostId(host);\n\t\treturn this.request({\n\t\t\tcacheKey: `hostInfo_${host}`,\n\t\t\tforceUpdate: update,\n\t\t\tcommandTimeout: timeoutMs,\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"sendToHost\",\n\t\t\t\t\thost,\n\t\t\t\t\t\"getHostInfo\",\n\t\t\t\t\tnull,\n\t\t\t\t\t(data) => {\n\t\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\t\tif (data === ERRORS.PERMISSION_ERROR) {\n\t\t\t\t\t\t\treject('May not read \"getHostInfo\"');\n\t\t\t\t\t\t} else if (!data) {\n\t\t\t\t\t\t\treject('Cannot read \"getHostInfo\"');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get the host information (short version).\n\t * @param host\n\t * @param update Force update.\n\t * @param timeoutMs optional read timeout.\n\t */\n\tgetHostInfoShort(\n\t\thost: string,\n\t\tupdate?: boolean,\n\t\ttimeoutMs?: number,\n\t): Promise<any> {\n\t\thost = normalizeHostId(host);\n\t\treturn this.request({\n\t\t\tcacheKey: `hostInfoShort_${host}`,\n\t\t\tforceUpdate: update,\n\t\t\tcommandTimeout: timeoutMs,\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"sendToHost\",\n\t\t\t\t\thost,\n\t\t\t\t\t\"getHostInfoShort\",\n\t\t\t\t\tnull,\n\t\t\t\t\t(data) => {\n\t\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\t\tif (data === ERRORS.PERMISSION_ERROR) {\n\t\t\t\t\t\t\treject('May not read \"getHostInfoShort\"');\n\t\t\t\t\t\t} else if (!data) {\n\t\t\t\t\t\t\treject('Cannot read \"getHostInfoShort\"');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get the repository.\n\t * @param host\n\t * @param args\n\t * @param update Force update.\n\t * @param timeoutMs timeout in ms.\n\t */\n\tgetRepository(\n\t\thost: string,\n\t\targs: any,\n\t\tupdate?: boolean,\n\t\ttimeoutMs?: number,\n\t): Promise<any> {\n\t\treturn this.request({\n\t\t\tcacheKey: `repository_${host}`,\n\t\t\tforceUpdate: update,\n\t\t\tcommandTimeout: timeoutMs,\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"sendToHost\",\n\t\t\t\t\thost,\n\t\t\t\t\t\"getRepository\",\n\t\t\t\t\targs,\n\t\t\t\t\t(data) => {\n\t\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\t\tif (data === ERRORS.PERMISSION_ERROR) {\n\t\t\t\t\t\t\treject('May not read \"getRepository\"');\n\t\t\t\t\t\t} else if (!data) {\n\t\t\t\t\t\t\treject('Cannot read \"getRepository\"');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get the installed.\n\t * @param host\n\t * @param update Force update.\n\t * @param cmdTimeout timeout in ms\n\t */\n\tgetInstalled(\n\t\thost: string,\n\t\tupdate?: boolean,\n\t\tcmdTimeout?: number,\n\t): Promise<any> {\n\t\thost = normalizeHostId(host);\n\n\t\treturn this.request({\n\t\t\tcacheKey: `installed_${host}`,\n\t\t\tforceUpdate: update,\n\t\t\tcommandTimeout: cmdTimeout,\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"sendToHost\",\n\t\t\t\t\thost,\n\t\t\t\t\t\"getInstalled\",\n\t\t\t\t\tnull,\n\t\t\t\t\t(data) => {\n\t\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\t\tif (data === ERRORS.PERMISSION_ERROR) {\n\t\t\t\t\t\t\treject('May not read \"getInstalled\"');\n\t\t\t\t\t\t} else if (!data) {\n\t\t\t\t\t\t\treject('Cannot read \"getInstalled\"');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Execute a command on a host.\n\t * @param host The host name.\n\t * @param cmd The command.\n\t * @param cmdId The command ID.\n\t * @param cmdTimeout Timeout of command in ms\n\t */\n\tcmdExec(\n\t\thost: string,\n\t\tcmd: string,\n\t\tcmdId: string,\n\t\tcmdTimeout?: number,\n\t): Promise<void> {\n\t\treturn this.request({\n\t\t\tcommandTimeout: cmdTimeout,\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\thost = normalizeHostId(host);\n\n\t\t\t\tthis._socket.emit(\"cmdExec\", host, cmdId, cmd, (err) => {\n\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\ttimeout.clearTimeout();\n\n\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Read the base settings of a given host.\n\t * @param host\n\t */\n\treadBaseSettings(host: string): Promise<any> {\n\t\t// Make sure we deal with a hostname, not an object ID\n\t\thost = objectIdToHostname(host);\n\n\t\treturn this.request({\n\t\t\trequireFeatures: [\"CONTROLLER_READWRITE_BASE_SETTINGS\"],\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"sendToHost\",\n\t\t\t\t\thost,\n\t\t\t\t\t\"readBaseSettings\",\n\t\t\t\t\tnull,\n\t\t\t\t\t(data) => {\n\t\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttimeout.clearTimeout();\n\n\t\t\t\t\t\tif (data === ERRORS.PERMISSION_ERROR) {\n\t\t\t\t\t\t\treject('May not read \"BaseSettings\"');\n\t\t\t\t\t\t} else if (!data) {\n\t\t\t\t\t\t\treject('Cannot read \"BaseSettings\"');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Write the base settings of a given host.\n\t * @param host\n\t * @param config\n\t */\n\twriteBaseSettings(host: string, config: any): Promise<any> {\n\t\t// Make sure we deal with a hostname, not an object ID\n\t\thost = objectIdToHostname(host);\n\n\t\treturn this.request({\n\t\t\trequireFeatures: [\"CONTROLLER_READWRITE_BASE_SETTINGS\"],\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"sendToHost\",\n\t\t\t\t\thost,\n\t\t\t\t\t\"writeBaseSettings\",\n\t\t\t\t\tconfig,\n\t\t\t\t\t(data) => {\n\t\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttimeout.clearTimeout();\n\n\t\t\t\t\t\tif (data === ERRORS.PERMISSION_ERROR) {\n\t\t\t\t\t\t\treject('May not write \"BaseSettings\"');\n\t\t\t\t\t\t} else if (!data) {\n\t\t\t\t\t\t\treject('Cannot write \"BaseSettings\"');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Send command to restart the iobroker on host\n\t * @param host\n\t */\n\trestartController(host: string): Promise<true> {\n\t\t// Make sure we deal with a hostname, not an object ID\n\t\thost = objectIdToHostname(host);\n\n\t\treturn this.request({\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"sendToHost\",\n\t\t\t\t\thost,\n\t\t\t\t\t\"restartController\",\n\t\t\t\t\tnull,\n\t\t\t\t\t(error) => {\n\t\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\t\tif (error) reject(error);\n\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Read statistics information from host\n\t * @param host\n\t * @param typeOfDiag one of none, normal, no-city, extended\n\t */\n\tgetDiagData(host: string, typeOfDiag: string): Promise<any> {\n\t\t// Make sure we deal with a hostname, not an object ID\n\t\thost = objectIdToHostname(host);\n\n\t\treturn this.request({\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"sendToHost\",\n\t\t\t\t\thost,\n\t\t\t\t\t\"getDiagData\",\n\t\t\t\t\ttypeOfDiag,\n\t\t\t\t\t(result) => {\n\t\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Change the password of the given user.\n\t * @param user\n\t * @param password\n\t */\n\tchangePassword(user: string, password: string): Promise<void> {\n\t\treturn this.request({\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\"changePassword\", user, password, (err) => {\n\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get the IP addresses of the given host.\n\t * @param host\n\t * @param update Force update.\n\t */\n\tgetIpAddresses(host: string, update?: boolean): Promise<string[]> {\n\t\thost = normalizeHostId(host);\n\t\treturn this.request({\n\t\t\tcacheKey: `IPs_${host}`,\n\t\t\tforceUpdate: update,\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: async (resolve) => {\n\t\t\t\tconst obj = await this.getObject(host);\n\t\t\t\tresolve(obj?.common.address ?? []);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get the IP addresses with interface names of the given host or find host by IP.\n\t * @param ipOrHostName\n\t * @param update Force update.\n\t */\n\tgetHostByIp(ipOrHostName: string, update?: boolean): Promise<IPAddress[]> {\n\t\t// Make sure we deal with a hostname, not an object ID\n\t\tipOrHostName = objectIdToHostname(ipOrHostName);\n\n\t\treturn this.request({\n\t\t\tcacheKey: `rIPs_${ipOrHostName}`,\n\t\t\tforceUpdate: update,\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\"getHostByIp\", ipOrHostName, (ip, host) => {\n\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\ttimeout.clearTimeout();\n\n\t\t\t\t\tconst { IPs4, IPs6 } = parseIPAddresses(host);\n\t\t\t\t\tresolve([...IPs4, ...IPs6]);\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Encrypt a text\n\t * @param plaintext\n\t */\n\tencrypt(plaintext: string): Promise<string> {\n\t\treturn this.request({\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\"encrypt\", plaintext, (err, ciphertext) => {\n\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\tresolve(ciphertext!);\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Decrypt a text\n\t * @param ciphertext\n\t */\n\tdecrypt(ciphertext: string): Promise<string> {\n\t\treturn this.request({\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\"decrypt\", ciphertext, (err, plaintext) => {\n\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\tresolve(plaintext!);\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Change access rights for file\n\t * @param adapter adapter name\n\t * @param path file name with a full path. It could be like 'vis.0/*'\n\t * @param options like {mode: 0x644}\n\t */\n\tchmodFile(\n\t\tadapter: string | null,\n\t\tpath: string,\n\t\toptions?: { mode: number | string },\n\t): Promise<ioBroker.ChownFileResult[]> {\n\t\treturn this.request({\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"chmodFile\",\n\t\t\t\t\tadapter,\n\t\t\t\t\tpath,\n\t\t\t\t\toptions,\n\t\t\t\t\t(err, processed) => {\n\t\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\t\tresolve(processed!);\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Change owner or/and owner group for file\n\t * @param adapter adapter name\n\t * @param filename file name with a full path. it could be like vis.0/*\n\t * @param options like {owner: \"newOwner\", ownerGroup: \"newGroup\"}\n\t */\n\tchownFile(\n\t\tadapter: string,\n\t\tfilename: string,\n\t\toptions?: { owner: string; ownerGroup: string },\n\t): Promise<ioBroker.ChownFileResult[]> {\n\t\treturn this.request({\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"chownFile\",\n\t\t\t\t\tadapter,\n\t\t\t\t\tfilename,\n\t\t\t\t\toptions,\n\t\t\t\t\t(err, processed) => {\n\t\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\t\tresolve(processed!);\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get the alarm notifications from a host (only for admin connection).\n\t * @param host\n\t * @param category - optional\n\t */\n\tgetNotifications(\n\t\thost: string,\n\t\tcategory?: string,\n\t): Promise<void | { result: FilteredNotificationInformation }> {\n\t\treturn this.request({\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"sendToHost\",\n\t\t\t\t\thost,\n\t\t\t\t\t\"getNotifications\",\n\t\t\t\t\t{ category },\n\t\t\t\t\t(notifications) => {\n\t\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\t\tresolve(notifications as { result: FilteredNotificationInformation });\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Clear the alarm notifications on a host (only for admin connection).\n\t * @param host\n\t * @param category - optional\n\t */\n\tclearNotifications(host: string, category: string): Promise<any> {\n\t\treturn this.request({\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"sendToHost\",\n\t\t\t\t\thost,\n\t\t\t\t\t\"clearNotifications\",\n\t\t\t\t\t{ category },\n\t\t\t\t\t(notifications) => {\n\t\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\t\tresolve(notifications);\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Read if only easy mode is allowed (only for admin connection).\n\t */\n\tgetIsEasyModeStrict(): Promise<boolean> {\n\t\treturn this.request({\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\"getIsEasyModeStrict\", (err, isStrict) => {\n\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\tresolve(!!isStrict);\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Read easy mode configuration (only for admin connection).\n\t */\n\tgetEasyMode(): Promise<any> {\n\t\treturn this.request({\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\"getEasyMode\", (err, config) => {\n\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\tresolve(config);\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Read adapter ratings\n\t */\n\tgetRatings(update?: boolean): Promise<any> {\n\t\treturn this.request({\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\"getRatings\", !!update, (err, ratings) => {\n\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\tresolve(ratings);\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\tgetCurrentSession(cmdTimeout?: number): any {\n\t\tconst controller = new AbortController();\n\n\t\treturn this.request({\n\t\t\tcommandTimeout: cmdTimeout || 5000,\n\t\t\tonTimeout: () => {\n\t\t\t\tcontroller.abort();\n\t\t\t},\n\t\t\texecutor: async (resolve, reject, timeout) => {\n\t\t\t\ttry {\n\t\t\t\t\tconst res = await fetch(\"./session\", {\n\t\t\t\t\t\tsignal: controller.signal,\n\t\t\t\t\t});\n\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\tresolve(res.json());\n\t\t\t\t} catch (e) {\n\t\t\t\t\treject(`getCurrentSession: ${e}`);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Read current web, socketio or admin namespace, like admin.0\n\t */\n\tgetCurrentInstance(): Promise<string> {\n\t\treturn this.request({\n\t\t\tcacheKey: \"currentInstance\",\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\"getCurrentInstance\", (err, namespace) => {\n\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\tresolve(namespace!);\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get all adapter instances.\n\t * @param update Force update.\n\t */\n\t/**\n\t * Get all instances of the given adapter.\n\t * @param adapter The name of the adapter.\n\t * @param update Force update.\n\t */\n\tgetAdapterInstances(\n\t\tadapter?: string | boolean,\n\t\tupdate?: boolean,\n\t): Promise<ioBroker.InstanceObject[]> {\n\t\tlet adapterStr: string;\n\t\tif (typeof adapter === \"boolean\") {\n\t\t\tupdate = adapter;\n\t\t\tadapterStr = \"\";\n\t\t} else {\n\t\t\tadapterStr = adapter || \"\";\n\t\t}\n\n\t\treturn this.request({\n\t\t\tcacheKey: `instances_${adapterStr}`,\n\t\t\tforceUpdate: update,\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"getAdapterInstances\",\n\t\t\t\t\tadapterStr,\n\t\t\t\t\t(err, instances) => {\n\t\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(instances!);\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get all adapters.\n\t * @param update Force update.\n\t */\n\t/**\n\t * Get adapters with the given name.\n\t * @param adapter The name of the adapter.\n\t * @param update Force update.\n\t */\n\tgetAdapters(\n\t\tadapter?: string | boolean,\n\t\tupdate?: boolean,\n\t): Promise<ioBroker.AdapterObject[]> {\n\t\tlet adapterStr: string;\n\t\tif (typeof adapter === \"boolean\") {\n\t\t\tupdate = adapter;\n\t\t\tadapterStr = \"\";\n\t\t} else {\n\t\t\tadapterStr = adapter || \"\";\n\t\t}\n\n\t\treturn this.request({\n\t\t\tcacheKey: `adapter_${adapterStr}`,\n\t\t\tforceUpdate: update,\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\"getAdapters\", adapterStr, (err, adapters) => {\n\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\tresolve(adapters!);\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t// returns very optimized information for adapters to minimize a connection load\n\tgetCompactAdapters(\n\t\tupdate?: boolean,\n\t): Promise<Record<string, CompactAdapterInfo>> {\n\t\treturn this.request({\n\t\t\tcacheKey: \"compactAdapters\",\n\t\t\tforceUpdate: update,\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\"getCompactAdapters\", (err, adapters) => {\n\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\tresolve(adapters!);\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t// reset cached promise, so next time the information will be requested anew\n\tgetAdaptersResetCache(adapter?: string): void {\n\t\tadapter = adapter ?? \"\";\n\t\tthis.resetCache(`adapter_${adapter}`);\n\t\tthis.resetCache(`compactAdapters`);\n\t}\n\n\t// returns very optimized information for adapters to minimize a connection load\n\tgetCompactInstances(\n\t\tupdate?: boolean,\n\t): Promise<Record<string, CompactInstanceInfo>> {\n\t\treturn this.request({\n\t\t\tcacheKey: \"compactInstances\",\n\t\t\tforceUpdate: update,\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\"getCompactInstances\", (err, instances) => {\n\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\tresolve(instances!);\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t// reset cached promise, so next time the information will be requested anew\n\tgetAdapterInstancesResetCache(adapter?: string): void {\n\t\tadapter = adapter ?? \"\";\n\t\tthis.resetCache(`instances_${adapter}`);\n\t\tthis.resetCache(`compactInstances`);\n\t}\n\n\t// returns very optimized information for adapters to minimize a connection load\n\t// reads only a version of installed adapter\n\tgetCompactInstalled(\n\t\thost: string,\n\t\tupdate?: boolean,\n\t\tcmdTimeout?: number,\n\t): Promise<CompactInstalledInfo> {\n\t\thost = normalizeHostId(host);\n\n\t\treturn this.request({\n\t\t\tcacheKey: `installedCompact_${host}`,\n\t\t\tforceUpdate: update,\n\t\t\tcommandTimeout: cmdTimeout,\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\"getCompactInstalled\", host, (data) => {\n\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\ttimeout.clearTimeout();\n\n\t\t\t\t\tif (data === ERRORS.PERMISSION_ERROR) {\n\t\t\t\t\t\treject('May not read \"getCompactInstalled\"');\n\t\t\t\t\t} else if (!data) {\n\t\t\t\t\t\treject('Cannot read \"getCompactInstalled\"');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t// reset cached promise, so next time the information will be requested anew\n\tgetInstalledResetCache(host?: string): void {\n\t\tif (!host) {\n\t\t\tthis.resetCache(`installedCompact_`, true);\n\t\t\tthis.resetCache(`installed_`, true);\n\t\t} else {\n\t\t\tthis.resetCache(`installedCompact_${host}`);\n\t\t\tthis.resetCache(`installed_${host}`);\n\t\t}\n\t}\n\n\t/**\n\t * Get the repository in compact form (only version and icon).\n\t * @param host\n\t * @param update Force update.\n\t * @param timeoutMs timeout in ms.\n\t */\n\tgetCompactRepository(\n\t\thost: string,\n\t\tupdate?: boolean,\n\t\ttimeoutMs?: number,\n\t): Promise<CompactRepository> {\n\t\thost = normalizeHostId(host);\n\n\t\treturn this.request({\n\t\t\tcacheKey: `repositoryCompact_${host}`,\n\t\t\tforceUpdate: update,\n\t\t\tcommandTimeout: timeoutMs,\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\"getCompactRepository\", host, (data) => {\n\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\ttimeout.clearTimeout();\n\n\t\t\t\t\tif (data === ERRORS.PERMISSION_ERROR) {\n\t\t\t\t\t\treject('May not read \"getCompactRepository\"');\n\t\t\t\t\t} else if (!data) {\n\t\t\t\t\t\treject('Cannot read \"getCompactRepository\"');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t// reset cached promise, so next time the information will be requested anew\n\tgetRepositoryResetCache(host: string): void {\n\t\tif (!host) {\n\t\t\tthis.resetCache(`repositoryCompact_`, true);\n\t\t\tthis.resetCache(`repository_`, true);\n\t\t} else {\n\t\t\tthis.resetCache(`repositoryCompact_${host}`);\n\t\t\tthis.resetCache(`repository_${host}`);\n\t\t}\n\t}\n\n\t/**\n\t * Get the list of all hosts in compact form (only _id, common.name, common.icon, common.color, native.hardware.networkInterfaces)\n\t * @param update Force update.\n\t */\n\tgetCompactHosts(update?: boolean): Promise<CompactHost[]> {\n\t\treturn this.request({\n\t\t\tcacheKey: \"hostsCompact\",\n\t\t\tforceUpdate: update,\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\"getCompactHosts\", (err, systemConfig) => {\n\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\tresolve(systemConfig!);\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get `system.repository` without big JSON\n\t */\n\tgetCompactSystemRepositories(\n\t\tupdate?: boolean,\n\t): Promise<CompactSystemRepository> {\n\t\treturn this.request({\n\t\t\tcacheKey: \"repositoriesCompact\",\n\t\t\tforceUpdate: update,\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"getCompactSystemRepositories\",\n\t\t\t\t\t(err, systemRepositories) => {\n\t\t\t\t\t\tif (timeout.elapsed) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttimeout.clearTimeout();\n\t\t\t\t\t\tif (err) reject(err);\n\t\t\t\t\t\tresolve(systemRepositories!);\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n}\n","import type { ConnectionProps } from \"./ConnectionProps.js\";\nimport { createDeferredPromise } from \"./DeferredPromise.js\";\nimport type {\n\tEmitEventHandler,\n\tListenEventHandler,\n\tSocketClient,\n} from \"./SocketClient.js\";\nimport {\n\tgetObjectViewResultToArray,\n\tnormalizeHostId,\n\tpattern2RegEx,\n\twait,\n} from \"./tools.js\";\n\n/** Possible progress states. */\nexport enum PROGRESS {\n\t/** The socket is connecting. */\n\tCONNECTING = 0,\n\t/** The socket is successfully connected. */\n\tCONNECTED = 1,\n\t/** All objects are loaded. */\n\tOBJECTS_LOADED = 2,\n\t/** The socket is ready for use. */\n\tREADY = 3,\n}\n\nexport enum ERRORS {\n\tPERMISSION_ERROR = \"permissionError\",\n\tNOT_CONNECTED = \"notConnectedError\",\n\tTIMEOUT = \"timeout\",\n\tNOT_ADMIN = \"Allowed only in admin\",\n\tNOT_SUPPORTED = \"Not supported\",\n}\n\n/** @deprecated Use {@link ERRORS.PERMISSION_ERROR} instead */\nexport const PERMISSION_ERROR = ERRORS.PERMISSION_ERROR;\n/** @deprecated Use {@link ERRORS.NOT_CONNECTED} instead */\nexport const NOT_CONNECTED = ERRORS.NOT_CONNECTED;\n\n/**\n * @internal\n * Options to use for the backend request wrapper\n */\nexport interface RequestOptions<T> {\n\t/** The key that is used to cache the results for later requests of the same kind */\n\tcacheKey?: string;\n\t/** Used to bypass the cache */\n\tforceUpdate?: boolean;\n\t/** Can be used to identify the request method in error messages */\n\trequestName?: string;\n\t/**\n\t * The timeout in milliseconds after which the call will reject with a timeout error.\n\t * If no timeout is given, the default is used. Set this to `false` to explicitly disable the timeout.\n\t */\n\tcommandTimeout?: number | false;\n\t/** Will be called when the timeout elapses */\n\tonTimeout?: () => void;\n\t/** Whether the call should only be allowed in the admin adapter */\n\trequireAdmin?: boolean;\n\t/** Require certain features to be supported for this call */\n\trequireFeatures?: string[];\n\t/** The function that does the actual work */\n\texecutor: (\n\t\tresolve: (value: T | PromiseLike<T> | Promise<T>) => void,\n\t\treject: (reason?: any) => void,\n\t\t/** Can be used to check in the executor whether the request has timed out and/or stop it from timing out */\n\t\ttimeout: Readonly<{ elapsed: boolean; clearTimeout: () => void }>,\n\t) => void | Promise<void>;\n}\n\nexport type SystemConfig = NonNullable<\n\tioBroker.ObjectIdToObjectType<\"system.config\">\n>;\nexport type BinaryStateChangeHandler = (\n\tid: string,\n\tbase64: string | null,\n) => void;\n\nexport type FileChangeHandler = (\n\tid: string,\n\tfileName: string,\n\tsize: number | null, // null if deleted\n) => void;\n\nexport interface OldObject {\n\t_id: string;\n\ttype: string;\n}\n\nexport type ObjectChangeHandler = (\n\tid: string,\n\tobj: ioBroker.Object | null | undefined,\n\toldObj?: OldObject,\n) => void | Promise<void>;\n\nexport type InstanceMessageCallback = (\n\tdata: any,\n\tsourceInstance: string,\n\tmessageType: string,\n) => void | Promise<void>;\n\nexport type InstanceSubscribe = {\n\tmessageType: string;\n\tcallback: InstanceMessageCallback;\n};\n\nconst ADAPTERS = [\"material\", \"echarts\", \"vis\"];\n\nexport class Connection<\n\tCustomListenEvents extends Record<\n\t\tkeyof CustomListenEvents,\n\t\tListenEventHandler\n\t> = Record<string, never>,\n\tCustomEmitEvents extends Record<\n\t\tkeyof CustomEmitEvents,\n\t\tEmitEventHandler\n\t> = Record<string, never>,\n> {\n\tconstructor(props: Partial<ConnectionProps>) {\n\t\tthis.props = this.applyDefaultProps(props);\n\n\t\tthis.waitForSocketLib()\n\t\t\t.then(() => this.startSocket())\n\t\t\t.catch((e) => {\n\t\t\t\talert(`Socket connection could not be initialized: ${e}`);\n\t\t\t});\n\t}\n\n\tprivate applyDefaultProps(\n\t\tprops: Partial<ConnectionProps>,\n\t): ConnectionProps {\n\t\treturn {\n\t\t\t...props,\n\t\t\t// Define default props that always need to be set\n\t\t\tprotocol: props.protocol || window.location.protocol,\n\t\t\thost: props.host || window.location.hostname,\n\t\t\tport:\n\t\t\t\tprops.port ||\n\t\t\t\t(window.location.port === \"3000\" ? 8081 : window.location.port),\n\t\t\tioTimeout: Math.max(props.ioTimeout || 20000, 20000),\n\t\t\tcmdTimeout: Math.max(props.cmdTimeout || 5000, 5000),\n\t\t\tadmin5only: props.admin5only || false,\n\t\t\tautoSubscribes: props.autoSubscribes ?? [],\n\t\t\tautoSubscribeLog: props.autoSubscribeLog ?? false,\n\t\t\tdoNotLoadACL: props.doNotLoadACL ?? true,\n\t\t\tdoNotLoadAllObjects: props.doNotLoadAllObjects ?? true,\n\t\t};\n\t}\n\n\tprivate readonly props: ConnectionProps;\n\n\tprivate ignoreState: string = \"\";\n\tprivate connected: boolean = false;\n\tprivate subscribed: boolean = false;\n\tprivate firstConnect: boolean = true;\n\tpublic waitForRestart: boolean = false;\n\tpublic loaded: boolean = false;\n\tprivate simStates: Record<string, ioBroker.State> = {};\n\n\tprivate readonly statesSubscribes: Record<\n\t\tstring,\n\t\t{\n\t\t\treg: RegExp;\n\t\t\tcbs: (ioBroker.StateChangeHandler | BinaryStateChangeHandler)[];\n\t\t}\n\t> = {};\n\tprivate readonly filesSubscribes: Record<\n\t\tstring,\n\t\t{\n\t\t\tregId: RegExp;\n\t\t\tregFilePattern: RegExp;\n\t\t\tcbs: FileChangeHandler[];\n\t\t}\n\t> = {};\n\tprivate readonly objectsSubscribes: Record<\n\t\tstring,\n\t\t{ reg: RegExp; cbs: ObjectChangeHandler[] }\n\t> = {};\n\tprivate objects: Record<string, ioBroker.Object> = {};\n\tprivate states: Record<string, ioBroker.State> = {};\n\n\tpublic acl: any = null;\n\tpublic isSecure: boolean = false;\n\t// Do not inform about readiness two times\n\tpublic onReadyDone: boolean = false;\n\n\tprivate readonly onConnectionHandlers: ((connected: boolean) => void)[] =\n\t\t[];\n\tprivate readonly onLogHandlers: ((message: string) => void)[] = [];\n\n\tprivate onCmdStdoutHandler?: (id: string, text: string) => void;\n\tprivate onCmdStderrHandler?: (id: string, text: string) => void;\n\tprivate onCmdExitHandler?: (id: string, exitCode: number) => void;\n\tprivate onError(error: any): void {\n\t\t(this.props.onError ?? console.error)(error);\n\t}\n\n\t/** The socket instance */\n\tprotected _socket!: SocketClient<CustomListenEvents, CustomEmitEvents>;\n\n\tprivate _waitForSocketPromise?: Promise<void>;\n\tprivate readonly _waitForFirstConnectionPromise = createDeferredPromise();\n\n\t/** array with all subscriptions to instances */\n\tprivate _instanceSubscriptions: Record<string, InstanceSubscribe[]> = {};\n\n\t/** Cache for server requests */\n\tprivate readonly _promises: Record<string, Promise<any>> = {};\n\n\tprotected _authTimer: any;\n\n\tprotected _systemConfig?: SystemConfig;\n\t/** The \"system.config\" object */\n\tpublic get systemConfig(): Readonly<SystemConfig> | undefined {\n\t\treturn this._systemConfig;\n\t}\n\n\t/** System language. It could be changed during runtime */\n\tpublic systemLang: ioBroker.Languages = \"en\";\n\n\t/**\n\t * Checks if this connection is running in a web adapter and not in an admin.\n\t * @returns True if running in a web adapter or in a socketio adapter.\n\t */\n\tstatic isWeb(): boolean {\n\t\treturn window.socketUrl !== undefined;\n\t}\n\n\tprivate waitForSocketLib(): Promise<void> {\n\t\t// Only wait once\n\t\tif (this._waitForSocketPromise) return this._waitForSocketPromise;\n\n\t\tthis._waitForSocketPromise = new Promise(async (resolve, reject) => {\n\t\t\t// If socket io is not yet loaded, we need to wait for it\n\t\t\tif (typeof window.io === \"undefined\") {\n\t\t\t\t// If the registerSocketOnLoad function is defined in index.html,\n\t\t\t\t// we can use it to know when the socket library was loaded\n\t\t\t\tif (typeof window.registerSocketOnLoad === \"function\") {\n\t\t\t\t\twindow.registerSocketOnLoad(() => resolve());\n\t\t\t\t} else {\n\t\t\t\t\t// otherwise, we need to poll\n\t\t\t\t\tfor (let i = 1; i <= 30; i++) {\n\t\t\t\t\t\tif (window.io) return resolve();\n\t\t\t\t\t\tawait wait(100);\n\t\t\t\t\t}\n\n\t\t\t\t\treject(new Error(\"Socket library could not be loaded!\"));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t\treturn this._waitForSocketPromise;\n\t}\n\n\t/**\n\t * Starts the socket.io connection.\n\t */\n\tasync startSocket(): Promise<void> {\n\t\tif (this._socket) return;\n\n\t\tlet host = this.props.host;\n\t\tlet port = this.props.port;\n\t\tlet protocol = this.props.protocol.replace(\":\", \"\");\n\t\tlet path = window.location.pathname;\n\n\t\tif (\n\t\t\twindow.location.hostname === \"iobroker.net\" ||\n\t\t\twindow.location.hostname === \"iobroker.pro\"\n\t\t) {\n\t\t\tpath = \"\";\n\t\t} else {\n\t\t\t// if web adapter, socket io could be on another port or even host\n\t\t\tif (window.socketUrl) {\n\t\t\t\tconst parsed = new URL(window.socketUrl);\n\t\t\t\thost = parsed.hostname;\n\t\t\t\tport = parsed.port;\n\t\t\t\tprotocol = parsed.protocol.replace(\":\", \"\");\n\t\t\t}\n\t\t\t// get a current path\n\t\t\tconst pos = path.lastIndexOf(\"/\");\n\t\t\tif (pos !== -1) {\n\t\t\t\tpath = path.substring(0, pos + 1);\n\t\t\t}\n\n\t\t\tif (Connection.isWeb()) {\n\t\t\t\t// remove one level, like echarts, vis, .... We have here: '/echarts/'\n\t\t\t\tconst parts = path.split(\"/\");\n\t\t\t\tif (parts.length > 2) {\n\t\t\t\t\tparts.pop();\n\t\t\t\t\tparts.pop();\n\t\t\t\t\t// material can have paths like this '/material/1.3.0/', so remove one more level\n\t\t\t\t\tif (ADAPTERS.includes(parts[parts.length - 1])) {\n\t\t\t\t\t\tparts.pop();\n\t\t\t\t\t}\n\t\t\t\t\tpath = parts.join(\"/\");\n\t\t\t\t\tif (!path.endsWith(\"/\")) {\n\t\t\t\t\t\tpath += \"/\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst url = port\n\t\t\t? `${protocol}://${host}:${port}`\n\t\t\t: `${protocol}://${host}`;\n\n\t\tthis._socket = window.io.connect(url, {\n\t\t\tpath: path.endsWith(\"/\") ? `${path}socket.io` : `${path}/socket.io`,\n\t\t\tquery: \"ws=true\",\n\t\t\tname: this.props.name,\n\t\t\ttimeout: this.props.ioTimeout,\n\t\t\tuuid: this.props.uuid,\n\t\t\ttoken: this.props.token,\n\t\t});\n\n\t\tthis._socket.on(\"connect\", (noTimeout) => {\n\t\t\tthis.onReadyDone = false;\n\t\t\t// If the user is not admin, it takes some time to install the handlers, because all rights must be checked\n\t\t\tif (noTimeout !== true) {\n\t\t\t\tthis.connected = true;\n\t\t\t\tsetTimeout(\n\t\t\t\t\t() =>\n\t\t\t\t\t\tthis.getVersion()\n\t\t\t\t\t\t\t.then((info) => {\n\t\t\t\t\t\t\t\tconst [major, minor, patch] =\n\t\t\t\t\t\t\t\t\tinfo.version.split(\".\");\n\t\t\t\t\t\t\t\tconst v =\n\t\t\t\t\t\t\t\t\tparseInt(major, 10) * 10000 +\n\t\t\t\t\t\t\t\t\tparseInt(minor, 10) * 100 +\n\t\t\t\t\t\t\t\t\tparseInt(patch, 10);\n\t\t\t\t\t\t\t\tif (v < 40102) {\n\t\t\t\t\t\t\t\t\tthis._authTimer = null;\n\t\t\t\t\t\t\t\t\t// possible this is old version of admin\n\t\t\t\t\t\t\t\t\tthis.onPreConnect(false, false);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\t\t\t\t\t\"authenticate\",\n\t\t\t\t\t\t\t\t\t\t(isOk, isSecure) =>\n\t\t\t\t\t\t\t\t\t\t\tthis.onPreConnect(isOk, isSecure),\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((e) =>\n\t\t\t\t\t\t\t\tthis.onError({\n\t\t\t\t\t\t\t\t\tmessage: e.toString(),\n\t\t\t\t\t\t\t\t\toperation: \"getVersion\",\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t500,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// iobroker websocket waits, till all handlers are installed\n\t\t\t\tthis._socket.emit(\"authenticate\", (isOk, isSecure) => {\n\t\t\t\t\tthis.onPreConnect(isOk, isSecure);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis._socket.on(\"reconnect\", () => {\n\t\t\tthis.onReadyDone = false;\n\t\t\tthis.props.onProgress?.(PROGRESS.READY);\n\t\t\tthis.connected = true;\n\n\t\t\tif (this.waitForRestart) {\n\t\t\t\twindow.location.reload();\n\t\t\t} else {\n\t\t\t\tthis._subscribe(true);\n\t\t\t\tthis.onConnectionHandlers.forEach((cb) => cb(true));\n\t\t\t}\n\t\t});\n\n\t\tthis._socket.on(\"disconnect\", () => {\n\t\t\tthis.onReadyDone = false;\n\t\t\tthis.connected = false;\n\t\t\tthis.subscribed = false;\n\t\t\tthis.props.onProgress?.(PROGRESS.CONNECTING);\n\t\t\tthis.onConnectionHandlers.forEach((cb) => cb(false));\n\t\t});\n\n\t\tthis._socket.on(\"reauthenticate\", () => this.authenticate());\n\n\t\tthis._socket.on(\"log\", (message) => {\n\t\t\tthis.props.onLog?.(message);\n\t\t\tthis.onLogHandlers.forEach((cb) => cb(message));\n\t\t});\n\n\t\tthis._socket.on(\"error\", (err: any) => {\n\t\t\tlet _err: string;\n\n\t\t\tif (err == undefined) {\n\t\t\t\t_err = \"\";\n\t\t\t} else if (typeof err.toString === \"function\") {\n\t\t\t\t_err = err.toString();\n\t\t\t} else {\n\t\t\t\t_err = JSON.stringify(err);\n\t\t\t\tconsole.error(`Received strange error: ${_err}`);\n\t\t\t}\n\n\t\t\tif (_err.includes(\"User not authorized\")) {\n\t\t\t\tthis.authenticate();\n\t\t\t} else if (_err.includes(\"websocket error\")) {\n\t\t\t\tconsole.error(`Socket Error => reload: ${err}`);\n\t\t\t\twindow.location.reload();\n\t\t\t} else {\n\t\t\t\tconsole.error(`Socket Error: ${err}`);\n\t\t\t}\n\t\t});\n\n\t\tthis._socket.on(\"connect_error\", (err: any) =>\n\t\t\tconsole.error(`Connect error: ${err}`),\n\t\t);\n\n\t\tthis._socket.on(\"permissionError\", (err) =>\n\t\t\tthis.onError({\n\t\t\t\tmessage: \"no permission\",\n\t\t\t\toperation: err.operation,\n\t\t\t\ttype: err.type,\n\t\t\t\tid: err.id || \"\",\n\t\t\t}),\n\t\t);\n\n\t\tthis._socket.on(\"objectChange\", (id, obj) => {\n\t\t\tsetTimeout(() => this.objectChange(id, obj), 0);\n\t\t});\n\n\t\tthis._socket.on(\"stateChange\", (id, state) => {\n\t\t\tsetTimeout(() => this.stateChange(id, state), 0);\n\t\t});\n\n\t\t// instance message\n\t\tthis._socket.on(\"im\", (messageType, from, data) => {\n\t\t\tsetTimeout(() => this.instanceMessage(messageType, from, data), 0);\n\t\t});\n\n\t\tthis._socket.on(\"fileChange\", (id, fileName, size) => {\n\t\t\tsetTimeout(() => this.fileChange(id, fileName, size), 0);\n\t\t});\n\n\t\tthis._socket.on(\"cmdStdout\", (id, text) => {\n\t\t\tthis.onCmdStdoutHandler?.(id, text);\n\t\t});\n\n\t\tthis._socket.on(\"cmdStderr\", (id, text) => {\n\t\t\tthis.onCmdStderrHandler?.(id, text);\n\t\t});\n\n\t\tthis._socket.on(\"cmdExit\", (id, exitCode) => {\n\t\t\tthis.onCmdExitHandler?.(id, exitCode);\n\t\t});\n\t}\n\n\t/**\n\t * Called internally.\n\t */\n\tprivate onPreConnect(isOk: boolean, isSecure: boolean) {\n\t\tif (this._authTimer) {\n\t\t\tclearTimeout(this._authTimer);\n\t\t\tthis._authTimer = null;\n\t\t}\n\n\t\tthis.connected = true;\n\t\tthis.isSecure = isSecure;\n\n\t\tif (this.waitForRestart) {\n\t\t\twindow.location.reload();\n\t\t} else {\n\t\t\tif (this.firstConnect) {\n\t\t\t\tthis.loadData();\n\t\t\t} else {\n\t\t\t\tthis.props.onProgress?.(PROGRESS.READY);\n\t\t\t}\n\n\t\t\tthis._subscribe(true);\n\t\t\tthis.onConnectionHandlers.forEach((cb) => cb(true));\n\t\t}\n\n\t\tthis._waitForFirstConnectionPromise.resolve();\n\t}\n\n\t/**\n\t * Checks if running in ioBroker cloud\n\t */\n\tstatic isCloud(): boolean {\n\t\tif (\n\t\t\twindow.location.hostname.includes(\"amazonaws.com\") ||\n\t\t\twindow.location.hostname.includes(\"iobroker.in\")\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t\tif (typeof window.socketUrl === \"undefined\") {\n\t\t\treturn false;\n\t\t}\n\t\treturn (\n\t\t\twindow.socketUrl.includes(\"iobroker.in\") ||\n\t\t\twindow.socketUrl.includes(\"amazonaws\")\n\t\t);\n\t}\n\n\t/**\n\t * Checks if the socket is connected.\n\t * @returns true if connected.\n\t */\n\tisConnected(): boolean {\n\t\treturn this.connected;\n\t}\n\n\t/**\n\t * Returns a promise which is resolved when the socket is connected.\n\t */\n\twaitForFirstConnection(): Promise<void> {\n\t\treturn this._waitForFirstConnectionPromise;\n\t}\n\n\t/**\n\t * Called internally.\n\t */\n\tprivate async getUserPermissions(): Promise<any> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\"getUserPermissions\", (err, acl) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(acl!);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/** Loads the important data and retries a couple of times if it takes too long */\n\tprivate async loadData(): Promise<void> {\n\t\tif (this.loaded) return;\n\t\tconst maxAttempts = 10;\n\t\tfor (let i = 1; i <= maxAttempts; i++) {\n\t\t\tthis.doLoadData();\n\t\t\tif (this.loaded) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// give more time via remote connection\n\t\t\tawait wait(Connection.isCloud() ? 5000 : 1000);\n\t\t}\n\t}\n\n\t/**\n\t * Called after the socket is connected. Loads the necessary data.\n\t */\n\tprivate async doLoadData() {\n\t\tif (this.loaded) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Load ACL if not disabled\n\t\tif (!this.props.doNotLoadACL) {\n\t\t\ttry {\n\t\t\t\tthis.acl = await this.getUserPermissions();\n\t\t\t} catch (e) {\n\t\t\t\tthis.onError(`Cannot read user permissions: ${e}`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Load system config if not disabled\n\t\ttry {\n\t\t\tif (\n\t\t\t\tthis.props.admin5only &&\n\t\t\t\t!Connection.isWeb() &&\n\t\t\t\t(!window.vendorPrefix ||\n\t\t\t\t\twindow.vendorPrefix === \"@@vendorPrefix@@\")\n\t\t\t) {\n\t\t\t\tthis._systemConfig = await this.getCompactSystemConfig();\n\t\t\t} else {\n\t\t\t\tthis._systemConfig = await this.getSystemConfig();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthis.onError(`Cannot read system config: ${e}`);\n\t\t\treturn;\n\t\t}\n\n\t\t// Detect the system language\n\t\tthis.systemLang = this._systemConfig.common?.language;\n\t\tif (!this.systemLang) {\n\t\t\tthis.systemLang = (window.navigator.userLanguage ||\n\t\t\t\twindow.navigator.language) as any;\n\t\t\t// Browsers may report languages like \"de-DE\", \"en-US\", etc.\n\t\t\t// ioBroker expects \"de\", \"en\", ...\n\t\t\tif (/^(en|de|ru|pt|nl|fr|it|es|pl|uk)-?/.test(this.systemLang)) {\n\t\t\t\tthis.systemLang = this.systemLang.substr(0, 2) as any;\n\t\t\t} else if (\n\t\t\t\t!/^(en|de|ru|pt|nl|fr|it|es|pl|uk|zh-cn)$/.test(this.systemLang)\n\t\t\t) {\n\t\t\t\tthis.systemLang = \"en\";\n\t\t\t}\n\t\t\tthis._systemConfig.common.language = this.systemLang;\n\t\t}\n\t\tthis.props.onLanguage?.(this.systemLang);\n\n\t\t// We are now connected\n\t\tthis.loaded = true;\n\t\tthis.props.onProgress?.(PROGRESS.CONNECTED);\n\t\tthis.firstConnect = false;\n\n\t\t// Load all objects if desired\n\t\tif (!this.props.doNotLoadAllObjects) {\n\t\t\tthis.objects = await this.getObjects();\n\t\t} else if (this.props.admin5only) {\n\t\t\tthis.objects = {};\n\t\t} else {\n\t\t\tthis.objects = { \"system.config\": this._systemConfig };\n\t\t}\n\n\t\tthis.props.onProgress?.(PROGRESS.READY);\n\t\tif (!this.onReadyDone) {\n\t\t\tthis.onReadyDone = true;\n\t\t\tthis.props.onReady?.(this.objects);\n\t\t}\n\t}\n\n\t/**\n\t * Called internally.\n\t */\n\tprivate authenticate() {\n\t\tif (window.location.search.includes(\"&href=\")) {\n\t\t\twindow.location.href = `${window.location.protocol}//${window.location.host}${window.location.pathname}${window.location.search}${window.location.hash}`;\n\t\t} else {\n\t\t\twindow.location.href = `${window.location.protocol}//${window.location.host}${window.location.pathname}?login&href=${window.location.search}${window.location.hash}`;\n\t\t}\n\t}\n\n\t/**\n\t * Subscribe to the changes of the given state.\n\t * In compare to the subscribeObject method,\n\t * this method calls the handler with the current state value immediately after subscribing.\n\t * @param id The ioBroker state ID or array of state IDs.\n\t * @param binary Set to true if the given state is binary and requires Base64 decoding.\n\t * @param cb The callback.\n\t */\n\tsubscribeState(\n\t\tid: string | string[],\n\t\tbinary: true,\n\t\tcb: BinaryStateChangeHandler,\n\t): Promise<void>;\n\n\tsubscribeState(\n\t\tid: string | string[],\n\t\tbinary: false,\n\t\tcb: ioBroker.StateChangeHandler,\n\t): Promise<void>;\n\n\tsubscribeState(\n\t\tid: string | string[],\n\t\tcb: ioBroker.StateChangeHandler,\n\t): Promise<void>;\n\n\tasync subscribeState(\n\t\t...args:\n\t\t\t| [\n\t\t\t\t\tid: string | string[],\n\t\t\t\t\tbinary: true,\n\t\t\t\t\tcb: BinaryStateChangeHandler,\n\t\t\t  ]\n\t\t\t| [\n\t\t\t\t\tid: string | string[],\n\t\t\t\t\tbinary: false,\n\t\t\t\t\tcb: ioBroker.StateChangeHandler,\n\t\t\t  ]\n\t\t\t| [id: string | string[], cb: ioBroker.StateChangeHandler]\n\t): Promise<void> {\n\t\tlet id: string | string[];\n\t\tlet binary: boolean;\n\t\tlet cb: ioBroker.StateChangeHandler | BinaryStateChangeHandler;\n\t\tif (args.length === 3) {\n\t\t\t[id, binary, cb] = args;\n\t\t} else {\n\t\t\t[id, cb] = args;\n\t\t\tbinary = false;\n\t\t}\n\t\tlet ids: string[];\n\t\tif (!Array.isArray(id)) {\n\t\t\tids = [id];\n\t\t} else {\n\t\t\tids = id;\n\t\t}\n\n\t\tif (typeof cb !== \"function\") {\n\t\t\tthrow new Error(\"The state change handler must be a function!\");\n\t\t}\n\t\tconst toSubscribe: string[] = [];\n\t\tfor (let i = 0; i < ids.length; i++) {\n\t\t\tconst _id = ids[i];\n\t\t\tif (!this.statesSubscribes[_id]) {\n\t\t\t\tthis.statesSubscribes[_id] = {\n\t\t\t\t\treg: new RegExp(pattern2RegEx(_id)),\n\t\t\t\t\tcbs: [cb],\n\t\t\t\t};\n\t\t\t\tif (id !== this.ignoreState) {\n\t\t\t\t\ttoSubscribe.push(_id);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t!this.statesSubscribes[_id].cbs.includes(cb) &&\n\t\t\t\t\tthis.statesSubscribes[_id].cbs.push(cb);\n\t\t\t}\n\t\t}\n\n\t\tif (!this.connected) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (toSubscribe.length) {\n\t\t\t// no answer from server required\n\t\t\tthis._socket.emit(\"subscribe\", toSubscribe);\n\t\t}\n\n\t\t// Try to get the current value(s) of the state(s) and call the change handlers\n\t\tif (binary) {\n\t\t\tlet base64: string | undefined;\n\t\t\tfor (let i = 0; i < ids.length; i++) {\n\t\t\t\ttry {\n\t\t\t\t\tbase64 = await this.getBinaryState(ids[i]);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t`Cannot getBinaryState \"${ids[i]}\": ${JSON.stringify(e)}`,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (base64 != undefined) {\n\t\t\t\t\t(cb as BinaryStateChangeHandler)(ids[i], base64);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (ids.find((_id) => _id.includes(\"*\"))) {\n\t\t\tlet states: Record<string, ioBroker.State> | undefined;\n\t\t\tfor (let i = 0; i < ids.length; i++) {\n\t\t\t\ttry {\n\t\t\t\t\tstates = await this.getForeignStates(ids[i]);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t`Cannot getForeignStates \"${ids[i]}\": ${JSON.stringify(e)}`,\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (states) {\n\t\t\t\t\tfor (const [id, state] of Object.entries(states)) {\n\t\t\t\t\t\t(cb as ioBroker.StateChangeHandler)(id, state);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\ttry {\n\t\t\t\tconst states = await (Connection.isWeb()\n\t\t\t\t\t? this.getStates(ids)\n\t\t\t\t\t: this.getForeignStates(ids));\n\t\t\t\tif (states) {\n\t\t\t\t\tfor (const [id, state] of Object.entries(states)) {\n\t\t\t\t\t\t(cb as ioBroker.StateChangeHandler)(id, state);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\n\t\t\t\t\t`Cannot getState \"${ids.join(\", \")}\": ${e.message}`,\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Subscribe to the changes of the given state and wait for answer.\n\t * @param id The ioBroker state ID.\n\t * @param cb The callback.\n\t */\n\tasync subscribeStateAsync(\n\t\tid: string | string[],\n\t\tcb: ioBroker.StateChangeHandler,\n\t): Promise<void> {\n\t\treturn this.subscribeState(id, cb);\n\t}\n\n\t/**\n\t * Unsubscribes the given callback from changes of the given state.\n\t * @param id The ioBroker state ID or array of state IDs.\n\t * @param cb The callback.\n\t */\n\tunsubscribeState(\n\t\tid: string | string[],\n\t\tcb?: ioBroker.StateChangeHandler,\n\t): void {\n\t\tlet ids: string[];\n\t\tif (!Array.isArray(id)) {\n\t\t\tids = [id];\n\t\t} else {\n\t\t\tids = id;\n\t\t}\n\t\tconst toUnsubscribe = [];\n\t\tfor (let i = 0; i < ids.length; i++) {\n\t\t\tconst _id = ids[i];\n\n\t\t\tif (this.statesSubscribes[_id]) {\n\t\t\t\tconst sub = this.statesSubscribes[_id];\n\t\t\t\tif (cb) {\n\t\t\t\t\tconst pos = sub.cbs.indexOf(cb);\n\t\t\t\t\tpos !== -1 && sub.cbs.splice(pos, 1);\n\t\t\t\t} else {\n\t\t\t\t\tsub.cbs = [];\n\t\t\t\t}\n\n\t\t\t\tif (!sub.cbs?.length) {\n\t\t\t\t\tdelete this.statesSubscribes[_id];\n\t\t\t\t\tif (_id !== this.ignoreState) {\n\t\t\t\t\t\ttoUnsubscribe.push(_id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.connected && toUnsubscribe.length) {\n\t\t\tthis._socket.emit(\"unsubscribe\", ids);\n\t\t}\n\t}\n\n\t/**\n\t * Subscribe to changes of the given object.\n\t * In compare to the subscribeState method,\n\t * this method does not call the handler with the current value immediately after subscribe.\n\t *\n\t * the current value.\n\t * @param id The ioBroker object ID.\n\t * @param cb The callback.\n\t */\n\tsubscribeObject(\n\t\tid: string | string[],\n\t\tcb: ObjectChangeHandler,\n\t): Promise<void> {\n\t\tlet ids: string[];\n\t\tif (!Array.isArray(id)) {\n\t\t\tids = [id];\n\t\t} else {\n\t\t\tids = id;\n\t\t}\n\n\t\tif (typeof cb !== \"function\") {\n\t\t\tthrow new Error(\"The object change handler must be a function!\");\n\t\t}\n\n\t\tconst toSubscribe: string[] = [];\n\t\tfor (let i = 0; i < ids.length; i++) {\n\t\t\tconst _id = ids[i];\n\t\t\tif (!this.objectsSubscribes[_id]) {\n\t\t\t\tthis.objectsSubscribes[_id] = {\n\t\t\t\t\treg: new RegExp(pattern2RegEx(_id)),\n\t\t\t\t\tcbs: [cb],\n\t\t\t\t};\n\t\t\t\ttoSubscribe.push(_id);\n\t\t\t} else {\n\t\t\t\t!this.objectsSubscribes[_id].cbs.includes(cb) &&\n\t\t\t\t\tthis.objectsSubscribes[_id].cbs.push(cb);\n\t\t\t}\n\t\t}\n\n\t\tif (this.connected && toSubscribe.length) {\n\t\t\tthis._socket.emit(\"subscribeObjects\", toSubscribe);\n\t\t}\n\n\t\treturn Promise.resolve();\n\t}\n\n\t/**\n\t * Unsubscribes all callbacks from changes of the given object.\n\t * @param id The ioBroker object ID.\n\t */\n\t/**\n\t * Unsubscribes the given callback from changes of the given object.\n\t * @param id The ioBroker object ID.\n\t * @param cb The callback.\n\t */\n\tunsubscribeObject(\n\t\tid: string | string[],\n\t\tcb?: ObjectChangeHandler,\n\t): Promise<void> {\n\t\tlet ids: string[];\n\t\tif (!Array.isArray(id)) {\n\t\t\tids = [id];\n\t\t} else {\n\t\t\tids = id;\n\t\t}\n\t\tconst toUnsubscribe: string[] = [];\n\t\tfor (let i = 0; i < ids.length; i++) {\n\t\t\tconst _id = ids[i];\n\t\t\tif (this.objectsSubscribes[_id]) {\n\t\t\t\tconst sub = this.objectsSubscribes[_id];\n\t\t\t\tif (cb) {\n\t\t\t\t\tconst pos = sub.cbs.indexOf(cb);\n\t\t\t\t\tpos !== -1 && sub.cbs.splice(pos, 1);\n\t\t\t\t} else {\n\t\t\t\t\tsub.cbs = [];\n\t\t\t\t}\n\n\t\t\t\tif (!sub.cbs?.length) {\n\t\t\t\t\tdelete this.objectsSubscribes[_id];\n\t\t\t\t\ttoUnsubscribe.push(_id);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.connected && toUnsubscribe.length) {\n\t\t\tthis._socket.emit(\"unsubscribeObjects\", toUnsubscribe);\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\n\t/**\n\t * Called internally.\n\t * @param id\n\t * @param obj\n\t */\n\tprivate objectChange(id: string, obj: ioBroker.Object | null | undefined) {\n\t\t// update main.objects cache\n\n\t\t// Remember the id and type of th old object\n\t\tlet oldObj: OldObject | undefined;\n\t\tif (this.objects[id]) {\n\t\t\toldObj = { _id: id, type: this.objects[id].type };\n\t\t}\n\n\t\tlet changed = false;\n\t\tif (obj) {\n\t\t\t// The object was added, updated or changed\n\n\t\t\t// Copy the _rev property (whatever that is)\n\t\t\tif ((obj as any)._rev && this.objects[id]) {\n\t\t\t\t(this.objects[id] as any)._rev = (obj as any)._rev;\n\t\t\t}\n\n\t\t\t// Detect if there was a change\n\t\t\tif (\n\t\t\t\t!this.objects[id] ||\n\t\t\t\tJSON.stringify(this.objects[id]) !== JSON.stringify(obj)\n\t\t\t) {\n\t\t\t\tthis.objects[id] = obj;\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t} else if (this.objects[id]) {\n\t\t\t// The object was deleted\n\t\t\tdelete this.objects[id];\n\t\t\tchanged = true;\n\t\t}\n\n\t\t// Notify all subscribed listeners\n\t\tfor (const [_id, sub] of Object.entries(this.objectsSubscribes)) {\n\t\t\tif (_id === id || sub.reg.test(id)) {\n\t\t\t\tsub.cbs.forEach((cb) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tcb(id, obj, oldObj);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t`Error by callback of objectChange: ${e}`,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// Notify the default listener on change\n\t\tif (changed) this.props.onObjectChange?.(id, obj);\n\t}\n\n\t/**\n\t * Called internally.\n\t * @param id\n\t * @param state\n\t */\n\tprivate stateChange(id: string, state: ioBroker.State | null | undefined) {\n\t\tfor (const sub of Object.values(this.statesSubscribes)) {\n\t\t\tif (sub.reg.test(id)) {\n\t\t\t\tfor (const cb of sub.cbs) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// TODO: This might not be correct - check what happens if state is a binary state\n\t\t\t\t\t\tcb(id, (state ?? null) as any);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t`Error by callback of stateChanged: ${e}`,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Called internally.\n\t * @param messageType\n\t * @param sourceInstance\n\t * @param data\n\t */\n\tprivate instanceMessage(\n\t\tmessageType: string,\n\t\tsourceInstance: string,\n\t\tdata: any,\n\t) {\n\t\tthis._instanceSubscriptions[sourceInstance]?.forEach((sub) => {\n\t\t\tif (sub.messageType === messageType) {\n\t\t\t\tsub.callback(data, sourceInstance, messageType);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Called internally.\n\t * @param id\n\t * @param fileName\n\t * @param size\n\t */\n\tprivate fileChange(id: string, fileName: string, size: number | null) {\n\t\tfor (const sub of Object.values(this.filesSubscribes)) {\n\t\t\tif (sub.regId.test(id) && sub.regFilePattern.test(fileName)) {\n\t\t\t\tfor (const cb of sub.cbs) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tcb(id, fileName, size);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error(`Error by callback of fileChange: ${e}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Subscribe to changes of the files.\n\t * @param id The ioBroker state ID for a \"meta\" object. Could be a pattern\n\t * @param filePattern Pattern or file name, like 'main/*' or 'main/visViews.json`\n\t * @param cb The callback.\n\t */\n\tasync subscribeFiles(\n\t\tid: string,\n\t\tfilePattern: string | string[],\n\t\tcb: FileChangeHandler,\n\t): Promise<void> {\n\t\tif (typeof cb !== \"function\") {\n\t\t\tthrow new Error(\"The state change handler must be a function!\");\n\t\t}\n\n\t\tlet filePatterns: string[];\n\t\tif (Array.isArray(filePattern)) {\n\t\t\tfilePatterns = filePattern;\n\t\t} else {\n\t\t\tfilePatterns = [filePattern];\n\t\t}\n\n\t\tconst toSubscribe = [];\n\t\tfor (let f = 0; f < filePatterns.length; f++) {\n\t\t\tconst pattern = filePatterns[f];\n\t\t\tconst key = `${id}$%$${pattern}`;\n\n\t\t\tif (!this.filesSubscribes[key]) {\n\t\t\t\tthis.filesSubscribes[key] = {\n\t\t\t\t\tregId: new RegExp(pattern2RegEx(id)),\n\t\t\t\t\tregFilePattern: new RegExp(pattern2RegEx(pattern)),\n\t\t\t\t\tcbs: [cb],\n\t\t\t\t};\n\t\t\t\ttoSubscribe.push(pattern);\n\t\t\t} else {\n\t\t\t\t!this.filesSubscribes[key].cbs.includes(cb) &&\n\t\t\t\t\tthis.filesSubscribes[key].cbs.push(cb);\n\t\t\t}\n\t\t}\n\t\tif (this.connected && toSubscribe.length) {\n\t\t\tthis._socket.emit(\"subscribeFiles\", id, toSubscribe);\n\t\t}\n\t}\n\n\t/**\n\t * Unsubscribes the given callback from changes of files.\n\t * @param id The ioBroker state ID.\n\t * @param filePattern Pattern or file name, like 'main/*' or 'main/visViews.json`\n\t * @param cb The callback.\n\t */\n\tunsubscribeFiles(\n\t\tid: string,\n\t\tfilePattern: string | string[],\n\t\tcb?: FileChangeHandler,\n\t): void {\n\t\tlet filePatterns: string[];\n\t\tif (Array.isArray(filePattern)) {\n\t\t\tfilePatterns = filePattern;\n\t\t} else {\n\t\t\tfilePatterns = [filePattern];\n\t\t}\n\t\tconst toUnsubscribe = [];\n\t\tfor (let f = 0; f < filePatterns.length; f++) {\n\t\t\tconst pattern = filePatterns[f];\n\t\t\tconst key = `${id}$%$${pattern}`;\n\t\t\tif (this.filesSubscribes[key]) {\n\t\t\t\tconst sub = this.filesSubscribes[key];\n\t\t\t\tif (cb) {\n\t\t\t\t\tconst pos = sub.cbs.indexOf(cb);\n\t\t\t\t\tpos !== -1 && sub.cbs.splice(pos, 1);\n\t\t\t\t} else {\n\t\t\t\t\tsub.cbs = [];\n\t\t\t\t}\n\n\t\t\t\tif (!sub.cbs?.length) {\n\t\t\t\t\tdelete this.filesSubscribes[key];\n\t\t\t\t\ttoUnsubscribe.push(pattern);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.connected && toUnsubscribe.length) {\n\t\t\tthis._socket.emit(\"unsubscribeFiles\", id, toUnsubscribe);\n\t\t}\n\t}\n\n\t/** Requests data from the server or reads it from the cache */\n\tprotected async request<T>({\n\t\tcacheKey,\n\t\tforceUpdate,\n\t\tcommandTimeout,\n\t\tonTimeout,\n\t\trequireAdmin,\n\t\trequireFeatures,\n\t\t// requestName,\n\t\texecutor,\n\t}: RequestOptions<T>): Promise<T> {\n\t\t// TODO: mention requestName in errors\n\n\t\t// If the command requires the admin adapter, enforce it\n\t\tif (requireAdmin && Connection.isWeb()) {\n\t\t\treturn Promise.reject(ERRORS.NOT_ADMIN);\n\t\t}\n\n\t\t// Return the cached value if allowed\n\t\tif (cacheKey && !forceUpdate && cacheKey in this._promises) {\n\t\t\treturn this._promises[cacheKey];\n\t\t}\n\n\t\t// Require the socket to be connected\n\t\tif (!this.connected) {\n\t\t\treturn Promise.reject(ERRORS.NOT_CONNECTED);\n\t\t}\n\n\t\t// Check if all required features are supported\n\t\tif (requireFeatures?.length) {\n\t\t\tfor (const feature of requireFeatures) {\n\t\t\t\tif (!(await this.checkFeatureSupported(feature))) {\n\t\t\t\t\tthrow ERRORS.NOT_SUPPORTED;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst promise = new Promise<T>(async (resolve, reject) => {\n\t\t\tconst timeoutControl = {\n\t\t\t\telapsed: false,\n\t\t\t\tclearTimeout: () => {\n\t\t\t\t\t// no-op unless there is a timeout\n\t\t\t\t},\n\t\t\t};\n\t\t\tlet timeout: NodeJS.Timeout | undefined;\n\t\t\tif (commandTimeout !== false) {\n\t\t\t\ttimeout = setTimeout(() => {\n\t\t\t\t\ttimeoutControl.elapsed = true;\n\t\t\t\t\t// Let the caller know that the timeout elapsed\n\t\t\t\t\tonTimeout?.();\n\t\t\t\t\treject(ERRORS.TIMEOUT);\n\t\t\t\t}, commandTimeout ?? this.props.cmdTimeout);\n\t\t\t\ttimeoutControl.clearTimeout = () => {\n\t\t\t\t\tclearTimeout(timeout!);\n\t\t\t\t};\n\t\t\t}\n\t\t\t// Call the actual function - awaiting it allows us to catch sync and async errors\n\t\t\t// no matter if the executor is async or not\n\t\t\ttry {\n\t\t\t\tawait executor(resolve, reject, timeoutControl);\n\t\t\t} catch (e) {\n\t\t\t\treject(e);\n\t\t\t}\n\t\t});\n\t\tif (cacheKey) {\n\t\t\tthis._promises[cacheKey] = promise;\n\t\t}\n\t\treturn promise;\n\t}\n\n\t/**\n\t * Deletes cached promise.\n\t * So next time the information will be requested anew\n\t */\n\tresetCache(key: string, isAll?: boolean): void {\n\t\tif (isAll) {\n\t\t\tObject.keys(this._promises)\n\t\t\t\t.filter((k) => k.startsWith(key))\n\t\t\t\t.forEach((k) => {\n\t\t\t\t\tdelete this._promises[k];\n\t\t\t\t});\n\t\t} else {\n\t\t\tdelete this._promises[key];\n\t\t}\n\t}\n\n\t/**\n\t * Gets all states.\n\t * @param pattern Pattern of states or array of IDs\n\t */\n\tgetStates(\n\t\tpattern?: string | string[],\n\t): Promise<Record<string, ioBroker.State>> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\"getStates\", pattern, (err, res) => {\n\t\t\t\t\tthis.states = res ?? {};\n\n\t\t\t\t\t// if (!disableProgressUpdate) {\n\t\t\t\t\t// \tthis.props.onProgress?.(PROGRESS.STATES_LOADED);\n\t\t\t\t\t// }\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(this.states);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Gets the given state.\n\t * @param id The state ID.\n\t */\n\tgetState(id: string): Promise<ioBroker.State | null | undefined> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tif (id && id === this.ignoreState) {\n\t\t\t\t\tresolve(this.simStates[id] || { val: null, ack: true });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._socket.emit(\"getState\", id, (err, state) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(state);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Gets the given binary state Base64 encoded.\n\t * @deprecated since js-controller 5.0. Use files instead.\n\t * @param id The state ID.\n\t */\n\tgetBinaryState(id: string): Promise<string | undefined> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\"getBinaryState\", id, (err, state) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(state);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Sets the given binary state.\n\t * @deprecated since js-controller 5.0. Use files instead.\n\t * @param id The state ID.\n\t * @param base64 The Base64 encoded binary data.\n\t */\n\tsetBinaryState(id: string, base64: string): Promise<void> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\"setBinaryState\", id, base64, (err) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Sets the given state value.\n\t * @param id The state ID.\n\t * @param val The state value.\n\t * @param ack Acknowledgement flag.\n\t */\n\tsetState(\n\t\tid: string,\n\t\tval: ioBroker.State | ioBroker.StateValue | ioBroker.SettableState,\n\t\tack?: boolean,\n\t): Promise<void> {\n\t\tif (typeof ack === \"boolean\") {\n\t\t\tval = { val: val as ioBroker.StateValue, ack };\n\t\t}\n\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\t// extra handling for \"nothing_selected\" state for vis\n\t\t\t\tif (id && id === this.ignoreState) {\n\t\t\t\t\tlet state: ioBroker.State;\n\n\t\t\t\t\tif (typeof ack === \"boolean\") {\n\t\t\t\t\t\tstate = val as ioBroker.State;\n\t\t\t\t\t} else if (\n\t\t\t\t\t\ttypeof val === \"object\" &&\n\t\t\t\t\t\t(val as ioBroker.State).val !== undefined\n\t\t\t\t\t) {\n\t\t\t\t\t\tstate = val as ioBroker.State;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstate = {\n\t\t\t\t\t\t\tval: val as ioBroker.StateValue,\n\t\t\t\t\t\t\tack: false,\n\t\t\t\t\t\t\tts: Date.now(),\n\t\t\t\t\t\t\tlc: Date.now(),\n\t\t\t\t\t\t\tfrom: \"system.adapter.vis.0\",\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.simStates[id] = state;\n\n\t\t\t\t\t// inform subscribers about changes\n\t\t\t\t\tif (this.statesSubscribes[id]) {\n\t\t\t\t\t\tfor (const cb of this.statesSubscribes[id].cbs) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tcb(id, state as any);\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Error by callback of stateChanged: ${e}`,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._socket.emit(\"setState\", id, val, (err) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Gets all objects.\n\t * @param update Callback that is executed when all objects are retrieved.\n\t */\n\t/**\n\t * Gets all objects.\n\t * @param update Set to true to retrieve all objects from the server (instead of using the local cache).\n\t * @param disableProgressUpdate don't call onProgress() when done\n\t */\n\tgetObjects(\n\t\tupdate?: boolean,\n\t\tdisableProgressUpdate?: boolean,\n\t): Promise<Record<string, ioBroker.Object>> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tif (!update && this.objects) {\n\t\t\t\t\tresolve(this.objects);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\tConnection.isWeb() ? \"getObjects\" : \"getAllObjects\",\n\t\t\t\t\t(err, res) => {\n\t\t\t\t\t\tif (!disableProgressUpdate) {\n\t\t\t\t\t\t\tthis.props.onProgress?.(PROGRESS.OBJECTS_LOADED);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.objects = res ?? {};\n\t\t\t\t\t\t\tresolve(this.objects);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Gets the list of objects by ID.\n\t * @param list array of IDs to retrieve\n\t */\n\tgetObjectsById(\n\t\tlist: string[],\n\t): Promise<Record<string, ioBroker.Object> | undefined> {\n\t\treturn this.request({\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\"getObjects\", list, (err, res) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(res);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Called internally.\n\t * @param isEnable\n\t */\n\tprivate _subscribe(isEnable: boolean) {\n\t\tif (isEnable && !this.subscribed) {\n\t\t\tthis.subscribed = true;\n\t\t\tif (this.props.autoSubscribes?.length) {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"subscribeObjects\",\n\t\t\t\t\tthis.props.autoSubscribes,\n\t\t\t\t);\n\t\t\t}\n\t\t\t// re subscribe objects\n\t\t\tconst ids = Object.keys(this.objectsSubscribes);\n\t\t\tif (ids.length) {\n\t\t\t\tthis._socket.emit(\"subscribeObjects\", ids);\n\t\t\t}\n\t\t\tObject.keys(this.objectsSubscribes).forEach((id) =>\n\t\t\t\tthis._socket.emit(\"subscribeObjects\", id),\n\t\t\t);\n\t\t\t// re-subscribe logs\n\t\t\tthis.props.autoSubscribeLog &&\n\t\t\t\tthis._socket.emit(\"requireLog\", true);\n\t\t\t// re subscribe states\n\t\t\tObject.keys(this.statesSubscribes).forEach((id) =>\n\t\t\t\tthis._socket.emit(\"subscribe\", id),\n\t\t\t);\n\t\t\t// re-subscribe files\n\t\t\tObject.keys(this.filesSubscribes).forEach((key) => {\n\t\t\t\tconst [id, filePattern] = key.split(\"$%$\");\n\t\t\t\tthis._socket.emit(\"subscribeFiles\", id, filePattern);\n\t\t\t});\n\t\t} else if (!isEnable && this.subscribed) {\n\t\t\tthis.subscribed = false;\n\t\t\t// un-subscribe objects\n\t\t\tif (this.props.autoSubscribes?.length) {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"unsubscribeObjects\",\n\t\t\t\t\tthis.props.autoSubscribes,\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst ids = Object.keys(this.objectsSubscribes);\n\t\t\tif (ids.length) {\n\t\t\t\tthis._socket.emit(\"unsubscribeObjects\", ids);\n\t\t\t}\n\t\t\t// un-subscribe logs\n\t\t\tthis.props.autoSubscribeLog &&\n\t\t\t\tthis._socket.emit(\"requireLog\", false);\n\n\t\t\t// un-subscribe states\n\t\t\tObject.keys(this.statesSubscribes).forEach((id) =>\n\t\t\t\tthis._socket.emit(\"unsubscribe\", id),\n\t\t\t);\n\t\t\t// re-subscribe files\n\t\t\tObject.keys(this.filesSubscribes).forEach((key) => {\n\t\t\t\tconst [id, filePattern] = key.split(\"$%$\");\n\t\t\t\tthis._socket.emit(\"unsubscribeFiles\", id, filePattern);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Requests log updates.\n\t * @param isEnabled Set to true to get logs.\n\t */\n\trequireLog(isEnabled: boolean): Promise<void> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\"requireLog\", isEnabled, (err) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Deletes the given object.\n\t * @param id The object ID.\n\t * @param maintenance Force deletion of non conform IDs.\n\t */\n\tdelObject(id: string, maintenance: boolean = false): Promise<void> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\"delObject\", id, { maintenance }, (err) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Deletes the given object and all its children.\n\t * @param id The object ID.\n\t * @param maintenance Force deletion of non conform IDs.\n\t */\n\tdelObjects(id: string, maintenance: boolean): Promise<void> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\"delObjects\", id, { maintenance }, (err) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Sets the object.\n\t * @param id The object ID.\n\t * @param obj The object.\n\t */\n\tsetObject(id: string, obj: ioBroker.SettableObject): Promise<void> {\n\t\tif (!obj) {\n\t\t\treturn Promise.reject(\"Null object is not allowed\");\n\t\t}\n\n\t\tobj = JSON.parse(JSON.stringify(obj));\n\t\tdelete obj.from;\n\t\tdelete obj.user;\n\t\tdelete obj.ts;\n\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\"setObject\", id, obj, (err) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Gets the object with the given id from the server.\n\t * @param id The object ID.\n\t * @returns The object.\n\t */\n\tgetObject<T extends string>(id: T): ioBroker.GetObjectPromise<T> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tif (id && id === this.ignoreState) {\n\t\t\t\t\tresolve({\n\t\t\t\t\t\t_id: this.ignoreState,\n\t\t\t\t\t\ttype: \"state\",\n\t\t\t\t\t\tcommon: {\n\t\t\t\t\t\t\tname: \"ignored state\",\n\t\t\t\t\t\t\ttype: \"mixed\",\n\t\t\t\t\t\t},\n\t\t\t\t\t} as any);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._socket.emit(\"getObject\", id, (err, obj) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(obj as any);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Sends a message to a specific instance or all instances of some specific adapter.\n\t * @param instance The instance to send this message to.\n\t * @param command Command name of the target instance.\n\t * @param data The message data to send.\n\t */\n\tsendTo<T = any>(instance: string, command: string, data?: any): Promise<T> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"sendTo\",\n\t\t\t\t\tinstance,\n\t\t\t\t\tcommand,\n\t\t\t\t\tdata,\n\t\t\t\t\t(result: any) => {\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Extend an object and create it if it might not exist.\n\t * @param id The id.\n\t * @param obj The object.\n\t */\n\textendObject(id: string, obj: ioBroker.PartialObject): Promise<void> {\n\t\tif (!obj) {\n\t\t\treturn Promise.reject(\"Null object is not allowed\");\n\t\t}\n\n\t\tobj = JSON.parse(JSON.stringify(obj));\n\t\tdelete obj.from;\n\t\tdelete obj.user;\n\t\tdelete obj.ts;\n\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\"extendObject\", id, obj, (err) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Register a handler for log messages.\n\t * @param handler The handler.\n\t */\n\tregisterLogHandler(handler: (message: string) => void): void {\n\t\tif (!this.onLogHandlers.includes(handler)) {\n\t\t\tthis.onLogHandlers.push(handler);\n\t\t}\n\t}\n\n\t/**\n\t * Unregister a handler for log messages.\n\t * @param handler The handler.\n\t */\n\tunregisterLogHandler(handler: (message: string) => void): void {\n\t\tconst pos = this.onLogHandlers.indexOf(handler);\n\t\tpos !== -1 && this.onLogHandlers.splice(pos, 1);\n\t}\n\n\t/**\n\t * Register a handler for the connection state.\n\t * @param handler The handler.\n\t */\n\tregisterConnectionHandler(handler: (connected: boolean) => void): void {\n\t\tif (!this.onConnectionHandlers.includes(handler)) {\n\t\t\tthis.onConnectionHandlers.push(handler);\n\t\t}\n\t}\n\n\t/**\n\t * Unregister a handler for the connection state.\n\t * @param handler The handler.\n\t */\n\tunregisterConnectionHandler(handler: (connected: boolean) => void): void {\n\t\tconst pos = this.onConnectionHandlers.indexOf(handler);\n\t\tpos !== -1 && this.onConnectionHandlers.splice(pos, 1);\n\t}\n\n\t/**\n\t * Set the handler for standard output of a command.\n\t * @param handler The handler.\n\t */\n\tregisterCmdStdoutHandler(\n\t\thandler: (id: string, text: string) => void,\n\t): void {\n\t\tthis.onCmdStdoutHandler = handler;\n\t}\n\n\t/**\n\t * Unset the handler for standard output of a command.\n\t */\n\tunregisterCmdStdoutHandler(): void {\n\t\tthis.onCmdStdoutHandler = undefined;\n\t}\n\n\t/**\n\t * Set the handler for standard error of a command.\n\t * @param handler The handler.\n\t */\n\tregisterCmdStderrHandler(\n\t\thandler: (id: string, text: string) => void,\n\t): void {\n\t\tthis.onCmdStderrHandler = handler;\n\t}\n\n\t/**\n\t * Unset the handler for standard error of a command.\n\t */\n\tunregisterCmdStderrHandler(): void {\n\t\tthis.onCmdStderrHandler = undefined;\n\t}\n\n\t/**\n\t * Set the handler for exit of a command.\n\t * @param handler The handler.\n\t */\n\tregisterCmdExitHandler(\n\t\thandler: (id: string, exitCode: number) => void,\n\t): void {\n\t\tthis.onCmdExitHandler = handler;\n\t}\n\n\t/**\n\t * Unset the handler for exit of a command.\n\t */\n\tunregisterCmdExitHandler(): void {\n\t\tthis.onCmdExitHandler = undefined;\n\t}\n\n\t/**\n\t * Get all enums with the given name.\n\t * @param _enum The name of the enum, like `rooms` or `functions`\n\t * @param update Force update.\n\t */\n\tgetEnums(\n\t\t_enum?: string,\n\t\tupdate?: boolean,\n\t): Promise<Record<string, ioBroker.EnumObject>> {\n\t\treturn this.request({\n\t\t\tcacheKey: `enums_${_enum || \"all\"}`,\n\t\t\tforceUpdate: update,\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"getObjectView\",\n\t\t\t\t\t\"system\",\n\t\t\t\t\t\"enum\",\n\t\t\t\t\t{\n\t\t\t\t\t\tstartkey: `enum.${_enum || \"\"}`,\n\t\t\t\t\t\tendkey: _enum ? `enum.${_enum}.\\u9999` : `enum.\\u9999`,\n\t\t\t\t\t},\n\t\t\t\t\t(err, res) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst _res: Record<string, ioBroker.EnumObject> =\n\t\t\t\t\t\t\t\t{};\n\t\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\t\tfor (let i = 0; i < res.rows.length; i++) {\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t_enum &&\n\t\t\t\t\t\t\t\t\t\tres.rows[i].id === `enum.${_enum}`\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t_res[res.rows[i].id] = res.rows[i]\n\t\t\t\t\t\t\t\t\t\t.value as ioBroker.EnumObject;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresolve(_res);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * @deprecated since version 1.1.15, cause parameter order does not match backend\n\t * Query a predefined object view.\n\t * @param start The start ID.\n\t * @param end The end ID.\n\t * @param type The type of object.\n\t */\n\tgetObjectView<T extends ioBroker.ObjectType>(\n\t\tstart: string,\n\t\tend: string,\n\t\ttype: T,\n\t): Promise<Record<string, ioBroker.AnyObject & { type: T }>> {\n\t\treturn this.getObjectViewCustom(\"system\", type, start, end);\n\t}\n\n\t/**\n\t * Query a predefined object view.\n\t * @param type The type of object.\n\t * @param start The start ID.\n\t * @param [end] The end ID.\n\t */\n\tgetObjectViewSystem<T extends ioBroker.ObjectType>(\n\t\ttype: T,\n\t\tstart: string,\n\t\tend?: string,\n\t): Promise<Record<string, ioBroker.AnyObject & { type: T }>> {\n\t\treturn this.getObjectViewCustom(\"system\", type, start, end);\n\t}\n\n\t/**\n\t * Query a predefined object view.\n\t * @param design design - 'system' or other designs like `custom`.\n\t * @param type The type of object.\n\t * @param start The start ID.\n\t * @param [end] The end ID.\n\t */\n\tgetObjectViewCustom<T extends ioBroker.ObjectType>(\n\t\tdesign: string,\n\t\ttype: T,\n\t\tstart: string,\n\t\tend?: string,\n\t): Promise<Record<string, ioBroker.AnyObject & { type: T }>> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tstart = start || \"\";\n\t\t\t\tend = end || \"\\u9999\";\n\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"getObjectView\",\n\t\t\t\t\tdesign,\n\t\t\t\t\ttype,\n\t\t\t\t\t{ startkey: start, endkey: end },\n\t\t\t\t\t(err, res) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst _res: Record<\n\t\t\t\t\t\t\t\tstring,\n\t\t\t\t\t\t\t\tioBroker.AnyObject & { type: T }\n\t\t\t\t\t\t\t> = {};\n\t\t\t\t\t\t\tif (res && res.rows) {\n\t\t\t\t\t\t\t\tfor (let i = 0; i < res.rows.length; i++) {\n\t\t\t\t\t\t\t\t\t_res[res.rows[i].id] = res.rows[i]\n\t\t\t\t\t\t\t\t\t\t.value as any;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresolve(_res);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Read the meta items.\n\t */\n\treadMetaItems(): Promise<ioBroker.Object[]> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"getObjectView\",\n\t\t\t\t\t\"system\",\n\t\t\t\t\t\"meta\",\n\t\t\t\t\t{ startkey: \"\", endkey: \"\\u9999\" },\n\t\t\t\t\t(err, objs) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\tobjs!.rows\n\t\t\t\t\t\t\t\t\t?.map((obj) => obj.value)\n\t\t\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t\t\t(val): val is ioBroker.Object => !!val,\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Read the directory of an adapter.\n\t * @param namespace (this may be the adapter name, the instance name or the name of a storage object within the adapter).\n\t * @param path The directory name.\n\t */\n\treadDir(\n\t\tnamespace: string | null,\n\t\tpath: string,\n\t): Promise<ioBroker.ReadDirResult[]> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\"readDir\", namespace, path, (err, files) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(files!);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Read a file of an adapter.\n\t * @param namespace (this may be the adapter name, the instance name or the name of a storage object within the adapter).\n\t * @param fileName The file name.\n\t * @param base64 If it must be a base64 format\n\t */\n\treadFile(\n\t\tnamespace: string | null,\n\t\tfileName: string,\n\t\tbase64?: boolean,\n\t): Promise<{ file: string; mimeType: string }> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\tbase64 ? \"readFile64\" : \"readFile\",\n\t\t\t\t\tnamespace,\n\t\t\t\t\tfileName,\n\t\t\t\t\t(err, data, type) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve({ file: data as string, mimeType: type! });\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Write a file of an adapter.\n\t * @param namespace (this may be the adapter name, the instance name or the name of a storage object within the adapter).\n\t * @param fileName The file name.\n\t * @param data The data (if it's a Buffer, it will be converted to Base64).\n\t */\n\twriteFile64(\n\t\tnamespace: string,\n\t\tfileName: string,\n\t\tdata: Buffer | string,\n\t): Promise<void> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tif (typeof data === \"string\") {\n\t\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\t\"writeFile\",\n\t\t\t\t\t\tnamespace,\n\t\t\t\t\t\tfileName,\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\t(err) => {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tconst base64 = btoa(\n\t\t\t\t\t\tnew Uint8Array(data).reduce(\n\t\t\t\t\t\t\t(data, byte) => data + String.fromCharCode(byte),\n\t\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\n\t\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\t\"writeFile64\",\n\t\t\t\t\t\tnamespace,\n\t\t\t\t\t\tfileName,\n\t\t\t\t\t\tbase64,\n\t\t\t\t\t\t(err) => {\n\t\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Delete a file of an adapter.\n\t * @param namespace (this may be the adapter name, the instance name or the name of a storage object within the adapter).\n\t * @param fileName The file name.\n\t */\n\tdeleteFile(namespace: string, fileName: string): Promise<void> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\"deleteFile\", namespace, fileName, (err) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Delete a folder of an adapter.\n\t * @param namespace (this may be the adapter name, the instance name or the name of a storage object within the adapter).\n\t * @param folderName The folder name.\n\t */\n\tdeleteFolder(namespace: string, folderName: string): Promise<void> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"deleteFolder\",\n\t\t\t\t\tnamespace,\n\t\t\t\t\tfolderName,\n\t\t\t\t\t(err) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Rename file or folder in ioBroker DB\n\t * @param namespace (this may be the adapter name, the instance name or the name of a storage object within the adapter).\n\t * @param oldName current file name, e.g., main/vis-views.json\n\t * @param newName new file name, e.g., main/vis-views-new.json\n\t */\n\trename(namespace: string, oldName: string, newName: string): Promise<void> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"rename\",\n\t\t\t\t\tnamespace,\n\t\t\t\t\toldName,\n\t\t\t\t\tnewName,\n\t\t\t\t\t(err) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Rename file in ioBroker DB\n\t * @param namespace (this may be the adapter name, the instance name or the name of a storage object within the adapter).\n\t * @param oldName current file name, e.g., main/vis-views.json\n\t * @param newName new file name, e.g., main/vis-views-new.json\n\t */\n\trenameFile(\n\t\tnamespace: string,\n\t\toldName: string,\n\t\tnewName: string,\n\t): Promise<void> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"renameFile\",\n\t\t\t\t\tnamespace,\n\t\t\t\t\toldName,\n\t\t\t\t\tnewName,\n\t\t\t\t\t(err) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Execute a command on a host.\n\t * @param host The host name.\n\t * @param cmd The command.\n\t * @param cmdId The command ID.\n\t * @param cmdTimeout Timeout of command in ms\n\t */\n\tcmdExec(\n\t\thost: string,\n\t\tcmd: string,\n\t\tcmdId: string,\n\t\tcmdTimeout?: number,\n\t): Promise<void> {\n\t\treturn this.request({\n\t\t\tcommandTimeout: cmdTimeout,\n\t\t\texecutor: (resolve, reject, timeout) => {\n\t\t\t\thost = normalizeHostId(host);\n\n\t\t\t\tthis._socket.emit(\"cmdExec\", host, cmdId, cmd, (err) => {\n\t\t\t\t\tif (timeout.elapsed) return;\n\t\t\t\t\ttimeout.clearTimeout();\n\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Gets the system configuration.\n\t * @param update Force update.\n\t */\n\tgetSystemConfig(update?: boolean): Promise<SystemConfig> {\n\t\treturn this.request({\n\t\t\tcacheKey: \"systemConfig\",\n\t\t\tforceUpdate: update,\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: async (resolve) => {\n\t\t\t\tlet systemConfig = await this.getObject(\"system.config\");\n\t\t\t\t(systemConfig as any) ??= {};\n\t\t\t\t(systemConfig as any).common ??= {};\n\t\t\t\t(systemConfig as any).native ??= {};\n\n\t\t\t\tresolve(systemConfig!);\n\t\t\t},\n\t\t});\n\t}\n\n\t// returns very optimized information for adapters to minimize connection load\n\tgetCompactSystemConfig(update?: boolean): Promise<SystemConfig> {\n\t\treturn this.request({\n\t\t\tcacheKey: \"systemConfigCommon\",\n\t\t\tforceUpdate: update,\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\trequireAdmin: true,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"getCompactSystemConfig\",\n\t\t\t\t\t(err, systemConfig) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t(systemConfig as any) ??= {};\n\t\t\t\t\t\t\t(systemConfig as any).common ??= {};\n\t\t\t\t\t\t\t(systemConfig as any).native ??= {};\n\t\t\t\t\t\t\tresolve(systemConfig!);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Read all states (which might not belong to this adapter) which match the given pattern.\n\t * @param pattern\n\t */\n\tgetForeignStates(\n\t\tpattern?: string | string[] | null | undefined,\n\t): ioBroker.GetStatesPromise {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"getForeignStates\",\n\t\t\t\t\tpattern || \"*\",\n\t\t\t\t\t(err, states) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(states ?? {});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get foreign objects by pattern, by specific type and resolve their enums.\n\t * @param pattern\n\t * @param type\n\t */\n\tgetForeignObjects<T extends ioBroker.ObjectType>(\n\t\tpattern: string | null | undefined,\n\t\ttype: T,\n\t): Promise<Record<string, ioBroker.AnyObject & { type: T }>> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"getForeignObjects\",\n\t\t\t\t\tpattern || \"*\",\n\t\t\t\t\ttype,\n\t\t\t\t\t(err, objects) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(objects as any);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Sets the system configuration.\n\t * @param obj\n\t */\n\tsetSystemConfig(\n\t\tobj: ioBroker.SettableObjectWorker<ioBroker.OtherObject>,\n\t): Promise<void> {\n\t\treturn this.setObject(\"system.config\", obj);\n\t}\n\n\t/**\n\t * Get the raw socket.io socket.\n\t */\n\tgetRawSocket(): any {\n\t\treturn this._socket;\n\t}\n\n\t/**\n\t * Get the history of a given state.\n\t * @param id\n\t * @param options\n\t */\n\tgetHistory(\n\t\tid: string,\n\t\toptions: ioBroker.GetHistoryOptions,\n\t): Promise<ioBroker.GetHistoryResult> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\"getHistory\", id, options, (err, values) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(values!);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get the history of a given state.\n\t * @param id\n\t * @param options\n\t */\n\tgetHistoryEx(\n\t\tid: string,\n\t\toptions: ioBroker.GetHistoryOptions,\n\t): Promise<{\n\t\tvalues: ioBroker.GetHistoryResult;\n\t\tsessionId: string;\n\t\tstepIgnore: number;\n\t}> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"getHistory\",\n\t\t\t\t\tid,\n\t\t\t\t\toptions,\n\t\t\t\t\t(err, values, stepIgnore, sessionId) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\tvalues: values!,\n\t\t\t\t\t\t\t\tsessionId: sessionId!,\n\t\t\t\t\t\t\t\t// TODO: WTF is up with the ignore thing?\n\t\t\t\t\t\t\t\tstepIgnore: stepIgnore!,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get the IP addresses of the given host.\n\t * @param host\n\t * @param update Force update.\n\t */\n\tgetIpAddresses(host: string, update?: boolean): Promise<string[]> {\n\t\thost = normalizeHostId(host);\n\t\treturn this.request({\n\t\t\tcacheKey: `IPs_${host}`,\n\t\t\tforceUpdate: update,\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: async (resolve) => {\n\t\t\t\tconst obj = await this.getObject(host);\n\t\t\t\tresolve(obj?.common.address ?? []);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Gets the version.\n\t */\n\tgetVersion(\n\t\tupdate?: boolean,\n\t): Promise<{ version: string; serverName: string }> {\n\t\treturn this.request({\n\t\t\tcacheKey: \"version\",\n\t\t\tforceUpdate: update,\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\"getVersion\", (err, version, serverName) => {\n\t\t\t\t\t// Old socket.io had no error parameter\n\t\t\t\t\tif (\n\t\t\t\t\t\terr &&\n\t\t\t\t\t\t!version &&\n\t\t\t\t\t\ttypeof err === \"string\" &&\n\t\t\t\t\t\terr.match(/\\d+\\.\\d+\\.\\d+/)\n\t\t\t\t\t) {\n\t\t\t\t\t\tresolve({ version: err, serverName: \"socketio\" });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\tversion: version!,\n\t\t\t\t\t\t\t\tserverName: serverName!,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Gets the web server name.\n\t */\n\tgetWebServerName(): Promise<string> {\n\t\treturn this.request({\n\t\t\tcacheKey: \"webName\",\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\"getAdapterName\", (err, name) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(name!);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Check if the file exists\n\t * @param adapter adapter name\n\t * @param filename file name with the full path. it could be like vis.0/*\n\t */\n\tfileExists(adapter: string, filename: string): Promise<boolean> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"fileExists\",\n\t\t\t\t\tadapter,\n\t\t\t\t\tfilename,\n\t\t\t\t\t(err, exists) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(!!exists);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Read current user\n\t */\n\tgetCurrentUser(): Promise<string> {\n\t\treturn this.request({\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve) => {\n\t\t\t\tthis._socket.emit(\"authEnabled\", (_isSecure, user) => {\n\t\t\t\t\tresolve(user);\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get uuid\n\t */\n\tgetUuid(): Promise<ioBroker.Object[]> {\n\t\treturn this.request({\n\t\t\tcacheKey: \"uuid\",\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: async (resolve) => {\n\t\t\t\tconst obj = await this.getObject(\"system.meta.uuid\");\n\t\t\t\tresolve(obj?.native?.uuid);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Checks if a given feature is supported.\n\t * @param feature The feature to check.\n\t * @param update Force update.\n\t */\n\tcheckFeatureSupported(feature: string, update?: boolean): Promise<any> {\n\t\treturn this.request({\n\t\t\tcacheKey: `supportedFeatures_${feature}`,\n\t\t\tforceUpdate: update,\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"checkFeatureSupported\",\n\t\t\t\t\tfeature,\n\t\t\t\t\t(err, features) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(features);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get all adapter instances.\n\t * @param update Force update.\n\t */\n\t/**\n\t * Get all instances of the given adapter.\n\t * @param adapter The name of the adapter.\n\t * @param update Force update.\n\t */\n\tgetAdapterInstances(\n\t\tadapter?: string | boolean,\n\t\tupdate?: boolean,\n\t): Promise<ioBroker.InstanceObject[]> {\n\t\tif (typeof adapter === \"boolean\") {\n\t\t\tupdate = adapter;\n\t\t\tadapter = \"\";\n\t\t}\n\t\tadapter = adapter || \"\";\n\n\t\treturn this.request({\n\t\t\tcacheKey: `instances_${adapter}`,\n\t\t\tforceUpdate: update,\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: async (resolve) => {\n\t\t\t\tconst startKey = adapter\n\t\t\t\t\t? `system.adapter.${adapter}.`\n\t\t\t\t\t: \"system.adapter.\";\n\t\t\t\tconst endKey = `${startKey}\\u9999`;\n\n\t\t\t\tconst instances = await this.getObjectViewSystem(\n\t\t\t\t\t\"instance\",\n\t\t\t\t\tstartKey,\n\t\t\t\t\tendKey,\n\t\t\t\t);\n\t\t\t\tconst instanceObjects = Object.values(instances);\n\t\t\t\tif (adapter) {\n\t\t\t\t\tresolve(\n\t\t\t\t\t\tinstanceObjects.filter(\n\t\t\t\t\t\t\t(o) => o.common.name === adapter,\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(instanceObjects);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get adapters with the given name.\n\t * @param adapter The name of the adapter.\n\t * @param update Force update.\n\t */\n\tgetAdapters(\n\t\tadapter?: string,\n\t\tupdate?: boolean,\n\t): Promise<ioBroker.AdapterObject[]> {\n\t\tif (typeof adapter === \"boolean\") {\n\t\t\tupdate = adapter;\n\t\t\tadapter = \"\";\n\t\t}\n\t\tadapter = adapter || \"\";\n\n\t\treturn this.request({\n\t\t\tcacheKey: `adapter_${adapter}`,\n\t\t\tforceUpdate: update,\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: async (resolve) => {\n\t\t\t\tconst adapters = await this.getObjectViewSystem(\n\t\t\t\t\t\"adapter\",\n\t\t\t\t\t`system.adapter.${adapter || \"\"}`,\n\t\t\t\t\t`system.adapter.${adapter || \"\\u9999\"}`,\n\t\t\t\t);\n\t\t\t\tconst adapterObjects = Object.values(adapters);\n\t\t\t\tif (adapter) {\n\t\t\t\t\tresolve(\n\t\t\t\t\t\tadapterObjects.filter((o) => o.common.name === adapter),\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(adapterObjects);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Get the list of all groups.\n\t * @param update Force update.\n\t */\n\tgetGroups(update?: boolean): Promise<ioBroker.GroupObject[]> {\n\t\treturn this.request({\n\t\t\tcacheKey: \"groups\",\n\t\t\tforceUpdate: update,\n\t\t\t// TODO: check if this should time out\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"getObjectView\",\n\t\t\t\t\t\"system\",\n\t\t\t\t\t\"group\",\n\t\t\t\t\t{\n\t\t\t\t\t\tstartkey: \"system.group.\",\n\t\t\t\t\t\tendkey: \"system.group.\\u9999\",\n\t\t\t\t\t},\n\t\t\t\t\t(err, doc) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\tgetObjectViewResultToArray<ioBroker.GroupObject>(\n\t\t\t\t\t\t\t\t\tdoc,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Logout current user\n\t */\n\tlogout(): Promise<string | null> {\n\t\treturn this.request({\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\"logout\", (err) => {\n\t\t\t\t\terr ? reject(err) : resolve(null);\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Subscribe on instance message\n\t * @param targetInstance instance, like 'cameras.0'\n\t * @param messageType message type like 'startCamera/cam3'\n\t * @param data optional data object\n\t * @param callback message handler\n\t */\n\tsubscribeOnInstance(\n\t\ttargetInstance: string,\n\t\tmessageType: string,\n\t\tdata: any | null,\n\t\tcallback: InstanceMessageCallback,\n\t): Promise<string | null> {\n\t\treturn this.request({\n\t\t\tcommandTimeout: false,\n\t\t\texecutor: (resolve, reject) => {\n\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\"clientSubscribe\",\n\t\t\t\t\ttargetInstance,\n\t\t\t\t\tmessageType,\n\t\t\t\t\tdata,\n\t\t\t\t\t(err, subscribeResult) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t} else if (subscribeResult) {\n\t\t\t\t\t\t\tif (subscribeResult.error) {\n\t\t\t\t\t\t\t\treject(subscribeResult.error);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t!targetInstance.startsWith(\n\t\t\t\t\t\t\t\t\t\t\"system.adapter.\",\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\ttargetInstance = `system.adapter.${targetInstance}`;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// save callback\n\t\t\t\t\t\t\t\tthis._instanceSubscriptions[targetInstance] =\n\t\t\t\t\t\t\t\t\tthis._instanceSubscriptions[\n\t\t\t\t\t\t\t\t\t\ttargetInstance\n\t\t\t\t\t\t\t\t\t] || [];\n\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t!this._instanceSubscriptions[\n\t\t\t\t\t\t\t\t\t\ttargetInstance\n\t\t\t\t\t\t\t\t\t].find(\n\t\t\t\t\t\t\t\t\t\t(subscription) =>\n\t\t\t\t\t\t\t\t\t\t\tsubscription.messageType ===\n\t\t\t\t\t\t\t\t\t\t\t\tmessageType &&\n\t\t\t\t\t\t\t\t\t\t\tsubscription.callback === callback,\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tthis._instanceSubscriptions[\n\t\t\t\t\t\t\t\t\t\ttargetInstance\n\t\t\t\t\t\t\t\t\t].push({\n\t\t\t\t\t\t\t\t\t\tmessageType,\n\t\t\t\t\t\t\t\t\t\tcallback,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tresolve(subscribeResult);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t});\n\t}\n\n\t/**\n\t * Unsubscribe from instance message\n\t * @param targetInstance instance, like 'cameras.0'\n\t * @param messageType message type like 'startCamera/cam3'\n\t * @param callback message handler\n\t */\n\tunsubscribeFromInstance(\n\t\ttargetInstance: string,\n\t\tmessageType: string,\n\t\tcallback: InstanceMessageCallback,\n\t): Promise<boolean> {\n\t\tif (!targetInstance.startsWith(\"system.adapter.\")) {\n\t\t\ttargetInstance = `system.adapter.${targetInstance}`;\n\t\t}\n\n\t\tlet deleted;\n\t\tconst promiseResults = [];\n\t\tdo {\n\t\t\tdeleted = false;\n\t\t\tconst index = this._instanceSubscriptions[\n\t\t\t\ttargetInstance\n\t\t\t]?.findIndex(\n\t\t\t\t(sub) =>\n\t\t\t\t\t(!messageType || sub.messageType === messageType) &&\n\t\t\t\t\t(!callback || sub.callback === callback),\n\t\t\t);\n\n\t\t\tif (index !== undefined && index !== null && index !== -1) {\n\t\t\t\tdeleted = true;\n\t\t\t\t// remember messageType\n\t\t\t\tconst _messageType =\n\t\t\t\t\tthis._instanceSubscriptions[targetInstance][index]\n\t\t\t\t\t\t.messageType;\n\n\t\t\t\tthis._instanceSubscriptions[targetInstance].splice(index, 1);\n\t\t\t\tif (!this._instanceSubscriptions[targetInstance].length) {\n\t\t\t\t\tdelete this._instanceSubscriptions[targetInstance];\n\t\t\t\t}\n\n\t\t\t\t// try to find another subscription for this instance and messageType\n\t\t\t\tconst found =\n\t\t\t\t\tthis._instanceSubscriptions[targetInstance] &&\n\t\t\t\t\tthis._instanceSubscriptions[targetInstance].find(\n\t\t\t\t\t\t(sub) => sub.messageType === _messageType,\n\t\t\t\t\t);\n\n\t\t\t\tif (!found) {\n\t\t\t\t\tpromiseResults.push(\n\t\t\t\t\t\tthis.request({\n\t\t\t\t\t\t\tcommandTimeout: false,\n\t\t\t\t\t\t\texecutor: (resolve, reject) => {\n\t\t\t\t\t\t\t\tthis._socket.emit(\n\t\t\t\t\t\t\t\t\t\"clientUnsubscribe\",\n\t\t\t\t\t\t\t\t\ttargetInstance,\n\t\t\t\t\t\t\t\t\tmessageType,\n\t\t\t\t\t\t\t\t\t(err, wasSubscribed) =>\n\t\t\t\t\t\t\t\t\t\terr\n\t\t\t\t\t\t\t\t\t\t\t? reject(err)\n\t\t\t\t\t\t\t\t\t\t\t: resolve(wasSubscribed),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} while (deleted && (!callback || !messageType));\n\n\t\tif (promiseResults.length) {\n\t\t\treturn Promise.all(promiseResults).then(\n\t\t\t\t(results) => !!results.find((result) => result),\n\t\t\t);\n\t\t}\n\n\t\treturn Promise.resolve(false);\n\t}\n\n\t/**\n\t * Send log to ioBroker log\n\t * @param text Log text\n\t * @param level `info`, `debug`, `warn`, `error` or `silly`\n\t */\n\tlog(text: string, level?: string): Promise<null> {\n\t\treturn text\n\t\t\t? this.request({\n\t\t\t\t\tcommandTimeout: false,\n\t\t\t\t\texecutor: (resolve) => {\n\t\t\t\t\t\tthis._socket.emit(\"log\", text, level);\n\t\t\t\t\t\treturn resolve(null);\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t: Promise.resolve(null);\n\t}\n\n\t/**\n\t * This is a special method for vis.\n\t * It is used to not send to server the changes about \"nothing_selected\" state\n\t * @param id The state that has to be ignored by communication\n\t */\n\tsetStateToIgnore(id: string): void {\n\t\tthis.ignoreState = id;\n\t}\n}\n","export {};\n//# sourceMappingURL=ConnectionProps.js.map","export interface DeferredPromise<T> extends Promise<T> {\n\tresolve(value: T | PromiseLike<T>): void;\n\treject(reason?: any): void;\n}\n\nexport function createDeferredPromise<T = void>(): DeferredPromise<T> {\n\tlet res: (value: T | PromiseLike<T>) => void;\n\tlet rej: (reason?: any) => void;\n\n\tconst promise = new Promise<T>((resolve, reject) => {\n\t\tres = resolve;\n\t\trej = reject;\n\t}) as DeferredPromise<T>;\n\n\tpromise.resolve = res!;\n\tpromise.reject = rej!;\n\n\treturn promise;\n}\n","export * from \"./AdminConnection.js\";\nexport { AdminConnection, IPAddress } from \"./AdminConnection.js\";\n\nexport * from \"./Connection.js\";\nexport { PROGRESS, ERRORS, Connection, SystemConfig } from \"./Connection.js\";\n\nexport * from \"./ConnectionProps.js\";\nexport { ConnectionProps } from \"./ConnectionProps.js\";\n\nexport type { EmitEventHandler, ListenEventHandler } from \"./SocketClient.js\";\n","export function getObjectViewResultToArray<T extends ioBroker.Object>(\n\tdoc:\n\t\t| {\n\t\t\t\trows: ioBroker.GetObjectViewItem<T>[];\n\t\t  }\n\t\t| undefined,\n): T[] {\n\treturn (\n\t\tdoc?.rows.map((item) => item.value).filter((val): val is T => !!val) ??\n\t\t[]\n\t);\n}\n\n/** Makes sure that a host id starts with \"system.host.\" */\nexport function normalizeHostId(host: string): string {\n\tif (!host?.startsWith(\"system.host.\")) {\n\t\thost = `system.host.${host}`;\n\t}\n\treturn host;\n}\n\nexport function objectIdToHostname(id: string): string {\n\tif (id?.startsWith(\"system.host.\")) {\n\t\tid = id.substr(\"system.host.\".length);\n\t}\n\treturn id;\n}\n\n/**\n * Creates a promise that waits for the specified time and then resolves\n */\nexport function wait(ms: number): Promise<void> {\n\treturn new Promise<void>((resolve) => {\n\t\tsetTimeout(resolve, ms);\n\t});\n}\n\n/** Converts ioB pattern into regex */\nexport function pattern2RegEx(pattern: string): string {\n\tpattern = (pattern || \"\").toString();\n\n\tconst startsWithWildcard = pattern[0] === \"*\";\n\tconst endsWithWildcard = pattern[pattern.length - 1] === \"*\";\n\n\tpattern = pattern\n\t\t.replace(/[-/\\\\^$+?.()|[\\]{}]/g, \"\\\\$&\")\n\t\t.replace(/\\*/g, \".*\");\n\n\treturn (\n\t\t(startsWithWildcard ? \"\" : \"^\") +\n\t\tpattern +\n\t\t(endsWithWildcard ? \"\" : \"$\")\n\t);\n}\n"],"names":["Object","defineProperty","exports","value","clipboardToIE11Formatting","default","text","options","reselectPrevious","range","selection","mark","success","debug","document","getSelection","rangeCount","active","activeElement","ranges","i","push","getRangeAt","tagName","toUpperCase","blur","removeAllRanges","type","forEach","addRange","focus","deselectCurrent","createRange","createElement","textContent","ariaHidden","style","all","position","top","clip","whiteSpace","webkitUserSelect","MozUserSelect","msUserSelect","userSelect","addEventListener","e","_a","_b","_c","_d","stopPropagation","format","preventDefault","clipboardData","console","warn","window","clearData","_format","setData","body","appendChild","selectNodeContents","execCommand","Error","err","error","message","copyKey","concat","test","navigator","userAgent","replace","prompt","removeRange","removeChild","__createBinding","this","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","__setModuleDefault","v","__importStar","mod","result","prototype","hasOwnProperty","call","react_1","require","props","useEffect","getElementById","setAttribute","innerHTML","head","size","theme","themeName","themeType","className","backgroundImage","loadingBackgroundImage","backgroundColor","loadingBackgroundColor","backgroundSize","loadingHideLogo","Fragment","width","height","left","borderWidth","bottom","__importDefault","Router","Component","constructor","super","onHashChangedBound","onHashChanged","bind","componentDidMount","componentWillUnmount","removeEventListener","getLocation","hash","location","parts","split","map","item","decodeURIComponent","tab","dialog","id","arg","doNavigate","styles_1","material_1","icons_material_1","i18n_1","SaveCloseButtons","newReact","isIFrame","self","render","noTextOnButtons","buttonStyle","borderRadius","saveToolbar","button","paddingLeft","right","background","dense","minHeight","border","Toolbar","Fab","variant","disabled","changed","onClick","onSave","Save","classes","buttonIcon","t","assign","marginLeft","Close","flexGrow","onClose","_export","withStyles","styles","marginRight","CopyToClipboard_1","NAMESPACE","days","months","QUALITY_BITS","SIGNATURES","JVBERi0","R0lGODdh","R0lGODlh","iVBORw0KGgo","PHN2Zw","Qk1","AAABAA","Utils","CapitalWords","name","filter","word","substring","toLowerCase","join","formatSeconds","seconds","days_","Math","floor","hours","minutes","getObjectName","objects","settings","isDesc","attr","language","common","sysLang","en","de","ru","toString","pos","lastIndexOf","trim","getObjectNameFromObj","obj","noTrim","_id","textOrTranslation","getSettingsOrder","forEnumId","custom","user","subOrder","JSON","parse","stringify","order","getSettingsCustomURLs","subURLs","URLs","reorder","list","source","dest","Array","from","removed","splice","getSettings","defaultEnabling","enabled","useCustom","icon","color","setSettings","s","useCommon","getIcon","length","startsWith","alt","src","prefix","getObjectIcon","pathname","match","splitCamelCase","isUseBright","defaultValue","r","g","b","slice","rgb","parseInt","getTimeString","parseFloat","Number","isNaN","secs","getWindDirection","angle","padding","num","setDataFormat","dateFormat","indexOf","date2string","now","a","year","find","y","day","mm","Date","abs","getTime","date","getDay","getDate","getMonth","renderTextWithA","key","start","index","href","target","rel","title","getSmartName","states","instanceId","noCommon","smartName","getSmartNameFromObj","enableSmartName","removeSmartName","updateSmartName","newSmartName","byON","smartType","getLanguage","nnn","native","_smartName","role","includes","empty","nl","pl","it","fr","pt","es","uk","disableSmartName","copyToClipboard","getFileExtension","fileName","formatBytes","bytes","units","u","toFixed","getInvertedColor","invert","invertedColor","invertColor","hex","bw","padStart","alfa","rs","gs","bd","color2rgb","rgb2lab","x","z","colorDistance","color1","color2","rgb1","rgb2","lab1","lab2","dltL","dltA","dltB","c1","sqrt","dltC","dltH","dltCkcsc","dltHkhsh","_toVal","mix","str","isArray","clsx","tmp","arguments","_i","getThemeName","vendorPrefix","_localStorage","localStorage","getItem","matchMedia","matches","getThemeType","setThemeName","setItem","toggleTheme","themes","getThemeNames","newTheme","parseQuery","query","part","f","getParentId","p","pop","formatDate","dateObj","dd","getFullYear","getHours","getMinutes","getSeconds","getMilliseconds","formatTime","round","d","h","MDtext2link","openLink","url","open","MDgetTitle","MDextractHeader","header","lines","attrs","line","pos_","val","MDremoveDocsify","doc","generateFile","json","el","encodeURIComponent","display","click","quality2text","quality","clone","object","getStates","ex","false","true","getSvg","response","fetch","blob","Promise","resolve","reader","FileReader","onload","readAsDataURL","detectMimeType","base64","signature","keys","isStableRepository","activeRepo","isStringInteger","isValidDate","namespace","INSTANCES","FORBIDDEN_CHARS","DialogConfirm","dialogName","suppressQuestionMinutes","suppress","removeItem","state","handleOk","handleCancel","setTimeout","Dialog","maxWidth","fullWidth","event","reason","DialogTitle","DialogContent","DialogContentText","FormControlLabel","label","root","suppressRoot","control","Checkbox","checked","onChange","setState","suppressText","DialogActions","Button","autoFocus","startIcon","Check","ok","cancel","fontSize","marginTop","DialogError","log","colors_1","step","toInt","substr","getElevation","overlayColor","elevation","overlay","int","getElevations","elevations","_e","_f","_g","_h","_j","palette","mode","paper","primary","main","secondary","expert","overrides","MuiAppBar","colorDefault","MuiLink","textTransform","transition","orange","MuiPaper","light","dark","contrastText","toolbar","grey","createTheme","components","MuiButton","variants","getContrastText","borderColor","action","disabledBackground","alpha","hoverOpacity","I18n","setLanguage","lang","extendTranslations","words","wordsWithPrefix","_lang","_words","wordsOfOneLanguage","translations","languageDictionary","wordsOfOneLang","_word","setTranslations","translation","w","unknownTranslations","_disableWarning","wordEn","_len","args","_key","i18nShow","disableWarning","disable","i18nDisableWarning","AdminConnection_exports","import_tools","AdminConnection","import_Connection","Connection","request","requireAdmin","getCertificates","update","cacheKey","forceUpdate","commandTimeout","executor","async","getObject","certificates","entries","_ref","cert","parseCertificate","getLogs","host","linesNumber","_socket","emit","getLogsFiles","reject","files","delLogs","deleteFile","adapter","deleteFolder","folderName","rename","oldName","newName","renameFile","getHosts","startkey","endkey","getObjectViewResultToArray","getUsers","renameGroup","newId","groups","getGroups","subGroups","group","oldGroupId","newGroupId","setObject","delObject","parentGroup","getHostInfo","timeoutMs","normalizeHostId","timeout","data","elapsed","clearTimeout","ERRORS","PERMISSION_ERROR","getHostInfoShort","getRepository","getInstalled","cmdTimeout","cmdExec","cmd","cmdId","readBaseSettings","objectIdToHostname","requireFeatures","writeBaseSettings","config","restartController","getDiagData","typeOfDiag","changePassword","password","getIpAddresses","address","getHostByIp","ipOrHostName","ip","IPs4","IPs6","family","hardware","networkInterfaces","eth","iface","parseIPAddresses","encrypt","plaintext","ciphertext","decrypt","chmodFile","path","processed","chownFile","filename","getNotifications","category","notifications","clearNotifications","getIsEasyModeStrict","isStrict","getEasyMode","getRatings","ratings","getCurrentSession","controller","AbortController","onTimeout","abort","res","signal","getCurrentInstance","getAdapterInstances","adapterStr","instances","getAdapters","adapters","getCompactAdapters","getAdaptersResetCache","resetCache","getCompactInstances","getAdapterInstancesResetCache","getCompactInstalled","getInstalledResetCache","getCompactRepository","getRepositoryResetCache","getCompactHosts","systemConfig","getCompactSystemRepositories","systemRepositories","Connection_exports","PROGRESS","PROGRESS2","ERRORS2","NOT_CONNECTED","ADAPTERS","ignoreState","connected","subscribed","firstConnect","waitForRestart","loaded","simStates","statesSubscribes","filesSubscribes","objectsSubscribes","acl","isSecure","onReadyDone","onConnectionHandlers","onLogHandlers","_waitForFirstConnectionPromise","import_DeferredPromise","createDeferredPromise","_instanceSubscriptions","_promises","systemLang","applyDefaultProps","waitForSocketLib","then","startSocket","catch","alert","protocol","hostname","port","ioTimeout","max","admin5only","autoSubscribes","autoSubscribeLog","doNotLoadACL","doNotLoadAllObjects","onError","_systemConfig","isWeb","socketUrl","_waitForSocketPromise","io","registerSocketOnLoad","wait","parsed","URL","endsWith","connect","uuid","token","on","noTimeout","getVersion","info","major","minor","patch","version","_authTimer","onPreConnect","isOk","operation","onProgress","READY","reload","_subscribe","cb","CONNECTING","authenticate","onLog","_err","objectChange","stateChange","messageType","instanceMessage","fileChange","onCmdStdoutHandler","onCmdStderrHandler","exitCode","onCmdExitHandler","loadData","isCloud","isConnected","waitForFirstConnection","getUserPermissions","doLoadData","getSystemConfig","getCompactSystemConfig","userLanguage","onLanguage","CONNECTED","getObjects","onReady","search","subscribeState","binary","ids","toSubscribe","cbs","reg","RegExp","pattern2RegEx","getBinaryState","getForeignStates","id2","subscribeStateAsync","unsubscribeState","toUnsubscribe","sub","subscribeObject","unsubscribeObject","oldObj","_rev","onObjectChange","values","sourceInstance","callback","regId","regFilePattern","subscribeFiles","filePattern","filePatterns","pattern","unsubscribeFiles","NOT_ADMIN","feature","checkFeatureSupported","NOT_SUPPORTED","promise","timeoutControl","TIMEOUT","isAll","getState","ack","setBinaryState","ts","lc","disableProgressUpdate","OBJECTS_LOADED","getObjectsById","isEnable","requireLog","isEnabled","maintenance","delObjects","sendTo","instance","command","extendObject","registerLogHandler","handler","unregisterLogHandler","registerConnectionHandler","unregisterConnectionHandler","registerCmdStdoutHandler","unregisterCmdStdoutHandler","registerCmdStderrHandler","unregisterCmdStderrHandler","registerCmdExitHandler","unregisterCmdExitHandler","getEnums","_enum","_res","rows","getObjectView","end","getObjectViewCustom","getObjectViewSystem","design","readMetaItems","objs","readDir","readFile","file","mimeType","writeFile64","btoa","Uint8Array","reduce","data2","byte","String","fromCharCode","getForeignObjects","setSystemConfig","getRawSocket","getHistory","getHistoryEx","stepIgnore","sessionId","serverName","getWebServerName","fileExists","exists","getCurrentUser","_isSecure","getUuid","features","startKey","endKey","instanceObjects","adapterObjects","logout","subscribeOnInstance","targetInstance","subscribeResult","subscription","unsubscribeFromInstance","deleted","promiseResults","findIndex","_messageType","wasSubscribed","results","level","setStateToIgnore","module","DeferredPromise_exports","rej","esm_exports","import_AdminConnection","__reExport","tools_exports","ms","startsWithWildcard","endsWithWildcard"],"sourceRoot":""}